<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>G2 基础教程 | 白墨</title><meta name="keywords" content="JavaScript,网站开发,前端,可视化技术,数据可视化"><meta name="author" content="白墨"><meta name="copyright" content="白墨"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="G2 图表组成简介为了更好得使用 G2 进行数据可视化，我们需要了解 G2 图表的组成以及相关概念。 完整的 G2 图表组成如下图所示：  坐标轴 AXES每个图表通常包含两个坐标轴，在直角坐标系（笛卡尔坐标系）下，分别为 x 轴和 y 轴，在极坐标轴下，则分别由角度和半径 2 个维度构成。 每个坐标轴由坐标轴线（line）、刻度线（tickLine）、刻度文本（label）、标题（title）以">
<meta property="og:type" content="article">
<meta property="og:title" content="G2 基础教程">
<meta property="og:url" content="https://ziptop.top/posts/54170/index.html">
<meta property="og:site_name" content="白墨">
<meta property="og:description" content="G2 图表组成简介为了更好得使用 G2 进行数据可视化，我们需要了解 G2 图表的组成以及相关概念。 完整的 G2 图表组成如下图所示：  坐标轴 AXES每个图表通常包含两个坐标轴，在直角坐标系（笛卡尔坐标系）下，分别为 x 轴和 y 轴，在极坐标轴下，则分别由角度和半径 2 个维度构成。 每个坐标轴由坐标轴线（line）、刻度线（tickLine）、刻度文本（label）、标题（title）以">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ziptop.top/assert/img/background/img12.png">
<meta property="article:published_time" content="2020-07-15T13:15:36.000Z">
<meta property="article:modified_time" content="2020-07-15T13:15:36.000Z">
<meta property="article:author" content="白墨">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="网站开发">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="可视化技术">
<meta property="article:tag" content="数据可视化">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ziptop.top/assert/img/background/img12.png"><link rel="shortcut icon" href="/assert/img/favicon.ico"><link rel="canonical" href="https://ziptop.top/posts/54170/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-D20ET8Z6PT"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-D20ET8Z6PT');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 白墨","link":"链接: ","source":"来源: 白墨","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'G2 基础教程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-07-15 21:15:36'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/assert/css/baimo-main.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_3831269_b8qnvjc7vnp.css"><link rel="stylesheet" href="/assert/css/categoryBar.css"><link rel="stylesheet" href="/assert/css/nav-menu.css"><link rel="stylesheet" href="/assert/css/APlayer.min.css"><link rel="stylesheet" href="/assert/css/aplayer.css"><meta name="generator" content="Hexo 6.2.0"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><span> 文章列表</span></a></li><li><a class="site-page child" href="/tags/"><span> 全部标签</span></a></li><li><a class="site-page child" href="/categories/"><span> 全部分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 专栏</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E7%94%9F%E7%89%A9%E4%BF%A1%E6%81%AF/"><span> 生物信息</span></a></li><li><a class="site-page child" href="/categories/%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91/"><span> 网站开发</span></a></li><li><a class="site-page child" href="/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"><span> 编程基础</span></a></li><li><a class="site-page child" href="/categories/%E7%BB%9F%E8%AE%A1%E5%AD%A6/"><span> 统计学</span></a></li><li><a class="site-page child" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91/"><span> 数据库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><span> 网址</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/assert/img/background/img12.png')"><nav id="nav"><span id="blog_name"><div class="back-home-button" tabindex="-1"><i class="back-home-button-icon fas fa-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">服务</div><div class="back-menu-list"><a class="back-menu-item" href="/" title="前往博客主页" target="_blank" one-link-mark="yes"><span class="back-menu-item-text">博客主页</span></a><a class="back-menu-item" href="/link/" rel="external nofollow" title="前往网址导航" target="_blank" one-link-mark="yes"><span class="back-menu-item-text">网址导航</span></a><a class="back-menu-item" href="http://ref.ziptop.top/" rel="external nofollow" title="前往生信文档" target="_blank" one-link-mark="yes"><span class="back-menu-item-text">生信文档</span></a><a class="back-menu-item" href="https://qqdb.github.io/bioinfo-book/" rel="external nofollow" title="前往编程清单" target="_blank" one-link-mark="yes"><span class="back-menu-item-text">编程清单</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="http://bioinfor.imu.edu.cn/raacfold/" title="蛋白质结构约化分析" target="_blank" rel="noopener nofollow" one-link-mark="yes"><span class="back-menu-item-text">RaacFold</span></a><a class="back-menu-item" href="http://bioinfor.imu.edu.cn/ematlas/" title="哺乳动物胚胎发育图谱" target="_blank" rel="noopener nofollow" one-link-mark="yes"><span class="back-menu-item-text">EmAtlas</span></a></div></div></div></div><a id="site-name" href="/"><div class="title">白墨</div><i class="fa-solid fa-house"></i></a></span><div class="mask-name-container"><center id="name-container"><a id="page-name" href="javascript:btf.scrollToDest(0, 500)" rel="external nofollow noreferrer">PAGE_NAME</a></center></div><div id="menus"><div class="nav-button" id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="nav-button" id="darkmode_navswitch"><a class="darkmode_switchbutton" type="button" title="浅色和深色模式转换" onclick="switchDarkMode()"><i class="fas fa-adjust"></i></a></div><div class="nav-button" id="nav-totop"><a class="totopbtn"><i class="fas fa-arrow-up"></i><span id="percent" onclick="btf.scrollToDest(0,500)">0</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><span> 文章列表</span></a></li><li><a class="site-page child" href="/tags/"><span> 全部标签</span></a></li><li><a class="site-page child" href="/categories/"><span> 全部分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 专栏</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E7%94%9F%E7%89%A9%E4%BF%A1%E6%81%AF/"><span> 生物信息</span></a></li><li><a class="site-page child" href="/categories/%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91/"><span> 网站开发</span></a></li><li><a class="site-page child" href="/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"><span> 编程基础</span></a></li><li><a class="site-page child" href="/categories/%E7%BB%9F%E8%AE%A1%E5%AD%A6/"><span> 统计学</span></a></li><li><a class="site-page child" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91/"><span> 数据库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><span> 网址</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">G2 基础教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2020-07-15T13:15:36.000Z" title="发表于 2020-07-15 21:15:36">2020-07-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%8F%AF%E8%A7%86%E5%8C%96%E6%8A%80%E6%9C%AF/">可视化技术</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">26.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>109分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="G2 基础教程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="G2-图表组成"><a href="#G2-图表组成" class="headerlink" title="G2 图表组成"></a>G2 图表组成</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>为了更好得使用 G2 进行数据可视化，我们需要了解 G2 图表的组成以及相关概念。</p>
<p>完整的 G2 图表组成如下图所示：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vc2t5bGFyay8zMTMyNTRhYS1mZjk3LTQzOTYtOTE5Mi0zYzBmOGZjMTY4NjcvYXR0YWNoLzIzNzgvZGEwN2IyN2ZiODg1MjA2YS9pbWFnZS5wbmc?x-oss-process=image/format,png" alt="img"></p>
<h2 id="坐标轴-AXES"><a href="#坐标轴-AXES" class="headerlink" title="坐标轴 AXES"></a>坐标轴 AXES</h2><p>每个图表通常包含两个坐标轴，在直角坐标系（笛卡尔坐标系）下，分别为 x 轴和 y 轴，在极坐标轴下，则分别由角度和半径 2 个维度构成。</p>
<p>每个坐标轴由坐标轴线（line）、刻度线（tickLine）、刻度文本（label）、标题（title）以及网格线（grid）组成。</p>
<p>查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-axes">Axis 教程</a>获取更多信息。</p>
<h2 id="图例-LEGEND"><a href="#图例-LEGEND" class="headerlink" title="图例 LEGEND"></a>图例 LEGEND</h2><p>图例作为图表的辅助元素，用于标定不同的数据类型以及数据的范围，用于辅助阅读图表，帮助用户在图表中进行数据的筛选过滤。</p>
<p>查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-legend">Legend 教程</a>获取更多信息。</p>
<h2 id="几何标记-GEOM"><a href="#几何标记-GEOM" class="headerlink" title="几何标记 GEOM"></a>几何标记 GEOM</h2><p>几何标记（Geometry），即我们所说的点、线、面这些几何图形，在 G2 中几何标记的类型决定了生成图表的类型。也就是数据被可视化后的实际表现，不同的几何标记都包含对应的图形属性。</p>
<p>查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-geom">Geom 教程</a>获取更多信息。</p>
<h2 id="提示信息-TOOLTIP"><a href="#提示信息-TOOLTIP" class="headerlink" title="提示信息 TOOLTIP"></a>提示信息 TOOLTIP</h2><p>当鼠标悬停在某个点上时，会以提示框的形式显示当前点对应的数据的信息，比如该点的值，数据单位等。数据提示框内提示的信息还可以通过格式化函数动态指定。</p>
<p>查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-tooltip">Tooltip 教程</a>获取更多信息。</p>
<h2 id="辅助标记-GUIDE"><a href="#辅助标记-GUIDE" class="headerlink" title="辅助标记 GUIDE"></a>辅助标记 GUIDE</h2><p>当需要在图表上绘制一些辅助线、辅助框或者图片时，比如增加平均值线、最高值线或者标示明显的范围区域时，可以使用辅助标记 guide。</p>
<p>查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-guide">Guide 教程</a>获取更多信息。</p>
<h1 id="创建图表"><a href="#创建图表" class="headerlink" title="创建图表"></a>创建图表</h1><p>本节主要讲解如何创建以及配置 Chart 图表对象，主要内容包括图表容器全局样式配置、绘图区、图表宽度自适应等相关内容。</p>
<h2 id="图表容器"><a href="#图表容器" class="headerlink" title="图表容器"></a>图表容器</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext"><div id="c1"></div><br></code></pre></td></tr></table></figure>

<p>实例化 Chart 对象时，绑定 dom 容器的方式有两种：</p>
<p><strong>1. 传入 dom 容器的 id</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  width: 1000,<br>  height: 500<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>2. 传入 dom 容器的 html 节点对象</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const chart = new G2.Chart(&#123;<br>  container: document.getElementById(&#x27;c1&#x27;),<br>  width: 1000,<br>  height: 500<br>&#125;);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>注：为了兼容 G2 3.0 之前的版本，也可使用 <code>id</code> 属性代替 <code>container</code>，用法相同。</p>
</blockquote>
<h2 id="图表样式"><a href="#图表样式" class="headerlink" title="图表样式"></a>图表样式</h2><p><strong>1. 图表的宽高</strong></p>
<p>创建 chart 对象时，需要指定图表的宽高，通过如下方式指定：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  width: 1000,<br>  height: 500<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>2. 图表的样式</strong></p>
<p>图表样式包括画布背景、绘图区域背景以及内边框，分别对应如下属性：</p>
<ul>
<li><p><code>background</code>：用于设置整个 chart 的图表背景样式，包括边框，背景色，透明度，圆角等；</p>
</li>
<li><p><code>plotBackground</code>：用于设置 chart 绘图区域的背景样式，包括边框，背景色，透明度，圆角等；</p>
</li>
<li><p><code>padding</code>：用于设置边距，用法同 CSS 中的 padding 属性相同, [上，右，下，左]；</p>
</li>
</ul>
<p>用法如下，具体详见 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-chart">API 文档</a>:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  width: 1000,<br>  height: 500,<br>  padding: [ 20, 20, 95, 80 ] // 上，右，下，左<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>下图展示了 G2 的图表布局：<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL1BmbnZyQ1FSZnVQbUpJcWZLTmtTLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h2><h3 id="图表宽度自适应"><a href="#图表宽度自适应" class="headerlink" title="图表宽度自适应"></a>图表宽度自适应</h3><p>默认情况下，G2 图表的宽度需要用户手动设置 <code>width</code> 参数，当需要图表跟随图表容器宽度变化时，则需要开启 <code>forceFit</code> 属性，默认其值为  false，开启方式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  forceFit: true,<br>  height : 400<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>此时，不需要设置 <code>width</code> 属性，即使设置了也不会生效。</p>
<p>另外还可以手动得调用自适应函数 <code>chart.forceFit()</code> 来响应页面变化。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.forceFit(); // 手动调用自适应函数<br></code></pre></td></tr></table></figure>

<p><code>注意</code>：</p>
<ul>
<li><p>G2 的图表是根据父容器的宽度来计算宽度，如果父容器隐藏，则会将宽度计算成 0，显示父容器时，需要调用一下 chart.forceFit()。</p>
</li>
<li><p>仅当浏览器的窗口变化时，图表会重新计算宽度，其他情况下不进行宽度的计算和自适应。</p>
</li>
</ul>
<h3 id="图表动画"><a href="#图表动画" class="headerlink" title="图表动画"></a>图表动画</h3><p>默认情况下，G2 的图表动画处于开启状态，可以通过如下两种方式关闭图表动画：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">// 方式一： 设置 animate 属性<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  width: 800,<br>  height : 400,<br>  animate: false // 关闭图表动画<br>&#125;);<br><br>// 方式二： 手动调用 animate 函数<br>chart.animate(false); // 关闭动画<br></code></pre></td></tr></table></figure>

<p>单个几何标记（折线、面积图）的动画可以在 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-geom">Geom</a> 上设置</p>
<h1 id="装载数据"><a href="#装载数据" class="headerlink" title="装载数据"></a>装载数据</h1><h2 id="如何装载数据"><a href="#如何装载数据" class="headerlink" title="如何装载数据"></a>如何装载数据</h2><p>chart 对象支持两种数据载入的方式：</p>
<ul>
<li>方式 1：<code>data</code> 属性传入</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const chart = new G2.Chart(&#123;<br>  id: &#x27;c1&#x27;,<br>  width: 600,<br>  height: 300,<br>  data: [<br>    &#123; x: &#x27;a&#x27;, y: 1 &#125;,<br>    &#123; x: &#x27;b&#x27;, y: 2 &#125;,<br>    ...<br>  ]<br>&#125;);<br></code></pre></td></tr></table></figure>

<ul>
<li>方式 2：调用 <code>chart.source(data)</code> 方法，每个字段的<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-scale">列定义</a>也可以在这里传入</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.source(data, &#123;<br>  x: &#123;<br>    type: &#x27;cat&#x27;<br>  &#125;,<br>  y: &#123;<br>    min: 0<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="支持的数据格式"><a href="#支持的数据格式" class="headerlink" title="支持的数据格式"></a>支持的数据格式</h2><p>G2 支持两种格式的数据源：</p>
<ol>
<li><p>JSON 数组</p>
</li>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-dataset">DataView 对象</a></p>
</li>
</ol>
<h3 id="JSON-数组"><a href="#JSON-数组" class="headerlink" title="JSON 数组"></a>JSON 数组</h3><p>G2 接收的数据格式非常简单：标准的 JSON 数组，其中每个数组元素是一个标准的 JSON 对象：</p>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; gender: &#x27;男&#x27;, count: 40 &#125;,<br>  &#123; gender: &#x27;女&#x27;, count: 30 &#125;<br>];<br><br>chart.source(data);<br></code></pre></td></tr></table></figure>

<h3 id="DataView-对象"><a href="#DataView-对象" class="headerlink" title="DataView 对象"></a>DataView 对象</h3><p>详见 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-dataset">DataSet 教程</a>。</p>
<h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><p>G2 更新数据的方式主要有三种：</p>
<ul>
<li><p>仅仅是更新图表的数据</p>
</li>
<li><p>清理所有，重新绘制</p>
</li>
<li><p>使用 DataView 时的更新</p>
</li>
</ul>
<h3 id="更新数据-1"><a href="#更新数据-1" class="headerlink" title="更新数据"></a>更新数据</h3><p>如果需要马上更新图表，使用 <code>chart.changeData(data)</code> 即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.changeData(newData);<br></code></pre></td></tr></table></figure>

<ul>
<li>view 也支持 <code>view.changeData(data)</code></li>
</ul>
<p>如果仅仅是更新数据，而不需要马上更新图表，可以调用 <code>chart.source(data)</code>，需要更新图表时调用 <code>chart.repaint()</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.source(newData);<br><br>chart.guide().clear();// 清理guide<br>chart.repaint();<br></code></pre></td></tr></table></figure>

<h3 id="清理图形语法"><a href="#清理图形语法" class="headerlink" title="清理图形语法"></a>清理图形语法</h3><p>更新数据时还可以清除图表上的所有元素，重新定义图形语法，重新绘制</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.line().position(&#x27;x*y&#x27;);<br><br>chart.render();<br><br>chart.clear(); // 清理所有<br>chart.source(newData); // 重新加载数据<br>chart.interval().position(&#x27;x*y&#x27;).color(&#x27;z&#x27;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h3 id="使用-DataView-更新"><a href="#使用-DataView-更新" class="headerlink" title="使用 DataView  更新"></a>使用 DataView  更新</h3><p>由于 <code>DataSet</code> 支持状态量 <code>state</code>，一旦更改状态量，图表即一起刷新，详情查看<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-dataset"> DataSet 教程</a>。</p>
<h1 id="DataSet"><a href="#DataSet" class="headerlink" title="DataSet"></a>DataSet</h1><p>自 G2 3.0 版本开始，原先内置的数据处理模块 frame 从 G2 包中抽离出来，独立成为 DataSet 包。DataSet 的目标是为数据可视化场景提供状态驱动（state driven）的、丰富而强大的数据处理能力。</p>
<h2 id="术语表"><a href="#术语表" class="headerlink" title="术语表"></a>术语表</h2><table>
<thead>
<tr>
<th>术语</th>
<th>英文</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>数据集</td>
<td>DataSet</td>
<td>一组数据集合</td>
</tr>
<tr>
<td>数据视图</td>
<td>DataView</td>
<td>单个数据视图，目前有普通二维数据（类似一张数据库表）、树形数据、图数据和地理信息数据几种类型</td>
</tr>
<tr>
<td>状态量</td>
<td>state</td>
<td>数据集内部流转的控制数据状态的变量</td>
</tr>
<tr>
<td>变换</td>
<td>Transform</td>
<td>数据变换函数，数据视图做数据处理时使用，包括图布局、数据补全、数据过滤等等</td>
</tr>
<tr>
<td>连接器</td>
<td>Connector</td>
<td>数据接入函数，用于把某种数据源（譬如 csv）载入到某个数据视图上</td>
</tr>
</tbody></table>
<h2 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h2><p>在 G2 的 1.x 和 2.x 版本里，统计函数和数据处理是和图形语法混合在一起的。这一方面导致了不必要的隐喻，造成额外的理解成本，另一方面把数据处理模块（ Frame 和 Stat ）内置也限制了 G2 数据处理能力的进一步发展。</p>
<p>为追求更极致的体验，我们把数据处理部分从 G2 中完全抽离出来，对数据处理本身进行了进一步的抽象，扩展和优化，从而实现了一个独立的数据处理模块 DataSet。</p>
<p>首先我们把数据处理分为两个大的步骤：数据连接（Connector）和数据转换（Transform）。Connector 负责导入和归一化数据（譬如导入 CSV 数据，导入 GeoJSON 数据等），Transform 负责进行各种数据转换操作（譬如图布局、数据统计、数据补全等）。通过这样的分层，支持了前端社区非常全面的数据处理相关的算法和模块；其次，我们在单个数据视图（DataView）的基础上增加了数据集（DataSet）的概念，通过统一的 DataSet 管理，实现了各个数据视图之间的状态同步和交互。整个数据处理模块的架构如下图。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9zdmcvMTAwOTk2LzE1Mzk4MzYxMTkyMTAtYjVkYjVmOWMtYzFmYS00NmJiLTljMGYtODEyNmMwOGQyOGFiLnN2Zw?x-oss-process=image/format,png" alt="img"></p>
<p>DataSet 支持状态量（State）可以实现多个图表之间的联动</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="浏览器引入"><a href="#浏览器引入" class="headerlink" title="浏览器引入"></a>浏览器引入</h3><p>可以通过<code>&lt;script&gt;</code>标签引入在线资源或者本地脚本。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext"><!-- 引入在线资源 --><br><script src="https://unpkg.com/@antv/data-set"></script><br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext"><!-- 引入本地脚本 --><br><script src="./data-set.js"></script><br></code></pre></td></tr></table></figure>

<p>这样，就可以在后续脚本中得到全局变量 DataSet。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext"><script src="https://unpkg.com/@antv/data-set"></script><br><script><br>const dv = new DataSet.View();<br></script><br></code></pre></td></tr></table></figure>

<h3 id="通过-npm-安装"><a href="#通过-npm-安装" class="headerlink" title="通过 npm 安装"></a>通过 npm 安装</h3><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.npmjs.com/package/@antv/data-set">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-c9ZXrCZb-1594818845135)(https:&#x2F;&#x2F;img.shields.io&#x2F;npm&#x2F;v&#x2F;@antv&#x2F;data-set.svg?style&#x3D;flat-square)]</a></p>
<p>我们提供了 DataSet 的 npm 包，可以通过下面的命令进行安装。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">npm install @antv/data-set --save<br></code></pre></td></tr></table></figure>

<p>安装后即可使用 <code>import</code> 或者 <code>require</code> 进行引用。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">import &#123; View &#125; from &#x27;@antv/data-set&#x27;;<br>const dv = new View();<br></code></pre></td></tr></table></figure>

<h2 id="功能介绍"><a href="#功能介绍" class="headerlink" title="功能介绍"></a>功能介绍</h2><p>DataSet 主要完成了以下功能：</p>
<ul>
<li><p>源数据的解析，将 CSV, DSV, GeoJSON 转成标准的JSON，查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-connector">Connector</a></p>
</li>
<li><p>加工数据，包括 filter, map, fold(补数据) 等操作，查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-transform">Transform</a></p>
</li>
<li><p>统计函数，汇总统计、百分比、封箱 等统计函数，查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-transform">Transform</a></p>
</li>
<li><p>特殊数据处理，包括 地理数据、矩形树图、桑基图、文字云 的数据处理，查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-transform">Transform</a></p>
</li>
</ul>
<h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><h3 id="单独使用-DataView"><a href="#单独使用-DataView" class="headerlink" title="单独使用 DataView"></a>单独使用 DataView</h3><p>如果仅仅是对数据进行加工，不需要图表联动</p>
<h3 id="状态量"><a href="#状态量" class="headerlink" title="状态量"></a>状态量</h3><p>在G2 3.0 中使用 DataSet 的状态量(State) 可以很容易的实现图表的联动，步骤如下：</p>
<ol>
<li><p>创建 DataSet 对象，指定状态量</p>
</li>
<li><p>创建 DataView 对象，在 transform 中使用状态量</p>
</li>
<li><p>创建图表，引用前面创建 DataView</p>
</li>
<li><p>改变状态量，所有 DataView 更新</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">// step1 创建 dataset 指定状态量<br>const ds = new DataSet(&#123;<br>  state: &#123;<br>    year: &#x27;2010&#x27;<br>  &#125;<br>&#125;);<br><br>// step2 创建 DataView<br>const dv = ds.createView().source(data);<br><br>dv.transform(&#123;<br>  type: &#x27;filter&#x27;,<br>  callback(row) &#123;<br>    return row.year === ds.state.year;<br>  &#125;<br>&#125;);<br><br><br>// step3 引用 DataView<br>chart.source(dv);<br><br>// step4 更新状态量<br>ds.setState(&#x27;year&#x27;, &#x27;2012&#x27;);<br></code></pre></td></tr></table></figure>

<p><code>注意</code>：</p>
<ul>
<li><p>在 DataSet 创建了状态量后，默认会影响其管理的所有的 DataView， 可以通过 <code>watchingStates</code> 明确的指定受那些状态量影响，设置为空数组时不受状态量的影响。</p>
</li>
<li><p>所有引用了 DataSet 管理的 DataView 的图表都会受自动刷新，不需要手工刷新。</p>
</li>
</ul>
<h3 id="图表联动示例"><a href="#图表联动示例" class="headerlink" title="图表联动示例"></a>图表联动示例</h3><p>假设我们有一个 CSV 文件 <code>population-by-age.csv</code>，里面的数据是美国各个州不同年龄段的人口数量，文件内容如下：</p>
<table>
<thead>
<tr>
<th>State</th>
<th>小于5岁</th>
<th>5至13岁</th>
<th>14至17岁</th>
<th>18至24岁</th>
<th>25至44岁</th>
<th>45至64岁</th>
<th>65岁及以上</th>
</tr>
</thead>
<tbody><tr>
<td>WY</td>
<td>38253</td>
<td>60890</td>
<td>29314</td>
<td>53980</td>
<td>137338</td>
<td>147279</td>
<td>65614</td>
</tr>
<tr>
<td>DC</td>
<td>36352</td>
<td>50439</td>
<td>25225</td>
<td>75569</td>
<td>193557</td>
<td>140043</td>
<td>70648</td>
</tr>
<tr>
<td>VT</td>
<td>32635</td>
<td>62538</td>
<td>33757</td>
<td>61679</td>
<td>155419</td>
<td>188593</td>
<td>86649</td>
</tr>
<tr>
<td>ND</td>
<td>41896</td>
<td>67358</td>
<td>33794</td>
<td>82629</td>
<td>154913</td>
<td>166615</td>
<td>94276</td>
</tr>
<tr>
<td>AK</td>
<td>52083</td>
<td>85640</td>
<td>42153</td>
<td>74257</td>
<td>198724</td>
<td>183159</td>
<td>50277</td>
</tr>
<tr>
<td>SD</td>
<td>58566</td>
<td>94438</td>
<td>45305</td>
<td>82869</td>
<td>196738</td>
<td>210178</td>
<td>116100</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody></table>
<p>我们希望把 CSV 文件的内容载入，画一个以州为横轴，人口数量为纵轴的层叠柱状图，并且在查看某个柱子的时候，希望能看到对应某个州的对比各个年龄段人口数量的饼图。下面我们来看看应该怎么画？</p>
<blockquote>
<p>Step1：创建数据集 DataSet 实例，管理 state 状态量</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const ds = new DataSet(&#123;<br>  state: &#123;<br>    currentState: &#x27;WY&#x27;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>Step2：为层叠柱状图创建数据视图 View 实例，装载数据</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">/*<br> * 如果不需要用到状态管理之类的功能，也可以不基于 DataSet 实例创建数据视图<br> * 直接用 const dv = new DataSet.View();<br> * 本例需要用状态量在不同的数据视图实例之间通信，所以需要有一个 DataSet 实例管理状态量<br> */<br>$.get(&#x27;/assets/data/population-by-age.csv&#x27;, data => &#123;<br>  const dvForAll = ds<br>    .createView(&#x27;populationByAge&#x27;, &#123;<br>      watchingStates: [], // 用空数组，使得这个实例不监听 state 变化<br>    &#125;) // 在 DataSet 实例下创建名为 populationByAge 的数据视图<br>    .source(data, &#123;<br>      type: &#x27;csv&#x27;, // 使用 CSV 类型的 Connector 装载 data<br>    &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>Step3：合并人口数量列（新增”年龄段”和”人口”字段，把各个年龄段的人口数量列数据合并到这两列上）</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">dvForAll.transform(&#123;<br>  type: &#x27;fold&#x27;,<br>  fields: [ &#x27;小于5岁&#x27;,&#x27;5至13岁&#x27;,&#x27;14至17岁&#x27;,&#x27;18至24岁&#x27;,&#x27;25至44岁&#x27;,&#x27;45至64岁&#x27;,&#x27;65岁及以上&#x27; ],<br>  key: &#x27;age&#x27;,<br>  value: &#x27;population&#x27;<br>&#125;);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>Step4：为饼图创建数据视图实例，继承上一个数据视图的数据，通过状态量 currentState 过滤数据、统计不同年龄段人口占比</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const dvForOneState = ds<br>  .createView(&#x27;populationOfOneState&#x27;)<br>  .source(dvForAll); // 从全量数据继承，写法也可以是 .source(&#x27;populationByAge&#x27;)<br>    <br>dvForOneState<br>  .transform(&#123; // 过滤数据<br>    type: &#x27;filter&#x27;,<br>    callback(row) &#123;<br>      return row.state === ds.state.currentState;<br>    &#125;<br>  &#125;)<br>  .transform(&#123;<br>    type: &#x27;percent&#x27;,<br>    field: &#x27;population&#x27;,<br>    dimension: &#x27;age&#x27;,<br>    as: &#x27;percent&#x27;<br>  &#125;);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>Step5：最后使用 G2 绘图、绑定事件</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const c1 = new G2.Chart(&#123;<br>  id: &#x27;c1&#x27;,<br>  forceFit: true,<br>  height: 400,<br>&#125;);<br>c1.source(dvForAll);<br>c1.legend(&#123;<br>  position: &#x27;top&#x27;,<br>&#125;);<br>c1.axis(&#x27;population&#x27;, &#123;<br>  label: &#123;<br>    formatter: val => &#123;<br>      return val / 1000000 + &#x27;M&#x27;;<br>    &#125;<br>  &#125;<br>&#125;);<br>c1.intervalStack()<br>  .position(&#x27;state*population&#x27;)<br>  .color(&#x27;age&#x27;)<br>  .select(true, &#123;<br>    mode: &#x27;single&#x27;,<br>    style: &#123;<br>      stroke: &#x27;red&#x27;,<br>      strokeWidth: 5<br>    &#125;<br>  &#125;);<br>c1.on(&#x27;tooltip:change&#x27;, function(evt) &#123;<br>  const items = evt.items || [];<br>  if (items[0]) &#123;<br>    ds.setState(&#x27;currentState&#x27;, items[0].title);<br>  &#125;<br>&#125;);<br><br>const c2 = new G2.Chart(&#123;<br>  id: &#x27;c2&#x27;,<br>  forceFit: true,<br>  height: 300,<br>  padding: 0,<br>&#125;);<br>c2.source(dvForOneState);<br>c2.coord(&#x27;theta&#x27;, &#123;<br>  radius: 0.8 // 设置饼图的大小<br>&#125;);<br>c2.legend(false);<br>c2.intervalStack()<br>  .position(&#x27;percent&#x27;)<br>  .color(&#x27;age&#x27;)<br>  .label(&#x27;age*percent&#x27;,function(age, percent) &#123;<br>    percent = (percent * 100).toFixed(2) + &#x27;%&#x27;;<br>    return age + &#x27; &#x27; + percent;<br>  &#125;);<br><br>c1.render();<br>c2.render();<br></code></pre></td></tr></table></figure>

<blockquote>
<p>效果：</p>
</blockquote>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4MzYyNTE0ODAtNDgxMGRhY2EtZWI4Yi00ZGI5LWJlYzktN2UyN2I4ZTVkZDVmLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4MzYyNjE4NTItMjczMzkyNWYtNmQyMC00MTQ0LThjZDQtMzkwMTAzZWI3M2RjLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h1 id="Scale-度量"><a href="#Scale-度量" class="headerlink" title="Scale 度量"></a>Scale 度量</h1><h2 id="度量的定义"><a href="#度量的定义" class="headerlink" title="度量的定义"></a>度量的定义</h2><p>度量 Scale，是数据空间到图形空间的转换桥梁，负责原始数据到 [0, 1] 区间数值的相互转换工作，从原始数据到 [0, 1] 区间的转换我们称之为归一化操作。</p>
<p>不同的数据类型对应不同的度量，如</p>
<ol>
<li><p>连续数据类型，如 <code>0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10</code> 一组数据，在其原始数值范围 [0, 10] 内通过度量转换至 [0, 1] 范围的数据，变成 <code>0, 0.1, 0.2, ..., 0.9, 1</code>，同时通过 invert 反转，还需要度量后的数值恢复至原始值；</p>
</li>
<li><p>分类数据类型，如 <code>[&#39;男&#39;, &#39;女&#39;]</code> 这一组数据，通过度量转换后变成 [0, 1]，同样时通过 invert 反转可恢复至原始值。</p>
</li>
</ol>
<h2 id="度量的功能"><a href="#度量的功能" class="headerlink" title="度量的功能"></a>度量的功能</h2><p>在 G2 中度量用于完成以下功能：</p>
<ol>
<li><p>将数据转换到 [0, 1] 范围内，方便将数据映射到位置、颜色、大小等图形属性；</p>
</li>
<li><p>将归一化后的数据反转回原始值。例如 <code>分类a</code> 转换成 0.2，那么对应 <code>0.2</code> 需要反转回 <code>分类a</code>；</p>
</li>
<li><p>划分数据，用于在坐标轴、图例显示数值的范围、分类等信息。</p>
</li>
</ol>
<p>Scale 的功能非常简单易理解，但是在 G2 的数据处理流程中起着非常重要的承接作用，通过阅读 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-data-flow">G2 数据处理流程</a>章节，可以更好得理解度量 Scale。</p>
<h2 id="度量的类型"><a href="#度量的类型" class="headerlink" title="度量的类型"></a>度量的类型</h2><p>度量的类型是由原始数据的值类型所决定的，所以在介绍度量的类型之前，需要了解下 G2 对数据的分类方式。</p>
<p>在 G2 中我们按照数值是否连续对数据进行分类：</p>
<ol>
<li><p>分类（非连续）数据，又分为有序分类和无序分类；</p>
</li>
<li><p>连续数据，时间也是一种连续数据类型。</p>
</li>
</ol>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; month: &#x27;一月&#x27;, temperature: 7, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: &#x27;二月&#x27;, temperature: 6.9, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: &#x27;三月&#x27;, temperature: 9.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: &#x27;四月&#x27;, temperature: 14.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: &#x27;五月&#x27;, temperature: 18.2, city: &#x27;berlin&#x27; &#125;<br>]<br><br>// 指定度量(或称 列定义）<br>chart.scale(&#123;<br>  month: &#123;<br>    alias: &#x27;月份&#x27; // 为属性定义别名<br>  &#125;,<br>  temperature: &#123;<br>    alias: &#x27;温度&#x27; // 为属性定义别名<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>在上述数据中，<code>month</code> 代表月份，<code>temperature</code> 代表温度，<code>city</code> 代表城市，其中 <code>month</code> 和 <code>city</code> 都是分类类型数据，但是不同的是 <code>month</code> 作为月份是有序的分类类型，而 <code>city</code> 是无序的分类类型，而 <code>temperature</code> 是连续的数值类型。</p>
<p>根据上述的数据分类方式，G2 提供了不同的度量类型：</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>度量类型</th>
</tr>
</thead>
<tbody><tr>
<td>连续</td>
<td>linear、log、pow、time</td>
</tr>
<tr>
<td>分类（非连续）</td>
<td>cat、timeCat</td>
</tr>
</tbody></table>
<p>另外 G2 还提供了 <code>identity</code> 类型的度量用于数据源中 <strong>常量</strong> 数据的操作。</p>
<p>对于 G2 生成的所有度量对象，均拥有以下属性，这些属性均可以由用户进行配置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">&#123;<br>  type: &#123;string&#125;, // 度量的类型<br>  range: &#123;array&#125;, // 数值范围区间，即度量转换的范围，默认为 [0, 1]<br>  alias: &#123;string&#125;, // 为数据属性定义别名，用于图例、坐标轴、tooltip 的个性化显示<br>  ticks: &#123;array&#125;, // 存储坐标轴上的刻度点文本信息<br>  tickCount: &#123;number&#125;, // 坐标轴上刻度点的个数，不同的度量类型对应不同的默认值<br>  formatter: &#123;function&#125;, // 回调函数，用于格式化坐标轴刻度点的文本显示，会影响数据在坐标轴、图例、tooltip 上的显示<br>&#125;<br></code></pre></td></tr></table></figure>

<p>默认生成度量的机制如下：</p>
<ul>
<li><p>查看用户是否制定了对应字段的数据类型，查看<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-data-fields">列定义</a></p>
</li>
<li><p>如果没有，判断字段的第一条数据的字段类型</p>
</li>
<li><ul>
<li>如果数据中不存在对应的字段，则为 ‘identity’</li>
</ul>
</li>
<li><ul>
<li>如果是数字则为 ‘linear’；</li>
</ul>
</li>
<li><ul>
<li>如果是字符串，判定是否是时间格式，如果是时间格式则为时间类型 ‘time’,</li>
</ul>
</li>
<li><ul>
<li>否则是分类类型 ‘cat’</li>
</ul>
</li>
</ul>
<p>下面就让我们来详细了解下各个度量的类型：</p>
<h3 id="linear"><a href="#linear" class="headerlink" title="linear"></a>linear</h3><p>连续的数据值，如这一组数据：[1, 2, 3, 4, 5]，除了通用的属性外，还包含以下自有属性：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">&#123;<br>  nice: &#123;boolean&#125;, // 默认为 true，用于优化数值范围，使绘制的坐标轴刻度线均匀分布。例如原始数据的范围为 [3, 97]，如果 nice 为 true，那么就会将数值范围调整为 [0, 100]<br>  min: &#123;number&#125;, // 定义数值范围的最小值<br>  max: &#123;number&#125;, // 定义数值范围的最大值<br>  minLimit: &#123;number&#125;, // 对数据的最小值的限制，无论数据中是否存在比这个值小的数据，生成的坐标点不会小于这个值<br>  maxLimit: &#123;number&#125;, // 对数据的最大值的限制，无论数据中是否存在比这个值大的数据，生成的坐标点不会大于这个值<br>  tickCount: &#123;number&#125;, // 定义坐标轴刻度线的条数，默认为 5<br>  tickInterval: &#123;number&#125;, // 用于指定坐标轴各个刻度点的间距，为原始数据值的差值，tickCount 和 tickInterval 不可以同时声明<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>说明</code>：</p>
<ul>
<li><p>min,max,minLimt 和 maxLimit 都会影响坐标轴上坐标点的生成</p>
</li>
<li><p>min 和 minLimt 的差别主要体现在 如果数据中的数据的范围是 10-20 对于 min: 0 来说，会生成从 0 - 20 范围的坐标点，但是对于 minLimit 来说只要保证生成的坐标点不小于 0 即可，生成的坐标点的范围可能依然在 10 - 20 之间。</p>
</li>
<li><p>max 和 maxLimit 的差别同 min 和 minLimit 类似， max 体现在坐标轴上肯定会出现 max 或者比 max 大的值，但是绝对不会出现比 maxLimit 大的值。</p>
</li>
</ul>
<p>通过下面学生成绩的示例来说明：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; name: &#x27;张三&#x27;, score: 53 &#125;,<br>  &#123; name: &#x27;王五&#x27;, score: 92 &#125;<br>];<br><br>chart.source(data);<br>chart.point().position(&#x27;name*score&#x27;).color(&#x27;name&#x27;);<br>img,[object Object],<br></code></pre></td></tr></table></figure>

<p><code>说明</code></p>
<ul>
<li>默认生成的 score 分数的度量的范围是 50 - 95 ，这是 nice: true 的效果（让人看起来更清晰）</li>
</ul>
<p>我们知道学生分数的范围是 0 - 100 ,所以 50 - 90 并不满足我们的需求，我们可以限定 min,max 的范围</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; name: &#x27;张三&#x27;, score: 53 &#125;,<br>  &#123; name: &#x27;王五&#x27;, score: 92 &#125;<br>];<br><br>chart.source(data, &#123;<br>  score: &#123;<br>    min: 0,<br>    max: 100<br>  &#125;<br>&#125;);<br><br>chart.point().position(&#x27;name*score&#x27;).color(&#x27;name&#x27;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1NDI3MTYyMDI1NTktNDY4OGYxOTEtMDg3NS00OGYxLWE4NDQtNDE0Y2VlZjUyZTFkLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p><code>说明</code></p>
<ul>
<li>此时设置 minLimt 和 maxLimit 并不会改变生成数据度量的范围</li>
</ul>
<p>minLimit 和 maxLimit 主要应用的场景是生成的度量范围超出了用户定义的范围如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.source(data, &#123;<br>  score: &#123;<br>    min: 0,<br>    max: 100,<br>    tickCount: 4<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><code>说明</code>：</p>
<ul>
<li><p>由于此时用户设置了 tickCount: 4 为了满足用户对坐标点个数的需求，有时候会扩大数据的范围</p>
</li>
<li></li>
</ul>
<p>设置了 maxLimit 后</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.source(data, &#123;<br>  score: &#123;<br>    min: 0,<br>    maxLimit: 100,<br>    tickCount: 4<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1NDI3MTYxNTM0NjMtMWM0N2Y3YTgtYTEzZC00ZjdkLWE4OGItODA3OGY4YjkxZDc0LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h3 id="log"><a href="#log" class="headerlink" title="log"></a>log</h3><p>连续非线性的 log 类型度量，该度量会将 [1, 10, 100, 1000] 先转换成 [0, 1, 2, 3] 然后再进行归一化操作。log 类型的数据可以将非常大范围的数据映射到一个均匀的范围内。</p>
<p>log 度量是 linear 的子类，支持所有通用的属性和 linear 度量的属性，特有的属性如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">&#123;<br>  base: &#123;number&#125;, // log 的基数，默认是 2<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="log-度量的使用场景"><a href="#log-度量的使用场景" class="headerlink" title="log 度量的使用场景"></a>log 度量的使用场景</h4><p>对于以下场景，建议将数据的度量类型指定为 log 类型：</p>
<ol>
<li><p>散点图中数据的分布非常广，同时数据分散在几个区间内是，例如分布在 0 - 100， 10000 - 100000，1千万 - 1亿内，这时候适合使用 log 度量；</p>
</li>
<li><p>热力图中数据分布不均匀时也会出现只有非常高的数据点附近才有颜色，此时需要使用 log 度量，对数据进行 log 处理。</p>
</li>
</ol>
<p>对比使用未使用 log 和使用了log 后的效果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">// 数据<br>const data = [<br>  &#123; site: &#x27;站点1&#x27;, pv: 10 &#125;,<br>  &#123; site: &#x27;站点2&#x27;, pv: 99 &#125;,<br>  &#123; site: &#x27;站点3&#x27;, pv: 10000 &#125;<br>];<br><br>chart.source(data, &#123;<br>  pv: &#123;<br>    type: &#x27;log&#x27;,<br>    base: 10<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL3JvTWNzdG1yWWVtYkZXVUhZZWxSLnBuZw?x-oss-process=image/format,png" alt="img"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL1NFVFFlWGRkbHhzcUZOTlBoaUNSLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h3 id="pow"><a href="#pow" class="headerlink" title="pow"></a>pow</h3><p>连续非线性的 pow 类型度量，该度量将 [2, 4, 8, 16, 32] 先转换成 [1, 2, 3, 4, 5] 然后再进行归一化操作。</p>
<p>pow 类型的度量也是 linear 类型的一个子类，除了支持所有通用的属性和 linear 度量的属性外也有自己的属性：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">&#123;<br>  exponent: &#123;number&#125;, // 指数，默认是 2<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="time"><a href="#time" class="headerlink" title="time"></a>time</h3><p>连续的时间类型，是一种特殊的连续性数据。time 类型的度量也是 linear 的子类，除了支持所有通用的属性和 linear 度量的属性外，还有自己特殊的属性：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">&#123;<br>  mask: &#123;string&#125;, // 指定时间的显示格式，默认：&#x27;YYYY-MM-DD&#x27;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>说明：mask 的占位符标准同 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://momentjs.com/docs/#/displaying/format/">moment</a>、<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/taylorhakes/fecha">fecha</a>;</p>
</blockquote>
<p>目前 G2 会自动识别如下形式的时间格式，当用户需要生成 time 类型的度量时，建议将原始时间数据转换为如下形式：</p>
<ol>
<li><p>时间戳，如 1436237115500；</p>
</li>
<li><p>时间字符串： ‘2015-03-01’，’2015-03-01 12:01:40’，’2015&#x2F;01&#x2F;05’，’2015-03-01T16:00:00.000Z’。</p>
</li>
</ol>
<h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><p>分类类型数据的度量。除了拥有通用的度量属性外，用户还可以设置 <code>values</code> 属性：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">&#123;<br>  values: &#123;array&#125;, // 指定当前字段的分类值<br>&#125;<br></code></pre></td></tr></table></figure>

<p>G2 在生成 cat 类型的度量时，<code>values</code> 属性的值一般都会从原始数据源中直接获取，但对于下面两种场景，需要用户手动指定 values 值：</p>
<ul>
<li>需要指定分类的顺序时，例如：type 字段原始值为 [‘最大’, ‘最小’, ‘适中’]，我们想指定这些分类在坐标轴或者图例上的顺序为 [‘最小’,’适中’,’最大’]。这时候 cat 度量的配置如下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data  = [<br>  &#123; a: &#x27;a1&#x27;, b:&#x27;b1&#x27;, type: &#x27;最小&#x27; &#125;,<br>  &#123; a: &#x27;a2&#x27;, b:&#x27;b2&#x27;, type: &#x27;最大&#x27; &#125;,<br>  &#123; a: &#x27;a3&#x27;, b:&#x27;b3&#x27;, type: &#x27;适中&#x27; &#125;<br>];<br>chart.scale(&#x27;type&#x27;, &#123;<br>  type: &#x27;cat&#x27;,<br>  values: [ &#x27;最小&#x27;, &#x27;适中&#x27;, &#x27;最大&#x27; ]<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>如果不声明度量的values字段，那么默认的顺序是：‘最小’，‘最大’，‘适中’。</p>
<ul>
<li>如果数据中的分类类型使用枚举的方式表示，那么也需要指定 values。</li>
</ul>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data  = [<br>  &#123; a: &#x27;a1&#x27;, b:&#x27;b1&#x27;, type: 0 &#125;,<br>  &#123; a: &#x27;a2&#x27;, b:&#x27;b2&#x27;, type: 2 &#125;,<br>  &#123; a: &#x27;a3&#x27;, b:&#x27;b3&#x27;, type: 1 &#125;<br>]<br>chart.scale(&#x27;type&#x27;, &#123;<br>  type: &#x27;cat&#x27;,<br>  values: [ &#x27;最小&#x27;, &#x27;适中&#x27;, &#x27;最大&#x27; ]<br>&#125;);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>此处必须指定 ‘cat’ 类型，values 的值必须按照索引跟枚举类型一一对应。</p>
</blockquote>
<h3 id="timeCat"><a href="#timeCat" class="headerlink" title="timeCat"></a>timeCat</h3><p>timeCat 度量对应时间数据，但是不是连续的时间类型，而是有序的分类数据。例如股票交易的日期，此时如果使用 time 类型，那么由于节假日没有数据，折线图、k 线图就会发生断裂，所以此时需要使用 timeCat 类型度量将日期转换为有序的分类数据，该度量默认会对数据做排序。</p>
<p>timeCat 是 cat 度量的子类，除了支持所有通用的属性和 cat 度量的属性外也有自己的属性:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">&#123;<br>  mask: &#123;string&#125;, // 指定时间的显示格式，默认：&#x27;YYYY-MM-DD&#x27;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>timeCat 和 time 类型度量的差别和应用场景</p>
<ul>
<li><p>timeCat 是分类类型的度量，所以适合于显示 <code>柱状图</code> 或者固定时间内没有数据的场景（股票图）</p>
</li>
<li><p>time 是连续类型的度量，更适合显示折线图、面积图，表现数据的趋势</p>
</li>
</ul>
<h1 id="什么是列定义"><a href="#什么是列定义" class="headerlink" title="什么是列定义"></a>什么是列定义</h1><p>所谓的列定义，即是对<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-scale">度量 scale</a> 的操作。</p>
<p>G2 默认提供了一套生成度量的机制，但是这套机制并不能满足全部的需求，因此我们为用户提供了手动指定度量类型的方法，以满足多样的可视化需求，这种使用方式我们称之为 <strong>列定义</strong>。</p>
<blockquote>
<p>说明：列定义上的操作可以理解为直接修改数据源中的数据属性，因此它会影响坐标轴、tooltip 提示信息、图例、辅助元素 guide 以及几何标记的标签文本 label 的数据内容显示。</p>
</blockquote>
<h2 id="如何操作"><a href="#如何操作" class="headerlink" title="如何操作"></a>如何操作</h2><p>G2 提供了两种列定义操作方式：</p>
<ol>
<li><p><code>chart.source(data, defs);</code> 数据源载入时定义。</p>
</li>
<li><p><code>chart.scale(&#39;field&#39;, defs);</code> 该方法会覆盖 <code>chart.source()</code> 中定义的对应字段的列定义。</p>
</li>
</ol>
<h3 id="chart-source-data-defs"><a href="#chart-source-data-defs" class="headerlink" title="chart.source(data, defs)"></a>chart.source(data, defs)</h3><p>这种方式可以一次性为多个数据列进行度量类型的定义。</p>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const defs = &#123;<br>  &#x27;a&#x27;: &#123;<br>    type: &#x27;time&#x27;, // 指定 time 类型<br>    mask: &#x27;YYYY-MM-DD HH:mm:ss&#x27; // 指定时间的输出格式<br>  &#125;,<br>  &#x27;b&#x27;: &#123;<br>    type: &#x27;linear&#x27;, // 指定 linear 连续类型<br>    min: 0 // 指定度量的最小值<br>  &#125;,<br>  &#x27;c&#x27;: &#123;<br>    type: &#x27;cat&#x27;, // 指定 cat 分类类型<br>    values: [ &#x27;一月&#x27;, &#x27;二月&#x27;, &#x27;三月&#x27; ] // 重新指定 c 属性每一个的值<br>  &#125;<br>&#125;;<br>chart.source(data, defs);<br></code></pre></td></tr></table></figure>

<h3 id="chart-scale"><a href="#chart-scale" class="headerlink" title="chart.scale()"></a>chart.scale()</h3><p>该方法有两种使用方式：</p>
<ul>
<li>为单独某个字段进行列定义</li>
</ul>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; type: 0, value: 1 &#125;,<br>  &#123; type: 1, value: 2 &#125;,<br>  &#123; type: 2, value: 3 &#125;<br>];<br>chart.scale(&#x27;type&#x27;, &#123;<br>  type: &#x27;cat&#x27;, // 声明 type 字段为分类类型<br>  values: [ &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27; ], // 重新显示的值<br>  alias: &#x27;类型&#x27; // 设置属性的别名<br>&#125;);<br></code></pre></td></tr></table></figure>

<ul>
<li>为多个字段进行列定义</li>
</ul>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; type: 0, value: 1 &#125;,<br>  &#123; type: 1, value: 2 &#125;,<br>  &#123; type: 2, value: 3 &#125;<br>];<br>chart.scale(&#123;<br>  type: &#123;<br>    type: &#x27;cat&#x27;, // 声明 type 字段为分类类型<br>    values: [ &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27; ], // 重新显示的值<br>    alias: &#x27;类型&#x27; // 设置属性的别名<br>  &#125;,<br>  value: &#123;<br>    nice: false<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="Demo-演示"><a href="#Demo-演示" class="headerlink" title="Demo 演示"></a>Demo 演示</h2><p>该实例为 x 轴和 y 轴的两个数据字段都进行了列定义，将 x 轴的数据指定为 time 类型并指定了时间的显示格式，而 y 轴格式化了显示形式，为其加上了单位 ‘k’，观察图表，tooltip 和 坐标轴都受了列定义的影响。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4MzY4ODg0MzYtZGJmMDI3YmUtMDg2My00NTA5LTliNDItNGZjOThhZTRlNzg2LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>完整代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; value: 10, time: &#x27;2015-03-01T16:00:00.000Z&#x27; &#125;,<br>  &#123; value: 15, time: &#x27;2015-03-01T16:10:00.000Z&#x27; &#125;,<br>  &#123; value: 26, time: &#x27;2015-03-01T16:20:00.000Z&#x27; &#125;,<br>  &#123; value: 9, time: &#x27;2015-03-01T16:30:00.000Z&#x27; &#125;,<br>  &#123; value: 12, time: &#x27;2015-03-01T16:40:00.000Z&#x27; &#125;,<br>  &#123; value: 23, time: &#x27;2015-03-01T16:50:00.000Z&#x27; &#125;,<br>  &#123; value: 18, time: &#x27;2015-03-01T17:00:00.000Z&#x27; &#125;,<br>  &#123; value: 21, time: &#x27;2015-03-01T17:10:00.000Z&#x27; &#125;,<br>  &#123; value: 22, time: &#x27;2015-03-01T17:20:00.000Z&#x27; &#125;<br>];<br>const chart = new G2.Chart(&#123;<br>  container : &#x27;c1&#x27;,<br>  forceFit: true,<br>  height : 300<br>&#125;);<br>chart.source(data, &#123;<br>  &#x27;time&#x27;: &#123;<br>    type: &#x27;time&#x27;,<br>    nice: false,<br>    mask: &#x27;HH:mm&#x27;<br>  &#125;,<br>  &#x27;value&#x27;: &#123;<br>    formatter: val => &#123;<br>      return val + &#x27; k&#x27;;<br>    &#125;<br>  &#125;<br>&#125;);<br>chart.line().position(&#x27;time*value&#x27;).size(2);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h1 id="Geom-几何标记"><a href="#Geom-几何标记" class="headerlink" title="Geom 几何标记"></a>Geom 几何标记</h1><h1 id="什么是几何标记"><a href="#什么是几何标记" class="headerlink" title="什么是几何标记"></a>什么是几何标记</h1><p>即我们所说的点、线、面这些几何图形。G2 中并没有特定的图表类型（柱状图、散点图、折线图等）的概念，用户可以单独绘制某一种类型的图表，如饼图，也可以绘制混合图表，比如折线图和柱状图的组合。</p>
<p>G2 生成的图表的类型，都是由几何标记决定的。可以通过下图直观得理解什么是几何标记：<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL2ZmWG9ETnp3blhOSG9heHRqYmZZLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="如何声明几何标记"><a href="#如何声明几何标记" class="headerlink" title="如何声明几何标记"></a>如何声明几何标记</h2><p>创建好 chart 对象之后，就可以通过如下方式选择几何标记的类型：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const geom = chart.point().xx().xx(); // 这里使用了 point 类型的 geom，该方法会返回 geom 对象<br></code></pre></td></tr></table></figure>

<h2 id="几何标记类型"><a href="#几何标记类型" class="headerlink" title="几何标记类型"></a>几何标记类型</h2><p>目前 G2 支持的几何标记的类型如下：</p>
<table>
<thead>
<tr>
<th>geom 类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>point</code></td>
<td>点，用于绘制各种点图。</td>
</tr>
<tr>
<td><code>path</code></td>
<td>路径，无序的点连接而成的一条线，常用于路径图的绘制。</td>
</tr>
<tr>
<td><code>line</code></td>
<td>线，点按照 x 轴连接成一条线，构成线图。</td>
</tr>
<tr>
<td><code>area</code></td>
<td>填充线图跟坐标系之间构成区域图，也可以指定上下范围。</td>
</tr>
<tr>
<td><code>interval</code></td>
<td>使用矩形或者弧形，用面积来表示大小关系的图形，一般构成柱状图、饼图等图表。</td>
</tr>
<tr>
<td><code>polygon</code></td>
<td>多边形，可以用于构建色块图、地图等图表类型。</td>
</tr>
<tr>
<td><code>edge</code></td>
<td>两个点之间的链接，用于构建树图和关系图中的边、流程图中的连接线。</td>
</tr>
<tr>
<td><code>schema</code></td>
<td>自定义图形，用于构建箱型图（或者称箱须图）、蜡烛图（或者称 K 线图、股票图）等图表。</td>
</tr>
<tr>
<td><code>heatmap</code></td>
<td>用于<strong>热力图</strong>的绘制。</td>
</tr>
</tbody></table>
<h2 id="几何标记和图表类型"><a href="#几何标记和图表类型" class="headerlink" title="几何标记和图表类型"></a>几何标记和图表类型</h2><p>虽然 G2 没有特定的图表类型概念，<strong>但是仍基本支持所有传统图表类型的绘制</strong>。</p>
<p>下表展示了 G2 中的 geom 几何标记类型和传统图表的对应关系，更多的图表详见 G2 官网的 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://antv.alipay.com/zh-cn/g2/3.x/demo/index.html">demo</a>。</p>
<table>
<thead>
<tr>
<th>geom 类型</th>
<th>图表类型</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>point</td>
<td>点图、折线图中的点</td>
<td>点的形状有很多，也可以使用图片代表点（气泡图），同时点也可以在不同坐标系下显示，所以可以扩展出非常多的图表类型。</td>
</tr>
<tr>
<td>path</td>
<td>路径图，地图上的路径</td>
<td>路径图是无序的线图。</td>
</tr>
<tr>
<td>line</td>
<td>折线图、曲线图、阶梯线图</td>
<td>在极坐标系下可以转换成雷达图。</td>
</tr>
<tr>
<td>area</td>
<td>区域图（面积图）、层叠区域图、区间区域图</td>
<td>极坐标系下可用于绘制雷达区域图。</td>
</tr>
<tr>
<td>interval</td>
<td>柱状图、直方图、南丁格尔玫瑰图、饼图、条形环图（玉缺图）、漏斗图等</td>
<td>通过坐标系的转置、变化，可以生成各种常见的图表类型；所有的图表都可以进行层叠、分组。</td>
</tr>
<tr>
<td>polygon</td>
<td>色块图（像素图）、热力图、地图</td>
<td>多个点可以构成多边形。</td>
</tr>
<tr>
<td>schema</td>
<td>k 线图，箱型图</td>
<td>自定义的图表类型。</td>
</tr>
<tr>
<td>edge</td>
<td>树图、流程图、关系图</td>
<td>与点一起构建关系图。</td>
</tr>
<tr>
<td>heatmap</td>
<td>热力图</td>
<td>–</td>
</tr>
</tbody></table>
<h2 id="geom-对象方法"><a href="#geom-对象方法" class="headerlink" title="geom 对象方法"></a>geom 对象方法</h2><p>几何标记 geom 对象方法主要有两种：</p>
<ul>
<li><p>图形属性（attr）方法：用户设置数据到视觉通道的映射，详细信息查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-attr">图形属性</a></p>
</li>
<li><ul>
<li>position</li>
</ul>
</li>
<li><ul>
<li>color</li>
</ul>
</li>
<li><ul>
<li>size</li>
</ul>
</li>
<li><ul>
<li>shape</li>
</ul>
</li>
<li><ul>
<li>opacity</li>
</ul>
</li>
<li><p>属性方法之外的方法</p>
</li>
<li><ul>
<li>label(dims, [callback], cfg)几何标记上显示文本</li>
</ul>
</li>
<li><ul>
<li>tooltip(dims) 映射到 tooltip 的字段</li>
</ul>
</li>
<li><ul>
<li>style(cfg) 配置图形的样式</li>
</ul>
</li>
<li><ul>
<li>select(cfg) 图形选中操作</li>
</ul>
</li>
<li><ul>
<li>active(boolean) 图形激活交互开关</li>
</ul>
</li>
<li><ul>
<li>animate(cfg) 图形的动画</li>
</ul>
</li>
</ul>
<blockquote>
<p>具体 API 详见<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-geom">文档</a></p>
</blockquote>
<h2 id="几何标记和图形形状"><a href="#几何标记和图形形状" class="headerlink" title="几何标记和图形形状"></a>几何标记和图形形状</h2><p>使用几何标记实现各种图表类型时，对于每一种几何标记来说，在绘制的时候有不同的形状（shape)，视觉通道跟图形属性的映射方式不一样也会生成不同的图形：</p>
<ul>
<li><p>点图，可以使用圆点、三角形、正方形、十字符号等表示点</p>
</li>
<li><p>线图，可以有折线、曲线、点线等</p>
</li>
<li><p>多边形，可以是实心的多边形，也可以是空心的仅有边框的多边形</p>
</li>
</ul>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vcm1zcG9ydGFsL1d2Zm5RZUtVbkhHVlNSZy5wbmc?x-oss-process=image/format,png" alt="img"></p>
<p>下面提供了 G2 中各个 geom 内置提供的 shape 类型，在后续图形属性章节，会详细介绍 shape 的使用方法。</p>
<table>
<thead>
<tr>
<th>geom 类型</th>
<th>shape 类型</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>point</td>
<td>‘circle’,’square’,’bowtie’,’diamond’, ‘hexagon’,’triangle’,’triangle-down’,’hollowCircle’, ‘hollowSquare’,’hollowBowtie’, ‘hollowDiamond’,’hollowHexagon’, ‘hollowTriangle’,’hollowTriangle-down’,’cross’,’tick’, ‘plus’,’hyphen’,’line’</td>
<td>hollow开头的图形都是空心的</td>
</tr>
<tr>
<td>line</td>
<td>‘line’,’smooth’,’dot’,’dash’, ‘dotSmooth’,’spline’</td>
<td>dot ：点线，smooth： 平滑线</td>
</tr>
<tr>
<td>area</td>
<td>‘area’,’smooth’,’line’,’dotLine’, ‘smoothLine’,’dotSmoothLine’</td>
<td>[area]和[smooth]是填充内容的区域图，其他图表是空心的线图</td>
</tr>
<tr>
<td>interval</td>
<td>‘rect’,’hollowRect’,’line’, ‘tick’,’stroke’,’funnel’, ‘pyramid’</td>
<td>[hollowRect]是空心的矩形， [line]和 [tick] 都是线段,stroke：带边框的矩形, ‘funnel’ 漏斗图；’pyramid’ 金字塔图</td>
</tr>
<tr>
<td>polygon</td>
<td>‘polygon’,’hollow’,’stroke’</td>
<td>polygon：多边形、hollow：空心多边形和 stroke：带边框的多边形</td>
</tr>
<tr>
<td>schema</td>
<td>‘box’,’candle’</td>
<td>目前仅支持箱须图、K线图</td>
</tr>
<tr>
<td>edge</td>
<td>‘line’,’vhv’,’smooth’,’arc’</td>
<td>vhv：直角折线，arc：弧线，分为笛卡尔坐标系、极坐标系、带权重和不带权重四种情况。</td>
</tr>
</tbody></table>
<p>以折线图为例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.line().position(&#x27;x*y&#x27;).shape(&#x27;type&#x27;, [&#x27;line&#x27;, &#x27;dot&#x27;]);<br><br>chart.line().position(&#x27;x*y&#x27;).shape(&#x27;type&#x27;, function(type) &#123;<br>    if(type === &#x27;a&#x27;) &#123;<br>        return &#x27;line&#x27;;<br>    &#125; else &#123;<br>        return &#x27;dot&#x27;;<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>如果上面各种几何标记的图形形状没法满足你需求的话，可以进行 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-customize-shape">自定义shape</a></p>
<h1 id="Attr-图形属性"><a href="#Attr-图形属性" class="headerlink" title="Attr 图形属性"></a>Attr 图形属性</h1><h2 id="图形属性"><a href="#图形属性" class="headerlink" title="图形属性"></a>图形属性</h2><p>图形属性对应视觉编码中的视觉通道，是 G2 语法元素非常重要和灵活的一部分，不同的几何标记拥有自己的图形属性。G2 中支持的图形属性有下面几种：</p>
<ol>
<li><p>position：位置，二维坐标系内映射至 x 轴、y 轴；</p>
</li>
<li><p>color：颜色，包含了色调、饱和度和亮度；</p>
</li>
<li><p>size：大小，不同的几何标记对大小的定义有差异；</p>
</li>
<li><p>shape：形状，几何标记的形状决定了某个具体图表类型的表现形式，例如点图，可以使用圆点、三角形、图片表示；线图可以有折线、曲线、点线等表现形式；</p>
</li>
<li><p>opacity：透明度，图形的透明度，这个属性从某种意义上来说可以使用颜色代替，需要使用 ‘rgba’ 的形式，所以在 G2 中我们独立出来。</p>
</li>
</ol>
<h2 id="图形属性声明语法"><a href="#图形属性声明语法" class="headerlink" title="图形属性声明语法"></a>图形属性声明语法</h2><p>在 G2 中，我们这样定义图形属性的映射语法。</p>
<p>首先需要明确一点：<strong>图形属性是属于每一个几何标记 geom（Geometry) 的</strong>，所以我们先要声明几何标记，然后再在该几何标记对象上进行图形属性的映射，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.<geomType>().<attrType>(fields[, callback]);<br></code></pre></td></tr></table></figure>

<p>其中：</p>
<ul>
<li><p>geomType，几何标记类型，具体支持的类型请阅读<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-geom">几何标记</a>章节；</p>
</li>
<li><p>attrType，图形属性类型，对应视觉通道；</p>
</li>
<li><p>fields，参与单个视觉通道映射的字段，可以是单个字段也可以是多个字段，多个字段使用 <code>*</code>分割</p>
</li>
<li><p>callback，回调函数，用于定义如何解析视觉通道，如不提供则只用 G2 默认提供的视觉通道解析方式。</p>
</li>
</ul>
<p>除了 <code>attr(fields[, callback])</code> 的函数原型外，G2 为了用户使用的便利性，结合各个视觉通道的特点，还提供了更为便捷的使用方式，在本章后面会进行详细的介绍。</p>
<p>语法示例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.point().position(&#x27;a*b&#x27;).color(&#x27;c&#x27;);<br>chart.interval().position(&#x27;a*b&#x27;).color(&#x27;c&#x27;, (cValue) => &#123;<br>  if (cvalue === &#x27;fail&#x27;) &#123;<br>    return &#x27;red&#x27;;<br>  &#125;<br>  return &#x27;green&#x27;;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>G2 对于每个图形属性的参数 fields 的解析规则如下：</p>
<ul>
<li><p>如果是单个单词，如 <code>color(&#39;a&#39;)</code> 会判断该属性是否是输入数据源的字段属性，如果不是则会将其解析为一个常量；</p>
</li>
<li><p>如果是多个属性的映射，需要使用 <code>*</code> 进行连接，G2 会依次对这些字段进行解析和映射，如 <code>position(&#39;cut*price&#39;)</code>；</p>
</li>
</ul>
<h2 id="position-位置属性"><a href="#position-位置属性" class="headerlink" title="position 位置属性"></a>position 位置属性</h2><p>position 位置属性的映射，用于确定由数据中的哪几个字段来确定数据在平面坐标系的位置。通俗地解释，即确定 x 轴和 y 轴的数据字段。它是唯一一个可以用于编码分类又可用于编码定序或者定量的数据属性。</p>
<p>以下面的语句为例，在 position 属性上，映射了两个属性： cut 和 price，分别表示将 cut 数据值映射至 x 轴坐标点，price 数据值映射至 y 轴坐标点。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.point().position(&#x27;cut*price&#x27;);<br></code></pre></td></tr></table></figure>

<p>下面是对 ‘*’ 连接符的解释：</p>
<p>以 <code>chart.point().position(&#39;x*y&#39;)</code> 为例，point 代表图形，即最后需要生成点图，而 position 代表位置，<code>position(&#39;x*y&#39;)</code> 代表数据在图形中的位置由 x 和 y 这两个维度的变量决定，x * y 的数据处理结果可以理解为：<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL0VjdURleWVUT3N6dFZPdXhtWlBlLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>(x1, y1) 这样的数值对，最后就会被转换为画布上对应的坐标点。</p>
<h2 id="color"><a href="#color" class="headerlink" title="color"></a>color</h2><p>从可视化编码的角度对颜色进行分析，可以将颜色分为亮度、饱和度和色调三个视觉通道，其中前两个可以认为是用于编码定量和定序数据的视觉通道，而色调属于编码定性数据的视觉通道。而在 G2 中并不如此详细区分，统一使用 color 方法进行映射配置。</p>
<p>color 支持的映射语法如下：</p>
<ul>
<li><p><code>color(&#39;field&#39;)</code>，field 为数据属性，这时候 G2 会在内部调用默认的回调函数，读取默认提供的颜色进行数据值到颜色值的映射；</p>
</li>
<li><p><code>color(&#39;field&#39;, colors)</code>，将数据值映射至指定的颜色值 colors（可以是字符串也可以是数组），此时用于通常映射分类数据；</p>
</li>
<li><p><code>color(&#39;field&#39;, &#39;color1-color2-colorN&#39;)</code>，指定颜色的渐变路径，用于映射连续的数据；</p>
</li>
<li><p><code>color(&#39;field&#39;, callback)</code>，使用回调函数进行颜色值的自定义；可以使用多个字段使用*号连接</p>
</li>
<li><p><code>color(&#39;#ffffff&#39;)</code>， 直接指定颜色常量，不进行数据映射。</p>
</li>
</ul>
<h3 id="分类数据的颜色映射"><a href="#分类数据的颜色映射" class="headerlink" title="分类数据的颜色映射"></a>分类数据的颜色映射</h3><p>将 <code>city</code> 属性的数据值映射至制定的颜色来区分不同的城市。</p>
<p><code>.color(&#39;city&#39;, [ &#39;#1f77b4&#39;, &#39;#ff7f0e&#39;, &#39;#2ca02c&#39; ])</code></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4Mzg5MTQ3MzAtM2E1ZTYwOWUtOTRhNy00Mzk5LTkyM2ItZDM1ODYwMTZiOWEyLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>完整的代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">$.getJSON(&#x27;/assets/data/avg-temp.json&#x27;, function(data) &#123;<br>  const ds = new DataSet();<br>  const dv = ds.createView().source(data);<br>  dv.transform(&#123;<br>    type: &#x27;fold&#x27;,<br>    fields: [ &#x27;New York&#x27;, &#x27;San Francisco&#x27;, &#x27;Austin&#x27; ],<br>    key: &#x27;city&#x27;,<br>    value: &#x27;value&#x27; <br>  &#125;);<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c1&#x27;,<br>    forceFit: true,<br>    height : 400,<br>    padding: [ 20, 120, 80, 80 ]<br>  &#125;);<br>  chart.source(dv, &#123;<br>    date: &#123;<br>      type: &#x27;time&#x27;,<br>      mask: &#x27;YYYY.MM&#x27;,<br>      tickCount: 12<br>    &#125;,<br>    value: &#123;<br>      alias: &#x27;Temperature, ºF&#x27;<br>    &#125;<br>  &#125;);<br>  chart.axis(&#x27;date&#x27;, &#123;<br>    line: null,<br>    tickLine: &#123;<br>      stroke: &#x27;#000&#x27;,<br>      length: 6 // 刻度线长度<br>    &#125;<br>  &#125;);<br>  chart.axis(&#x27;value&#x27;, &#123;<br>    tickLine: &#123;<br>      stroke: &#x27;#000&#x27;,<br>      length: 6 // 刻度线长度<br>    &#125;,<br>    label: &#123;<br>      textStyle: &#123;<br>        fill: &#x27;#000&#x27;<br>      &#125;<br>    &#125;,<br>    line: &#123;<br>      stroke: &#x27;#000&#x27;<br>    &#125;,<br>    grid: null<br>  &#125;);<br>  chart.line()<br>    .position(&#x27;date*value&#x27;)<br>    .color(&#x27;city&#x27;, [ &#x27;#1f77b4&#x27;, &#x27;#ff7f0e&#x27;, &#x27;#2ca02c&#x27; ])<br>    .shape(&#x27;spline&#x27;)<br>    .size(2);<br>  chart.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="连续数据的颜色映射"><a href="#连续数据的颜色映射" class="headerlink" title="连续数据的颜色映射"></a>连续数据的颜色映射</h3><p>对于连续的数据，我们可以为 color 指定颜色渐变的路径，以可视化数据在某一范围的变化趋势。</p>
<p><code>.color(&#39;Population&#39;, &#39;#e5f5e0-#31a354&#39;)</code></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4Mzg5NDY3OTItMGI0NmIwNDctMTI4ZS00YzA3LWFlYjItMTNmMWNlYTBiMDA4LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>完整代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">$.getJSON(&#x27;/assets/data/usa.geo.json&#x27;, function(mapData) &#123;<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c2&#x27;,<br>    width: 800,<br>    height: 400,<br>    padding: [ 40, 140 ]<br>  &#125;);<br>  chart.legend(false);<br>  chart.axis(false);<br>  chart.tooltip(&#123;<br>    showTitle: false<br>  &#125;);<br>  // 同步度量<br>  chart.scale(&#123;<br>    longitude: &#123;<br>      sync: true<br>    &#125;,<br>    latitude: &#123;<br>      sync: true<br>    &#125;<br>  &#125;);<br>  // 绘制地图背景<br>  const ds = new DataSet();<br>  const bgDataView = ds.createView(&#x27;back&#x27;)<br>    .source(mapData, &#123;<br>      type: &#x27;GeoJSON&#x27;<br>    &#125;);<br>  const bgView = chart.view();<br>  bgView.source(bgDataView);<br>  bgView.polygon().position(&#x27;longitude*latitude&#x27;)<br>    .color(&#x27;#e6e6e6&#x27;)<br>    .active(false)<br>    .tooltip(false)<br>    .style(&#123;<br>      stroke: &#x27;#999&#x27;,<br>      lineWidth: 1<br>    &#125;);<br><br>  $.getJSON(&#x27;/assets/data/2014-usa-population.json&#x27;, function(data) &#123;<br>    // 绘制 choropleth map<br>    const view = chart.view();<br>    const userPolygonDv = ds.createView()<br>      .source(data)<br>      .transform(&#123;<br>        geoDataView: bgDataView,<br>        field: &#x27;State&#x27;,<br>        type: &#x27;geo.region&#x27;,<br>        as: [ &#x27;longitude&#x27;, &#x27;latitude&#x27; ]<br>      &#125;);<br>    view.source(userPolygonDv);<br>    view.polygon()<br>      .position(&#x27;longitude*latitude&#x27;)<br>      .color(&#x27;Population&#x27;,&#x27;#e5f5e0-#31a354&#x27;)<br>      .tooltip(&#x27;State*Population&#x27;);<br><br>    // 绘制文字<br>    const textView = chart.view();<br>    const centerDv = ds.createView()<br>      .source(data)<br>      .transform(&#123;<br>        geoDataView: bgDataView,<br>        field: &#x27;State&#x27;,<br>        type: &#x27;geo.centroid&#x27;,<br>        as: [ &#x27;longitude&#x27;, &#x27;latitude&#x27; ]<br>      &#125;);<br>    textView.source(centerDv);<br>    textView.point()<br>      .position(&#x27;longitude*latitude&#x27;)<br>      .size(0)<br>      .label(&#x27;code&#x27;, &#123;<br>        offset: 0,<br>        textStyle: &#123;<br>          fontSize: 10<br>        &#125;<br>      &#125;);<br>    chart.render();<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="颜色使用回调函数"><a href="#颜色使用回调函数" class="headerlink" title="颜色使用回调函数"></a>颜色使用回调函数</h3><p>有时候颜色需要根据字段值进行特殊的指定，所以 G2 提供了回调函数来指定图形的颜色。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">// 根据单个字段计算颜色<br>chart.point().position(&#x27;x*y&#x27;).color(&#x27;z&#x27;, z => &#123;<br>  if (z >= 100) &#123;<br>    return &#x27;red&#x27;;<br>  &#125;<br>  return &#x27;blue&#x27;;<br>&#125;);<br><br>// 根据多个字段计算颜色<br>chart.point().position(&#x27;x*y&#x27;).color(&#x27;level*value&#x27;, (level, value) => &#123;<br>  if (level < 2) &#123;<br>    if (value > 10) &#123;<br>      return &#x27;green&#x27;;<br>    &#125;<br>    return &#x27;blue&#x27;;<br>  &#125; else &#123;<br>    if (value > 20) &#123;<br>      return &#x27;#cdcdcd&#x27;;<br>    &#125;<br>    return &#x27;red&#x27;;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li><p>color 属性的回调函数一般返回的单个颜色，因为 G2 中所有的 shape 仅支持单个颜色</p>
</li>
<li><p>color 属性的回调函数也可以返回数组，数组中有多个颜色，但是这时候需要 shape 支持多颜色的解析，详细情况查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-customize-shape">自定义shape</a>。</p>
</li>
</ul>
<h2 id="shape"><a href="#shape" class="headerlink" title="shape"></a>shape</h2><p>不同的几何标记有不同的 shape（图形形状）。shape 这个视觉通道受其他几个视觉通道影响，比如：interval 几何标记的 shape 可以是填充的矩形 rect 也可是空心的边框矩形，这个就决定了是将 color 映射到填充色上还是映射到边框颜色上。shape 方法的使用方式比较简单，常用于映射分类数据：</p>
<ul>
<li><p>shape(‘field’)，将指定的字段映射到内置的 shapes 数组中；</p>
</li>
<li><p>shape(‘field’, shapes)，用户自己提供 shapes 数据，来进行数据映射；</p>
</li>
<li><p>shape(‘fields’, callback)，使用回调函数获取 shape，用于个性化的 shape 定制，可以根据单个或者多个字段确定；</p>
</li>
<li><p>shape(‘circle’)，指定常量，将所有数据值映射到固定的 shape。</p>
</li>
</ul>
<p>另外 G2 提供了自定义 shape 的功能，用户可以自己绘制需要的 shape，详见<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-customize-shape">如何快速地自定义 shape</a>。</p>
<h3 id="geom-和-shape"><a href="#geom-和-shape" class="headerlink" title="geom 和 shape"></a>geom 和 shape</h3><p>使用几何标记实现各种图表类型时，对于每一种几何标记来说，图形在绘制的时候有不同的形状（shape)，在<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-geom">几何标记</a> 章节已列出了目前 G2 提供的 geom 默认支持的 shape。</p>
<h4 id="demo-演示"><a href="#demo-演示" class="headerlink" title="demo 演示"></a>demo 演示</h4><p><code>.shape(&#39;type&#39;, [ &#39;circle&#39;, &#39;triangle-down&#39;, &#39;square&#39;, &#39;diamond&#39; ])</code></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4Mzg5ODkxMzAtZmUzZTdjNGYtNDg2NC00OTRlLTkwMzQtZmRjMzNiNGM4MWIyLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>完整代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">$.getJSON(&#x27;/assets/data/series-scatter.json&#x27;, function(data) &#123;<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c3&#x27;,<br>    forceFit: true,<br>    height: 400<br>  &#125;);<br>  chart.source(data, &#123;<br>    x: &#123;<br>      tickInterval: 500<br>    &#125;<br>  &#125;);<br>  chart.point()<br>    .position(&#x27;x*y&#x27;)<br>    .color(&#x27;type&#x27;)<br>    .shape(&#x27;type&#x27;, [ &#x27;circle&#x27;, &#x27;triangle-down&#x27;, &#x27;square&#x27;, &#x27;diamond&#x27; ])<br>    .opacity(0.65)<br>    .size(7);<br>  // 添加辅助元素<br>  chart.guide().text(&#123;<br>    position: [ 250, 550 ], <br>    content: &#x27;0 - 500&#x27;, <br>    style: &#123;<br>      fontSize: 14,<br>      textAlign: &#x27;center&#x27;<br>    &#125;<br>  &#125;);<br>  chart.guide().text(&#123;<br>    position: [ 1000, 550 ], <br>    content: &#x27;500 - 1500&#x27;, <br>    style: &#123;<br>      fontSize: 14,<br>      textAlign: &#x27;center&#x27;<br>    &#125;<br>  &#125;);<br>  chart.guide().text(&#123;<br>    position: [ 1700, 550 ], <br>    content: &#x27;1500 - 2000&#x27;, <br>    style: &#123;<br>      fontSize: 14,<br>      textAlign: &#x27;center&#x27;<br>    &#125;<br>  &#125;);<br>  chart.guide().region(&#123;<br>    start: [ 0, -600 ], <br>    end: [ 500, 600 ]<br>  &#125;);<br>  chart.guide().region(&#123;<br>    start: [ 500, -600 ], <br>    end: [ 1500, 600 ], <br>    style: &#123;<br>      fillOpacity: 0.2<br>    &#125;<br>  &#125;);<br>  chart.guide().region(&#123;<br>    start: [ 1500, -600 ], <br>    end: [ 2000, 600 ], <br>    style: &#123;<br>      fillOpacity: 0.3<br>    &#125;<br>  &#125;);<br>  chart.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="使用回调函数"><a href="#使用回调函数" class="headerlink" title="使用回调函数"></a>使用回调函数</h3><p>shape 也可以通过字段值来计算，可以在 shape 方法中指定单个或者多个字段，通过回调函数返回指定的 shape。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.point()<br>  .position(&#x27;x*y&#x27;)<br>  .shape(&#x27;value&#x27;, (value) => &#123;<br>    if (value > 10) &#123;<br>      return &#x27;circle&#x27;;<br>    &#125;<br>    return &#x27;rect&#x27;;<br>  &#125;);<br><br>// 根据是否有子节点和节点是否展开确定shape<br>chart.point()<br>  .position(&#x27;x*y&#x27;)<br>  .shape(&#x27;children*collapsed&#x27;, (children, collapsed) => &#123;<br>    if (children) &#123;<br>      return collapsed ? &#x27;collapsed-node&#x27; : &#x27;expand-node&#x27;;<br>    &#125;<br>    return &#x27;leaf&#x27;;<br>  &#125;);<br></code></pre></td></tr></table></figure>

<p>shape 的回调函数中也可以返回数组，G2 根据数组的第一个值来确定 shape，其他值可以作为自定义 shape 的参数,详情查看<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-customize-shape">自定义shape</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.point().position(&#x27;name*value&#x27;)<br>  .size(&#x27;value&#x27;)<br>  .color(&#x27;name&#x27;)<br>  .shape(&#x27;url&#x27;, url => &#123;<br>    return [ &#x27;image&#x27;, url ]; // 根据具体的字段指定 shape<br>  &#125;);<br></code></pre></td></tr></table></figure>

<p>查看<a target="_blank" rel="noopener external nofollow noreferrer" href="https://antv.alipay.com/zh-cn/g2/3.x/demo/other/bubble-image.html">自定义气泡的示例</a></p>
<h2 id="size"><a href="#size" class="headerlink" title="size"></a>size</h2><p>对于不同的几何标记含义不完全一致：</p>
<ul>
<li><p>对于 point 点来说，size 对应着点的半径；</p>
</li>
<li><p>对于 line 线来说，size 对应着线的粗细；</p>
</li>
<li><p>对于 interval 柱状图来说，size 对应着柱子的宽度。</p>
</li>
</ul>
<p>所以从可视化的角度分析，大小（size)是一个复杂的视觉通道。</p>
<p>在 G2 中，支持如下几种方式的映射语法：</p>
<ul>
<li><p>size(‘field’)，指定映射到 size 的字段，使用内置的默认大小范围为 [1, 10]；</p>
</li>
<li><p>size(‘field’, [ min, max ])，指定映射到 size 字段外，还提供了 size 的最大值和最小值范围；</p>
</li>
<li><p>size(‘fields’, callback)，使用回调函数映射 size，用于个性化的 size 定制，可以使用多个字段进行映射；</p>
</li>
<li><p>size(10) 直接指定像素大小。</p>
</li>
</ul>
<p>在气泡图中，常常使用 size 图形属性映射，用于编码更多维度的数据。如下例，使用气泡图来可视化每个国家人均国内生产总值同人均寿命之间的相关关系，同时将各个国家人口数据映射至气泡的大小。</p>
<p><code>.size(&#39;Population&#39;, [ 5, 35 ])</code></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4MzkwMjY3NjEtYWFmYjA3YzktZTIxYS00OGE2LTk1NTgtYmVjODZiNjMyZTZmLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>完整代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">$.getJSON(&#x27;/assets/data/bubble-population.json&#x27;, function(data) &#123;<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c4&#x27;,<br>    forceFit: true,<br>    height: 400<br>  &#125;);<br>  chart.source(data, &#123;<br>    &#x27;LifeExpectancy&#x27;: &#123;<br>      alias: &#x27;人均寿命（年）&#x27;<br>    &#125;,<br>    &#x27;Population&#x27;: &#123;<br>      type: &#x27;pow&#x27;,<br>      alias: &#x27;人口总数&#x27;<br>    &#125;,<br>    &#x27;GDP&#x27;: &#123;<br>      alias: &#x27;人均国内生产总值($)&#x27;,<br>      tickCount: 10<br>    &#125;,<br>    &#x27;Country&#x27;: &#123;<br>      alias: &#x27;国家/地区&#x27;<br>    &#125;<br>  &#125;);<br>  chart.axis(&#x27;GDP&#x27;, &#123;<br>    label: &#123;<br>      // 格式化坐标轴的显示<br>      formatter: value => &#123;<br>        return (value / 1000).toFixed(0) + &#x27;k&#x27;;<br>      &#125;<br>    &#125;<br>  &#125;);<br>  chart.tooltip(&#123;<br>    showTitle: false // 不显示默认标题<br>  &#125;);<br>  chart.legend(&#x27;Population&#x27;, false);<br>  chart.legend(&#x27;Country&#x27;, false);<br>  chart.point().position(&#x27;GDP*LifeExpectancy&#x27;)<br>    .size(&#x27;Population&#x27;, [ 5, 35 ])<br>    .color(&#x27;continent&#x27;)<br>    .opacity(0.65)<br>    .shape(&#x27;circle&#x27;)<br>    .tooltip(&#x27;Country*Population*GDP*LifeExpectancy&#x27;);<br>  chart.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="回调函数的使用"><a href="#回调函数的使用" class="headerlink" title="回调函数的使用"></a>回调函数的使用</h3><p>size可以根据数据的字段值通过回调函数计算，可以指定多个字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.point().position(&#x27;x*y&#x27;).size(&#x27;z&#x27;, z => &#123;<br>  if (z > 10) &#123;<br>    return 20;<br>  &#125;<br>  return z * 0.5;<br>&#125;);<br><br>chart.point().position(&#x27;x*y&#x27;).size(&#x27;level*text&#x27;, (level, text) => &#123;<br>  if (level === 0) &#123;<br>    return 50;<br>  &#125;<br>  return text.length * 10; // 根据文本长度返回长度<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>size 函数可以返回一个数组，特别对应<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-customize-shape">自定义shape</a>时需要计算宽高的图形。</p>
<h2 id="opacity"><a href="#opacity" class="headerlink" title="opacity"></a>opacity</h2><p>透明度在视觉编码过程中，只能进行定量（连续）数据的映射，作为颜色的一个补充使用，所以提供以下快捷方式：</p>
<ul>
<li><p><code>opacity(&#39;field&#39;)</code>，指定透明度映射的字段，透明度默认的范围为 [0, 1]；</p>
</li>
<li><p><code>opacity(0.5)</code>，直接指定透明度常量；</p>
</li>
<li><p><code>opacity(&#39;field&#39;, callback)</code>，使用回调函数获取透明度。</p>
</li>
</ul>
<h2 id="更多图形属性的映射"><a href="#更多图形属性的映射" class="headerlink" title="更多图形属性的映射"></a>更多图形属性的映射</h2><p>除了上面指定的视觉通道外，G2 3.0 还在 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-geom#3wvmyd">geom.style()</a> 方法中允许用户使用回调函数，可以对任何图形属性进行映射，但是不会自动生成图例</p>
<h2 id="Geom-支持的图形属性"><a href="#Geom-支持的图形属性" class="headerlink" title="Geom 支持的图形属性"></a>Geom 支持的图形属性</h2><p>前面提到过，每种几何标记支持的视觉通道有所差异，数据和视觉通道的映射关系也不完全相同。<br>下表列出了各个 geom 几何标记对各个图形属性的支持情况：</p>
<table>
<thead>
<tr>
<th>几何标记</th>
<th>position</th>
<th>color</th>
<th>size</th>
<th>shape</th>
<th>opacity</th>
</tr>
</thead>
<tbody><tr>
<td>point</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>path、line</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>area</td>
<td>支持</td>
<td>支持</td>
<td><code>不支持</code></td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>interval</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>polygon</td>
<td>支持</td>
<td>支持</td>
<td><code>不支持</code></td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>edge</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>schema</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>contour</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td><code>不支持</code></td>
<td>支持</td>
</tr>
<tr>
<td>heatmap</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td><code>不支持</code></td>
<td><code>不支持</code></td>
</tr>
</tbody></table>
<h1 id="Coord-坐标系"><a href="#Coord-坐标系" class="headerlink" title="Coord 坐标系"></a>Coord 坐标系</h1><h2 id="坐标系介绍"><a href="#坐标系介绍" class="headerlink" title="坐标系介绍"></a>坐标系介绍</h2><p>坐标系是将两种位置标度结合在一起组成的 2 维定位系统，描述了数据是如何映射到图形所在的平面。</p>
<p>G2 包含了两种类型坐标系（polar、theta、helix 均属于极坐标），目前所有的坐标系均是 2 维的。</p>
<h2 id="如何设置坐标系"><a href="#如何设置坐标系" class="headerlink" title="如何设置坐标系"></a>如何设置坐标系</h2><p>G2 默认提供的坐标系类型为笛卡尔坐标系，当不满足用户需求时，可以通过调用下面的语法声明需要使用的坐标系：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.coord(&#x27;coordType&#x27;[, cfg]);<br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>coordType</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>rect</code></td>
<td>直角坐标系，目前仅支持二维，由 x, y 两个互相垂直的坐标轴构成。</td>
</tr>
<tr>
<td><code>polar</code></td>
<td>极坐标系，由角度和半径 2 个维度构成。</td>
</tr>
<tr>
<td><code>theta</code></td>
<td>一种特殊的极坐标系，半径长度固定，仅仅将数据映射到角度，常用于饼图的绘制。</td>
</tr>
<tr>
<td><code>helix</code></td>
<td>螺旋坐标系，基于阿基米德螺旋线。</td>
</tr>
</tbody></table>
<h2 id="坐标系类型及配置"><a href="#坐标系类型及配置" class="headerlink" title="坐标系类型及配置"></a>坐标系类型及配置</h2><p>坐标系可以分为笛卡尔坐标系和非笛卡尔坐标系，非笛卡尔坐标系即极坐标（helix 螺旋坐标系也是极坐标的一种），由角度和半径这两个维度来确定位置。</p>
<p>利用极坐标可生成饼图、玫瑰图和雷达图等，常被用于周期性数据，比如时间和方向数据。</p>
<p>坐标系类型的变换会改变几何标记的形状：在极坐标系中，矩形将变为圆环的一部分，而地图中两点间的最短路径也将不是直线。</p>
<p>例如下图展示的层叠柱状图，在不同坐标系下就变换成了其他的图表类型：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vc2t5bGFyay9mZDliYTY0Yi1iNTY5LTRjMWQtYWNiOS1kNGRhZDM1MDAyNTgvYXR0YWNoLzIzNzgvNDRhZjdiNDM1ZjBkM2Y4OC9pbWFnZS5wbmc?x-oss-process=image/format,png" alt="img"></p>
<p>上图左侧为层叠柱状图，中间的饼图则是层叠柱状图在极坐标下对 x y 两个坐标轴进行转置后的结果，其中 x 轴被映射为半径，y 轴被映射成了角度。而最右边的牛眼图则相反，y 轴映射为半径。</p>
<h3 id="坐标系配置"><a href="#坐标系配置" class="headerlink" title="坐标系配置"></a>坐标系配置</h3><p>极坐标均支持 <code>startAngle</code> 和 <code>endAngle</code> 这两个属性配置。</p>
<p>（1）对于 <code>polar</code> 和 <code>theta</code> 这两种坐标系类型，可以进行如下属性的配置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.coord(&#x27;polar&#x27; || &#x27;theta&#x27; || &#x27;helix&#x27;, &#123;<br>  startAngle: 弧度, // 起始弧度<br>  endAngle: 弧度, // 结束弧度<br>  innerRadius: 0 至 1 范围的数值, // 用于空心部分的半径设置<br>  radius: 0 至 1 范围的数值 // 实心圆的半径大小设置<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>效果如图所示：</p>
<p><code>chart.coord(&#39;theta&#39;, &#123; innerRadius: 0.5 &#125;);</code></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL3hReGJ6cVFUakVMT3ZyS1NGRWtoLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.coord(&#x27;polar&#x27;, &#123;<br>  radius: 0.5,<br>  startAngle: -Math.PI / 6,<br>  endAngle: 7 * Math.PI /6<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL1lieHBvQlJ1SXJOc2FNTk9DbWNHLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.coord(&#x27;helix&#x27;, &#123;<br>  startAngle: 0.5 * Math.PI,<br>  endAngle: 12.5 * Math.PI,<br>  radius: 0.8<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL0VXSENhdEh5bkRmUVRQQnl5ZlZwLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>这里需要说明的是，G2 极坐标默认的起始角度和结束角度如下图所示：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vc2t5bGFyay84NTk1MGE0Mi05NTc5LTQ0Y2ItYjY1Ni04ZGQyOGM5YTAxNGEvYXR0YWNoLzIzNzgvZDY0ODY3OTE4NGM2OTc3Yy9pbWFnZS5wbmc?x-oss-process=image/format,png" alt="img"></p>
<h2 id="坐标系变换"><a href="#坐标系变换" class="headerlink" title="坐标系变换"></a>坐标系变换</h2><p>G2 提供的坐标系支持一系列的变换操作：</p>
<ul>
<li><p>rotate: 旋转，默认按照坐标系中心旋转；</p>
</li>
<li><p>scale: 放大、缩小，默认按照坐标系中心放大、缩小；</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.coord(&#x27;rect&#x27;).scale(0.7, 1.2);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vcm1zcG9ydGFsL2JBSVNsYUV2SVVwcUlGVkJpWEtvLmdpZg" alt="img"></p>
<ul>
<li>transpose: x，y 轴交换，例如柱状图转换成水平柱状图（条形图）；</li>
</ul>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vc2t5bGFyay8zYjMxOWJmNy1mNWFlLTQxNjUtOTc1My1hMWZiZDU4Y2MyMDkvYXR0YWNoLzIzNzgvNjJiYzA4MmU4YmViMGY3OC9pbWFnZS5wbmc?x-oss-process=image/format,png" alt="img"></p>
<ul>
<li>reflect: 镜像, 沿 x 方向镜像或者沿 y 轴方向映射。</li>
</ul>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vc2t5bGFyay8zZTAyZDg2NS1mY2ZjLTRhZmQtOWZmYS02NmExMjk5YjMxYjUvYXR0YWNoLzIzNzgvNDIyNWZkNzQ4M2Y1NDE1NS9pbWFnZS5wbmc?x-oss-process=image/format,png" alt="img"></p>
<p>以下是 G2 中坐标系变换的使用语法，当需要进行多种坐标系变换时，可以直接进行链式调用，如下代码所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.coord().rotate(90).scale(1.3, 5).reflect(&#x27;x&#x27;).transpose();<br></code></pre></td></tr></table></figure>

<h2 id="相关实例"><a href="#相关实例" class="headerlink" title="相关实例"></a>相关实例</h2><ul>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://antv.alipay.com/zh-cn/g2/3.x/demo/pie/clock.html">环图</a></p>
</li>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://antv.alipay.com/zh-cn/g2/3.x/demo/gauge/basic.html">仪表盘</a></p>
</li>
</ul>
<h1 id="Axis-坐标轴"><a href="#Axis-坐标轴" class="headerlink" title="Axis 坐标轴"></a>Axis 坐标轴</h1><h1 id="坐标轴配置"><a href="#坐标轴配置" class="headerlink" title="坐标轴配置"></a>坐标轴配置</h1><p>G2 的图表坐标轴配置方法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(field, &#123;<br>  title: null // 不展示标题<br>  // ...<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>参数 field 为对应的数据维度。</p>
<h2 id="坐标轴的组成"><a href="#坐标轴的组成" class="headerlink" title="坐标轴的组成"></a>坐标轴的组成</h2><p>使用 G2 对坐标轴进行配置之前，需要了解 G2 的坐标轴的组成。</p>
<p>G2 生成的坐标轴由如下五部分组成：</p>
<ol>
<li><p>标题 title</p>
</li>
<li><p>坐标轴线 line</p>
</li>
<li><p>文本 label</p>
</li>
<li><p>刻度线 tickLine</p>
</li>
<li><p>网格 grid</p>
</li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL1h5SHJRcFdLZ0hDQ2JjdFJ6d1ZULnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>通常的图表都有 x 轴和 y 轴，默认情况下，x 轴显示在图表的底部，y 轴显示在左侧（多个 y 轴时可以是显示在左右两侧）。通过为坐标轴配置 <code>position</code> 属性可以改变坐标轴的显示位置，具体可详见 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-chart#frgaiw">api</a>。</p>
<h3 id="坐标轴标题-title"><a href="#坐标轴标题-title" class="headerlink" title="坐标轴标题 title"></a>坐标轴标题 title</h3><p>默认情况下，我们会为每条坐标轴生成标题，标题名默认为该轴对应数据字段的属性名。通过如下代码，用户可以配置标题的显示样式或者关闭标题显示。在G2 3.0 中由于大多数场景下用户不显示 title 所以我们默认关闭了 title 的显示。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;xField&#x27;, &#123;<br>  title: null // 不展示 xField 对应坐标轴的标题<br>&#125;);<br><br>chart.axis(&#x27;xField&#x27;, &#123;<br>  title: &#123;&#125; // 展示 xField 对应坐标轴的标题<br>&#125;);<br><br>chart.axis(&#x27;xField&#x27;, &#123;<br>  title: &#123;<br>    textStyle: &#123;<br>      fontSize: 12, // 文本大小<br>      textAlign: &#x27;center&#x27;, // 文本对齐方式<br>      fill: &#x27;#999&#x27;, // 文本颜色<br>      // ...<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>当需要为<strong>坐标轴设置别名</strong>时，需要在列定义中为对应数据字段设置 <code>alias</code> 属性，如下所示，更多关于列定义的内容请查看<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-data-fields">列定义</a>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.scale(&#x27;xField&#x27;, &#123;<br>  alias: &#x27;这里设置标题的别名&#x27;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>更多关于坐标轴 title 属性的配置请查看API文档相关内容 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-chart#frgaiw">axis 的 title 属性配置</a>。</p>
<h3 id="坐标轴线-line"><a href="#坐标轴线-line" class="headerlink" title="坐标轴线 line"></a>坐标轴线 line</h3><p>在 <code>line</code> 属性上进行坐标轴线的配置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;xField&#x27;, &#123;<br>  line: &#123;<br>    lineWidth: 2, // 设置线的宽度<br>    stroke: &#x27;red&#x27;, // 设置线的颜色<br>    lineDash: [ 3, 3 ] // 设置虚线样式<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>上述代码效果如下图所示：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vc2t5bGFyay8yMjM0NDAwNi0wYzNiLTQ4YTYtOTEwZi0zY2UwMzYxM2M3YzgvYXR0YWNoLzIzNzgvYjQ4YzNjYTVkMTFhMDQyMS9pbWFnZS5wbmc?x-oss-process=image/format,png" alt="img"></p>
<h3 id="坐标轴文本-label"><a href="#坐标轴文本-label" class="headerlink" title="坐标轴文本 label"></a>坐标轴文本 label</h3><ul>
<li>不展示文本</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;xField&#x27;, &#123;<br>  label: null<br>&#125;);<br></code></pre></td></tr></table></figure>

<ul>
<li>配置文本显示样式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;xField&#x27;, &#123;<br>  label: &#123;<br>    offset: &#123;number&#125;, // 设置坐标轴文本 label 距离坐标轴线的距离<br>    textStyle: &#123;<br>      textAlign: &#x27;center&#x27;, // 文本对齐方向，可取值为： start middle end<br>      fill: &#x27;#404040&#x27;, // 文本的颜色<br>      fontSize: &#x27;12&#x27;, // 文本大小<br>      fontWeight: &#x27;bold&#x27;, // 文本粗细<br>      rotate: 30, <br>      textBaseline: &#x27;top&#x27; // 文本基准线，可取 top middle bottom，默认为middle<br>    &#125; || &#123;function&#125;, // 文本样式，支持回调 <br>    autoRotate: &#123;boolean&#125; // 是否需要自动旋转，默认为 true<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<ul>
<li>格式化坐标轴文本显示</li>
</ul>
<p>为 <code>formatter</code> 属性定义回调函数，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;xField&#x27;, &#123;<br>  label: &#123;<br>    // 使用 formatter 回调函数<br>    formatter: val => &#123;<br>      return val + &#x27;元&#x27;;<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>在坐标轴上配置 formatter 仅在坐标轴上的文本有效，如果想要使得 tooltip 和图例上的信息也格式化，需要在列定义时指定格式化函数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.source(data, &#123;<br>  xField: &#123;<br>    formatter: val => &#123;<br>      return val + &#x27;元&#x27;;<br>    &#125;<br>  &#125;<br>&#125;);<br><br>// 或者<br>chart.scale(&#x27;xField&#x27;, &#123;<br>  formatter: val => &#123;<br>    return val + &#x27;元&#x27;;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4MzkzNjUyNTEtNzY0YjgwYTktODYzOC00ZTRmLWExMTctZjhkZDNiNTU0YjFlLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; x: 95, y: 95, z: 13.8, name: &#x27;BE&#x27;, country: &#x27;Belgium&#x27; &#125;,<br>  &#123; x: 86.5, y: 102.9, z: 14.7, name: &#x27;DE&#x27;, country: &#x27;Germany&#x27; &#125;,<br>  &#123; x: 80.8, y: 91.5, z: 15.8, name: &#x27;FI&#x27;, country: &#x27;Finland&#x27; &#125;,<br>  &#123; x: 80.4, y: 102.5, z: 12, name: &#x27;NL&#x27;, country: &#x27;Netherlands&#x27; &#125;,<br>  &#123; x: 80.3, y: 86.1, z: 11.8, name: &#x27;SE&#x27;, country: &#x27;Sweden&#x27; &#125;,<br>  &#123; x: 78.4, y: 70.1, z: 16.6, name: &#x27;ES&#x27;, country: &#x27;Spain&#x27; &#125;,<br>  &#123; x: 74.2, y: 68.5, z: 14.5, name: &#x27;FR&#x27;, country: &#x27;France&#x27; &#125;,<br>  &#123; x: 73.5, y: 83.1, z: 10, name: &#x27;NO&#x27;, country: &#x27;Norway&#x27; &#125;,<br>  &#123; x: 71, y: 93.2, z: 24.7, name: &#x27;UK&#x27;, country: &#x27;United Kingdom&#x27; &#125;,<br>  &#123; x: 69.2, y: 57.6, z: 10.4, name: &#x27;IT&#x27;, country: &#x27;Italy&#x27; &#125;,<br>  &#123; x: 68.6, y: 20, z: 16, name: &#x27;RU&#x27;, country: &#x27;Russia&#x27; &#125;,<br>  &#123; x: 65.5, y: 126.4, z: 35.3, name: &#x27;US&#x27;, country: &#x27;United States&#x27; &#125;,<br>  &#123; x: 65.4, y: 50.8, z: 28.5, name: &#x27;HU&#x27;, country: &#x27;Hungary&#x27; &#125;,<br>  &#123; x: 63.4, y: 51.8, z: 15.4, name: &#x27;PT&#x27;, country: &#x27;Portugal&#x27; &#125;,<br>  &#123; x: 64, y: 82.9, z: 31.3, name: &#x27;NZ&#x27;, country: &#x27;New Zealand&#x27; &#125;<br>];<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  forceFit: true,<br>  height: 350,<br>  padding: [ 20, 0, 80, 80 ],<br>  plotBackground: &#123;<br>    stroke: &#x27;#ccc&#x27;, // 边颜色<br>    lineWidth: 1 // 边框粗细<br>  &#125; // 绘图区域背景设置<br>&#125;);<br>chart.source(data, &#123;<br>  x: &#123;<br>    alias: &#x27;Daily fat intake&#x27;, // 定义别名<br>    tickInterval: 5, // 自定义刻度间距<br>    nice: false, // 不对最大最小值优化<br>    max: 96, // 自定义最大值<br>    min: 62 // 自定义最小是<br>  &#125;,<br>  y: &#123;<br>    alias: &#x27;Daily sugar intake&#x27;,<br>    tickInterval: 50,<br>    nice: false,<br>    max: 165,<br>    min: 0<br>  &#125;,<br>  z: &#123;<br>    alias: &#x27;Obesity(adults) %&#x27;<br>  &#125;<br>&#125;);<br>// 开始配置坐标轴<br>chart.axis(&#x27;x&#x27;, &#123;<br>  label: &#123;<br>    formatter: val => &#123;<br>      return val + &#x27; gr&#x27;; // 格式化坐标轴显示文本<br>    &#125;<br>  &#125;,<br>  grid: &#123;<br>    lineStyle: &#123;<br>      stroke: &#x27;#d9d9d9&#x27;,<br>      lineWidth: 1,<br>      lineDash: [ 2, 2 ]<br>    &#125;<br>  &#125;<br>&#125;);<br>chart.axis(&#x27;y&#x27;, &#123;<br>  title: &#123;<br>    offset: 70,<br>  &#125;,<br>  label: &#123;<br>    formatter: val => &#123;<br>      if (val > 0) &#123;<br>        return val + &#x27; gr&#x27;;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;);<br>chart.legend(false);<br>chart.tooltip(&#123;<br>  title: &#x27;country&#x27;<br>&#125;);<br>chart<br>  .point()<br>  .position(&#x27;x*y&#x27;)<br>  .size(&#x27;z&#x27;, [ 10, 40 ])<br>  .label(&#x27;name*country&#x27;, &#123;<br>    offset: 0, // 文本距离图形的距离<br>    textStyle: &#123;<br>      fill: &#x27;#000&#x27;,<br>      fontWeight: &#x27;bold&#x27;, // 文本粗细<br>      shadowBlur: 5, // 文本阴影模糊<br>      shadowColor: &#x27;#fff&#x27; // 阴影颜色<br>    &#125;<br>  &#125;)<br>  .color(&#x27;#3182bd&#x27;)<br>  .opacity(0.5)<br>  .shape(&#x27;circle&#x27;)<br>  .tooltip(&#x27;x*y*z&#x27;);<br>chart.guide().line(&#123;<br>  start: [ 65, &#x27;min&#x27; ],<br>  end: [ 65, &#x27;max&#x27; ],<br>  text: &#123;<br>    content: &#x27;Safe fat intake 65g/day&#x27;,<br>    position: &#x27;end&#x27;,<br>    autoRotate: false,<br>    style: &#123;<br>      textAlign: &#x27;start&#x27;<br>    &#125;<br>  &#125;,<br>&#125;);<br>chart.guide().line(&#123;<br>  start: [ &#x27;min&#x27;, 50 ],<br>  end: [ &#x27;max&#x27;, 50 ],<br>  text: &#123;<br>    content: &#x27;Safe sugar intake 50g/day&#x27;,<br>    position: &#x27;end&#x27;,<br>    style: &#123;<br>      textAlign: &#x27;end&#x27;<br>    &#125;<br>  &#125;<br>&#125;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<ul>
<li>使用 html 自定义 label</li>
</ul>
<p>在一些比较个性化的可视化需求里，通常会使用可视化隐喻，比如会使用人物照片来代替人物名字，使得可视化更直观。</p>
<p>这时可以通过为 <code>label</code> 进行如下配置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;xField&#x27;, &#123;<br>  label: &#123;<br>    htmlTemplate: value => &#123;<br>      return &#x27;<img src="&#x27; +imageMap[value] + &#x27;" width="30px"/>&#x27;;<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>完整代码</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; name: &#x27;John&#x27;, vote: 35654 &#125;,<br>  &#123; name: &#x27;Damon&#x27;, vote: 65456 &#125;,<br>  &#123; name: &#x27;Patrick&#x27;, vote: 45724 &#125;,<br>  &#123; name: &#x27;Mark&#x27;, vote: 13654 &#125;<br>];<br>const imageMap = &#123;<br>  &#x27;John&#x27;: &#x27;https://zos.alipayobjects.com/rmsportal/mYhpaYHyHhjYcQf.png&#x27;,<br>  &#x27;Damon&#x27;: &#x27;https://zos.alipayobjects.com/rmsportal/JBxkqlzhrlkGlLW.png&#x27;,<br>  &#x27;Patrick&#x27;: &#x27;https://zos.alipayobjects.com/rmsportal/zlkGnEMgOawcyeX.png&#x27;,<br>  &#x27;Mark&#x27;: &#x27;https://zos.alipayobjects.com/rmsportal/KzCdIdkwsXdtWkg.png&#x27;<br>&#125;<br><br>const chart = new G2.Chart(&#123;<br>  container : &#x27;c2&#x27;,<br>  width : 600,<br>  height : 250<br>&#125;);<br>chart.source(data, &#123;<br>  vote: &#123;<br>    min: 0<br>  &#125;<br>&#125;);<br>chart.legend(false);<br>chart.axis(&#x27;name&#x27;, &#123;<br>  label: &#123;<br>    htmlTemplate: value => &#123;<br>      return &#x27;<img src="&#x27; +imageMap[value] + &#x27;" style="width:30px;max-width:none;"/>&#x27;;<br>    &#125;<br>  &#125;,<br>  tickLine: null<br>&#125;);<br>chart.interval()<br>  .position(&#x27;name*vote&#x27;)<br>  .color(&#x27;name&#x27;, [ &#x27;#7f8da9&#x27;, &#x27;#fec514&#x27;, &#x27;#db4c3c&#x27;, &#x27;#daf0fd&#x27; ])<br>  .size(20)<br>  .label(&#x27;name&#x27;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h3 id="坐标轴刻度线-tickLine"><a href="#坐标轴刻度线-tickLine" class="headerlink" title="坐标轴刻度线 tickLine"></a>坐标轴刻度线 tickLine</h3><p>在 tickLine 上可以配置坐标轴刻度线的长短（length）、颜色（stroke）、粗细（lineWidth），或者控制它的展示（tickLine: null，不展示刻度线）。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;xField&#x27;, &#123;<br>  tickLine: &#123;<br>    lineWidth: 2,<br>    length: 10,<br>    stroke: &#x27;red&#x27;,<br>    alignWithLabel:true<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<ul>
<li>value 可以设置负值，使得tickLine的方向相反</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;genre&#x27;, &#123;<br>  tickLine: &#123;<br>    length: -10<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4Mzk0OTQwMjktMWZhNzljNDQtMDk0My00OTg1LWE4ZGEtYmE4ZmI4MGQyOTU5LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<ul>
<li>alignWithLabel 设置为负值，且数据类型为category时，tickLine的样式变为category数据专有样式。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;genre&#x27;, &#123;<br>  tickLine: &#123;<br>    alignWithLabel: false<br>  &#125;<br>&#125;);<br>img,[object Object],<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4Mzk1MTUwOTEtNDc5MGM1MGMtN2ZiNS00YjdkLWI5NDEtZDY5MDliNzdkYjM3LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h3 id="坐标轴子刻度线-subTickLine"><a href="#坐标轴子刻度线-subTickLine" class="headerlink" title="坐标轴子刻度线 subTickLine"></a>坐标轴子刻度线 subTickLine</h3><p>通过设置 <code>subTickCount</code> 属性可以为两个主刻度间设置子刻度线的个数，同时通过 <code>subTickLine</code> 设置子刻度线样式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;xField&#x27;, &#123;<br>  subTickCount: 3,<br>  subTickLine: &#123;<br>    length: 3,<br>    stroke: &#x27;#545454&#x27;,<br>    lineWidth: 1<br>  &#125;,<br>  tickLine: &#123;<br>    length: 5,<br>    lineWidth: 2,<br>    stroke: &#x27;#000&#x27;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4Mzk1MzU0ODktY2EzM2M2ZGEtOWU5Ni00YWY3LTk3NGYtZTVmMzczYTFjNDk1LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h3 id="网格-grid"><a href="#网格-grid" class="headerlink" title="网格 grid"></a>网格 grid</h3><p>默认情况下，G2 会为 y 坐标轴生成网格线，而 x 轴不展示网格线。网格线的配置属性名为 <code>grid</code>，只要为坐标轴配置 grid 属性即可展示网格线。</p>
<p>在 <code>grid</code> 属性中配置网格显示的样式，如下代码所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.axis(&#x27;xField&#x27;, &#123;<br>  grid: &#123;<br>    type: &#x27;line&#x27;,<br>    lineStyle: &#123;<br>      stroke: &#x27;#d9d9d9&#x27;,<br>      lineWidth: 1,<br>      lineDash: [ 4, 4 ]<br>    &#125;,<br>    align: &#x27;center&#x27; // 网格顶点从两个刻度中间开始<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="其他配置-1"><a href="#其他配置-1" class="headerlink" title="其他配置"></a>其他配置</h2><h3 id="设置坐标轴显示范围"><a href="#设置坐标轴显示范围" class="headerlink" title="设置坐标轴显示范围"></a>设置坐标轴显示范围</h3><p>每一种坐标轴范围的选择都会导致最后可视化结果的不同，坐标轴显示范围的设置需要在<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-data-fields">列定义</a>中配置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">// 方式 1<br>chart.source(data, &#123;<br>  xField: &#123;<br>    type: &#x27;linear&#x27;,<br>    min: 0,<br>    max: 1000<br>  &#125;<br>&#125;); <br>// 方式 2<br>chart.scale(&#x27;xField&#x27;, &#123;<br>  type: &#x27;linear&#x27;,<br>  min: 0, <br>  max: 1000<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="设置坐标轴刻度线个数"><a href="#设置坐标轴刻度线个数" class="headerlink" title="设置坐标轴刻度线个数"></a>设置坐标轴刻度线个数</h3><p>默认的坐标轴刻度线个数是 5 个，通过列定义，用户可以自定义坐标轴刻度线的个数。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.source(data, &#123;<br>  xField: &#123;<br>    type: &#x27;timeCat&#x27;, // 声明该数据的类型<br>    tickCount: 9<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="设置坐标轴刻度线间距"><a href="#设置坐标轴刻度线间距" class="headerlink" title="设置坐标轴刻度线间距"></a>设置坐标轴刻度线间距</h3><p>对于连续类型的数据，G2 还支持设置坐标轴刻度线的间距（<code>tickInterval</code> 属性），同样需要在列定义中进行配置，但是需要说明的是，<code>tickInterval</code> 为原始数据值的差值，并且 <code>tickCount</code> 和 <code>tickInterval</code> 不可以同时声明。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.source(data, &#123;<br>  xField: &#123;<br>    type: &#x27;linear&#x27;,<br>    tickInterval: 1000<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="坐标系两端保留一定的空白"><a href="#坐标系两端保留一定的空白" class="headerlink" title="坐标系两端保留一定的空白"></a>坐标系两端保留一定的空白</h3><p>对于分类数据的坐标轴两边默认会留下一定的空白，连续数据的坐标轴的两端没有空白刻度</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vYmFzZW1lbnQvc2t5bGFyay8wYWQ2MzgzZDE0NzkxODk1NjgyOTU4OTQ5ZDc1NWYvYXR0YWNoLzQwODAvOTAwL2ltYWdlLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>是否两端有空白是列定义里面 range 属性决定的，分类列的 range 的默认值是 [ 1 &#x2F; (count - 1), 1 - 1 &#x2F; (count - 1) ]，可以修改这个值达到改变空白大小的目的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.source(data, &#123;<br>  xField: &#123;<br>    type: &#x27;cat&#x27;,<br>    range: [ 0, 1 ]<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="坐标轴在其他坐标系下的显示"><a href="#坐标轴在其他坐标系下的显示" class="headerlink" title="坐标轴在其他坐标系下的显示"></a>坐标轴在其他坐标系下的显示</h3><p>不同的坐标系下坐标轴的显示不一样，默认的配置项也不同</p>
<ul>
<li><p>极坐标下的坐标轴上栅格线有圆形和多边形两种；</p>
</li>
<li><p>theta、helix 坐标系默认不显示坐标轴；</p>
</li>
<li><p>polar 坐标系发生 transpose 时也不显示坐标轴。</p>
</li>
</ul>
<h1 id="Legend-图例"><a href="#Legend-图例" class="headerlink" title="Legend 图例"></a>Legend 图例</h1><h1 id="图例"><a href="#图例" class="headerlink" title="图例"></a>图例</h1><p>图例（legend）是图表的辅助元素，使用颜色、大小、形状区分不同的数据类型，用于图表中数据的筛选。G2 会根据设置图形属性映射以及数据的类型自动生成不同的图例。</p>
<ul>
<li><p>shape, color, size 这三个图形属性如果判断接收的参数是数据源的字段时，会自动生成不同的图例；</p>
</li>
<li><p>shape 属性，会根据不同的 shape 类型生成图例；</p>
</li>
<li><p>color 属性, 会赋予不同的图例项不同的颜色来区分图形；</p>
</li>
<li><p>size 属性, 在图例上显示图形的大小。</p>
</li>
</ul>
<p>通过 <code>chart.legend([field, ]false)</code> 可以关闭图例。<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL0tOenVQbmNEanBtbGNoSXpMblFNLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="如何配置图例"><a href="#如何配置图例" class="headerlink" title="如何配置图例"></a>如何配置图例</h2><p>调用 <code>chart.legend()</code> 进行图例的配置，使用方法如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.legend(&#123; <br>  position: &#x27;bottom&#x27;, // 设置图例的显示位置<br>  itemGap: 20 // 图例项之间的间距<br>&#125;);<br><br>chart.legend(&#x27;cut&#x27;, false); // 不显示 cut 字段对应的图例<br><br>chart.legend(&#x27;price&#x27;, &#123;<br>  title: null // 不展示图例 title<br>&#125;);<br><br>chart.legend(false); //所有的图例都不显示<br></code></pre></td></tr></table></figure>

<h2 id="图例整体样式设置"><a href="#图例整体样式设置" class="headerlink" title="图例整体样式设置"></a>图例整体样式设置</h2><table>
<thead>
<tr>
<th>属性名</th>
<th>解释</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>position</td>
<td>图例的显示位置，支持12个定位位置，配置值 ‘left-top’,’left-center’,’left-bottom’,’right-top’,’right-top’,’right-bottom’,’top-left’,’top-center’,’top-bottom’,’bottom-left’,’bottom-center’,’bottom-right’。也可使用’left’(默认为left-bottom’),’right’(默认为’right-bottom’),’top’(默认为top-center’),’bottom’(默认为bottom-center’)定位。</td>
<td>‘bottom-center’</td>
</tr>
<tr>
<td>title</td>
<td>用于图例标题的显示样式配置，如果值为 null 则不展示。</td>
<td>左右两侧图例默认展示标题，上下图例默认不展示标题</td>
</tr>
<tr>
<td>background</td>
<td>用于图例背景色的配置</td>
<td>默认没有背景色</td>
</tr>
<tr>
<td>offsetX</td>
<td>整个图例的水平偏移距离</td>
<td>–</td>
</tr>
<tr>
<td>offsetY</td>
<td>整个图例的垂直偏移距离</td>
<td>–</td>
</tr>
<tr>
<td>width</td>
<td>图例的整体宽度（用于连续图例）</td>
<td>20</td>
</tr>
<tr>
<td>height</td>
<td>图例的整体高度（用于连续图例）</td>
<td>156</td>
</tr>
<tr>
<td>autoWrap</td>
<td>图例项过多时是否自动换行（用于分类图例）</td>
<td>true，自动换行</td>
</tr>
<tr>
<td>marker</td>
<td>配置图例 marker 的显示样式，支持指定 <code>point</code> 几何标记支持的所有 shape(除去 ‘rect’)：’circle’, ‘square’, ‘bowtie’, ‘diamond’, ‘hexagon’, ‘triangle’, ‘triangle-down’, ‘hollowCircle’, ‘hollowSquare’, ‘hollowBowtie’, ‘hollowDiamond’, ‘hollowHexagon’, ‘hollowTriangle’, ‘hollowTriangle-down’, ‘cross’, ‘tick’, ‘plus’, ‘hyphen’, ‘line’</td>
<td>不同的几何标记不同的 marker</td>
</tr>
<tr>
<td>attachLast</td>
<td>是否启用尾部跟随图例（适用于<code>line</code>、<code>lineStack</code>、<code>area</code>、<code>areaStack</code>图表类型)</td>
<td>false</td>
</tr>
<tr>
<td>clickable</td>
<td>图例项是否可以点击</td>
<td>true</td>
</tr>
<tr>
<td>hoverable</td>
<td>是否默认开启鼠标 hover 到图例项上的交互</td>
<td>true</td>
</tr>
<tr>
<td>selectedMode</td>
<td>clickable 为 true 时生效，图例的选中模式，单选或者多选</td>
<td>‘multiple’ 默认多选</td>
</tr>
<tr>
<td>onHover</td>
<td>自定义图例项鼠标 hover 事件，hoverable 为 false 不生效</td>
<td>–</td>
</tr>
<tr>
<td>onClick</td>
<td>自定义图例项点击事件， clickable 为 false 不生效</td>
<td>–</td>
</tr>
</tbody></table>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4Mzk3OTAwNjQtNWNmM2YxYjktYTI4Ny00YzY0LWFjOGEtY2ZjMjdkMDI0NzUzLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; year: &#x27;Year 1800&#x27;, region: &#x27;Africa&#x27;, population: 107 &#125;,<br>  &#123; year: &#x27;Year 1900&#x27;, region: &#x27;Africa&#x27;, population: 133 &#125;,<br>  &#123; year: &#x27;Year 2012&#x27;, region: &#x27;Africa&#x27;, population: 1052 &#125;,<br>  &#123; year: &#x27;Year 1800&#x27;, region: &#x27;America&#x27;, population: 31 &#125;,<br>  &#123; year: &#x27;Year 1900&#x27;, region: &#x27;America&#x27;, population: 156 &#125;,<br>  &#123; year: &#x27;Year 2012&#x27;, region: &#x27;America&#x27;, population: 954 &#125;,<br>  &#123; year: &#x27;Year 1800&#x27;, region: &#x27;Asia&#x27;, population: 635 &#125;,<br>  &#123; year: &#x27;Year 1900&#x27;, region: &#x27;Asia&#x27;, population: 947 &#125;,<br>  &#123; year: &#x27;Year 2012&#x27;, region: &#x27;Asia&#x27;, population: 4250 &#125;,<br>  &#123; year: &#x27;Year 1800&#x27;, region: &#x27;Europe&#x27;, population: 203 &#125;,<br>  &#123; year: &#x27;Year 1900&#x27;, region: &#x27;Europe&#x27;, population: 408 &#125;,<br>  &#123; year: &#x27;Year 2012&#x27;, region: &#x27;Europe&#x27;, population: 740 &#125;,<br>  &#123; year: &#x27;Year 1800&#x27;, region: &#x27;Oceania&#x27;, population: 2 &#125;,<br>  &#123; year: &#x27;Year 1900&#x27;, region: &#x27;Oceania&#x27;, population: 6 &#125;,<br>  &#123; year: &#x27;Year 2012&#x27;, region: &#x27;Oceania&#x27;, population: 38 &#125;<br>];<br><br>const chart = new G2.Chart(&#123;<br>  container: &#x27;legendMarker&#x27;,<br>  width: 600,<br>  height: 350,<br>  padding: [ 20, 90, 95, 80 ]<br>&#125;);<br><br>chart.source(data);<br>chart.coord().transpose();<br>chart.legend(&#123;<br>  title: null, // 不展示图例的标题<br>  marker: &#x27;square&#x27; // 设置图例 marker 的显示样式<br>&#125;);<br>chart.intervalDodge().position(&#x27;region*population&#x27;).color(&#x27;year&#x27;).label(&#x27;population&#x27;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h2 id="各个图例项样式设置"><a href="#各个图例项样式设置" class="headerlink" title="各个图例项样式设置"></a>各个图例项样式设置<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL216RnVhbVFLV21EeEdqa0RtTWtuLnBuZw?x-oss-process=image/format,png" alt="img"></h2><table>
<thead>
<tr>
<th>属性名</th>
<th>解释</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>allowAllCanceled</td>
<td>(分类图例)是否保留一项不能取消勾选，默认为 false，即最后一项不能取消勾选</td>
<td>false</td>
</tr>
<tr>
<td>unCheckColor</td>
<td>未选中时marker的颜色</td>
<td>‘#bfbfbf’</td>
</tr>
<tr>
<td>textStyle</td>
<td>图例项文本的样式配置</td>
<td>{fill: ‘#3c3c3c’}</td>
</tr>
<tr>
<td>itemWidth</td>
<td>图例项的宽度，当图例有很多图例项，并且用户想要这些图例项在同一平面内垂直对齐，此时这个属性可帮用户实现此效果</td>
<td>–</td>
</tr>
<tr>
<td>itemFormatter</td>
<td>用于格式化图例每项的文本显示，是个回调函数</td>
<td>–</td>
</tr>
</tbody></table>
<h2 id="图例的选择模式设置"><a href="#图例的选择模式设置" class="headerlink" title="图例的选择模式设置"></a>图例的选择模式设置</h2><p>在 G2 中，图例分为两种：</p>
<ol>
<li><p>分类图例；</p>
</li>
<li><p>连续图例。</p>
</li>
</ol>
<p>对于分类图例的筛选，G2 提供了三种方式：</p>
<ol>
<li><p><code>selectedMode: &#39;multiple&#39;</code> 多选，默认配置；</p>
</li>
<li><p><code>selectedMode: &#39;single&#39;</code> 单选；</p>
</li>
<li><p><code>clickable: false</code> 禁用筛选。</p>
</li>
</ol>
<p>对于连续图例，声明 <code>slidable: false</code> 关闭筛选操作，默认开启筛选操作。</p>
<p>通过如下代码即可进行配置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">// 对分类图例进行配置<br>chart.legend(&#123;<br>  selectedMode: &#x27;single&#x27; <br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4Mzk4MjkxNTItZDMwZDI1ODItYjRkZS00MGY2LTg5NjEtMWE0MjkyODEzYzFiLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; 部门: &#x27;部门0&#x27;, 小组: &#x27;组名0&#x27;, 完成人数: 37, 未完成人数: 9 &#125;,<br>  &#123; 部门: &#x27;部门0&#x27;, 小组: &#x27;组名2&#x27;, 完成人数: 29, 未完成人数: 10 &#125;,<br>  &#123; 部门: &#x27;部门0&#x27;, 小组: &#x27;组名8&#x27;, 完成人数: 59, 未完成人数: 14 &#125;,<br>  &#123; 部门: &#x27;部门0&#x27;, 小组: &#x27;组名9&#x27;, 完成人数: 60, 未完成人数: 8 &#125;,<br>  &#123; 部门: &#x27;部门0&#x27;, 小组: &#x27;组名10&#x27;, 完成人数: 83, 未完成人数: 14 &#125;,<br>  &#123; 部门: &#x27;部门0&#x27;, 小组: &#x27;组名12&#x27;, 完成人数: 67, 未完成人数: 21 &#125;,<br>  &#123; 部门: &#x27;部门0&#x27;, 小组: &#x27;组名14&#x27;, 完成人数: 46, 未完成人数: 18 &#125;,<br>  &#123; 部门: &#x27;部门0&#x27;, 小组: &#x27;组名17&#x27;, 完成人数: 19, 未完成人数: 27 &#125;,<br>  &#123; 部门: &#x27;部门0&#x27;, 小组: &#x27;组名19&#x27;, 完成人数: 74, 未完成人数: 17 &#125;,<br>  &#123; 部门: &#x27;部门1&#x27;, 小组: &#x27;组名15&#x27;, 完成人数: 34, 未完成人数: 19 &#125;,<br>  &#123; 部门: &#x27;部门1&#x27;, 小组: &#x27;组名20&#x27;, 完成人数: 71, 未完成人数: 25 &#125;,<br>  &#123; 部门: &#x27;部门1&#x27;, 小组: &#x27;组名26&#x27;, 完成人数: 28, 未完成人数: 23 &#125;,<br>  &#123; 部门: &#x27;部门1&#x27;, 小组: &#x27;组名29&#x27;, 完成人数: 90, 未完成人数: 24 &#125;,<br>  &#123; 部门: &#x27;部门2&#x27;, 小组: &#x27;组名7&#x27;, 完成人数: 50, 未完成人数: 5 &#125;,<br>  &#123; 部门: &#x27;部门2&#x27;, 小组: &#x27;组名11&#x27;, 完成人数: 86, 未完成人数: 26 &#125;,<br>  &#123; 部门: &#x27;部门2&#x27;, 小组: &#x27;组名13&#x27;, 完成人数: 63, 未完成人数: 16 &#125;,<br>  &#123; 部门: &#x27;部门2&#x27;, 小组: &#x27;组名27&#x27;, 完成人数: 76, 未完成人数: 2 &#125;,<br>  &#123; 部门: &#x27;部门2&#x27;, 小组: &#x27;组名28&#x27;, 完成人数: 13, 未完成人数: 28 &#125;,<br>  &#123; 部门: &#x27;部门3&#x27;, 小组: &#x27;组名1&#x27;, 完成人数: 33, 未完成人数: 16 &#125;,<br>  &#123; 部门: &#x27;部门3&#x27;, 小组: &#x27;组名3&#x27;, 完成人数: 14, 未完成人数: 1 &#125;,<br>  &#123; 部门: &#x27;部门3&#x27;, 小组: &#x27;组名4&#x27;, 完成人数: 43, 未完成人数: 25 &#125;,<br>  &#123; 部门: &#x27;部门3&#x27;, 小组: &#x27;组名16&#x27;, 完成人数: 45, 未完成人数: 13 &#125;,<br>  &#123; 部门: &#x27;部门3&#x27;, 小组: &#x27;组名18&#x27;, 完成人数: 50, 未完成人数: 21 &#125;,<br>  &#123; 部门: &#x27;部门3&#x27;, 小组: &#x27;组名22&#x27;, 完成人数: 43, 未完成人数: 7 &#125;,<br>  &#123; 部门: &#x27;部门3&#x27;, 小组: &#x27;组名23&#x27;, 完成人数: 38, 未完成人数: 6 &#125;,<br>  &#123; 部门: &#x27;部门3&#x27;, 小组: &#x27;组名24&#x27;, 完成人数: 33, 未完成人数: 24 &#125;,<br>  &#123; 部门: &#x27;部门3&#x27;, 小组: &#x27;组名25&#x27;, 完成人数: 13, 未完成人数: 27 &#125;,<br>  &#123; 部门: &#x27;部门4&#x27;, 小组: &#x27;组名5&#x27;, 完成人数: 98, 未完成人数: 4 &#125;,<br>  &#123; 部门: &#x27;部门4&#x27;, 小组: &#x27;组名6&#x27;, 完成人数: 88, 未完成人数: 12 &#125;,<br>  &#123; 部门: &#x27;部门4&#x27;, 小组: &#x27;组名21&#x27;, 完成人数: 52, 未完成人数: 9 &#125;<br>];<br> <br>const DataView = DataSet.DataView;<br>const dv = new DataView();<br>dv.source(data)<br>  .transform(&#123;<br>    type: &#x27;sort&#x27;,<br>    callback: (obj1, obj2) => &#123;<br>      return obj1[&#x27;部门&#x27;] > obj2[&#x27;部门&#x27;] ? 1 : -1;<br>    &#125;<br>  &#125;)<br>  .transform(&#123;<br>    type: &#x27;map&#x27;,<br>    callback: obj => &#123;<br>      obj[&#x27;完成人数&#x27;] *= -1; // 将完成人数转换成负数<br>      return obj;<br>    &#125;<br>  &#125;)<br>  .transform(&#123;<br>    type: &#x27;fold&#x27;,<br>    fields: [&#x27;完成人数&#x27;, &#x27;未完成人数&#x27;],<br>    key: &#x27;完成状态&#x27;,<br>    value: &#x27;人数&#x27;<br>  &#125;);<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  forceFit: true,<br>  height: 400,<br>  padding: [ 5, 100, 80 ]<br>&#125;);<br>chart.source(dv);<br>chart.filter(&#x27;部门&#x27;, val => &#123;<br>  return val === &#x27;部门0&#x27;;<br>&#125;);<br>chart.coord().transpose();<br>// 关键代码：设置对应图例的选择模式<br>chart.legend(&#x27;部门&#x27;, &#123;<br>  selectedMode: &#x27;single&#x27;,<br>  position: &#x27;right-bottom&#x27;,<br>  hoverable: false<br>&#125;);<br>chart.legend(&#x27;完成状态&#x27;, false);<br>chart.axis(&#x27;人数&#x27;, &#123;<br>  label: &#123;<br>    formatter: value => &#123;<br>      value = parseInt(value);<br>      return Math.abs(value); // 将负数格式化成正数<br>    &#125;<br>  &#125;<br>&#125;);<br>chart.interval()<br>  .position(&#x27;小组*人数&#x27;)<br>  .color(&#x27;部门&#x27;)<br>  .shape(&#x27;完成状态&#x27;, [ &#x27;rect&#x27;, &#x27;hollowRect&#x27; ])<br>  .style(&#123;<br>    lineWidth: 1<br>  &#125;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h2 id="使用-html-渲染图例"><a href="#使用-html-渲染图例" class="headerlink" title="使用 html 渲染图例"></a>使用 html 渲染图例</h2><p>G2 支持使用 html 渲染图例，方式非常简单，只要声明 <code>useHtml: true</code> 即可。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4Mzk4NjMwNzctMzVkOTE3M2YtZTg5ZS00MTUyLTg1M2YtMTM4NGE3MjIzZDc1LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.legend(&#123;<br>  useHtml: true,<br>  containerTpl: &#123;string&#125;, // 可选，默认容器模板不满足要求时使用<br>  itemTpl: &#123;string&#125; | &#123;function&#125;, // 可选，用户设置的图例项 html 模板，默认提供的模板不满足要求时使用<br>&#125;);<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; country: &#x27;Lithuania&#x27;, litres: 501.9 &#125;,<br>  &#123; country: &#x27;Czech Republic&#x27;, litres: 301.9 &#125;,<br>  &#123; country: &#x27;Ireland&#x27;, litres: 201.1 &#125;,<br>  &#123; country: &#x27;Germany&#x27;, litres: 165.8 &#125;,<br>  &#123; country: &#x27;Australia&#x27;, litres: 139.9 &#125;,<br>  &#123; country: &#x27;Austria&#x27;, litres: 128.3 &#125;,<br>  &#123; country: &#x27;UK&#x27;, litres: 99 &#125;,<br>  &#123; country: &#x27;Belgium&#x27;, litres: 60 &#125;,<br>  &#123; country: &#x27;The Netherlands&#x27;, litres: 50 &#125;<br>];<br><br>const ds = new DataSet();<br>const dv = ds.createView()<br>  .source(data)<br>  .transform(&#123;<br>    type: &#x27;percent&#x27;,<br>    field: &#x27;litres&#x27;,<br>    dimension: &#x27;country&#x27;,<br>    as: &#x27;percent&#x27;<br>  &#125;);<br><br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c2&#x27;,<br>  width: 500,<br>  height: 500,<br>  padding: [ 20, 120, 20, 160 ]<br>&#125;);<br>chart.source(dv, &#123;<br>  percent: &#123;<br>    formatter: val => &#123;<br>      val = (val * 100).toFixed(2) + &#x27;%&#x27;;<br>      return val;<br>    &#125;<br>  &#125;,<br>  nice: false<br>&#125;);<br>chart.coord(&#x27;theta&#x27;, &#123;<br>  innerRadius: 0.3,<br>  radius: 1<br>&#125;);<br>chart.tooltip(&#123;<br>  showTitle: false, // 不展示标题<br>  itemTpl: &#x27;<li data-index=&#123;index&#125;><span style="color:&#123;color&#125;">&#123;name&#125;:</span>&#123;value&#125;</li>&#x27;<br>&#125;);<br>chart.legend(&#123;<br>  useHtml: true,<br>  position: &#x27;right&#x27;,<br>  containerTpl: &#x27;<div class="g2-legend">&#x27; +<br>    &#x27;<table class="g2-legend-list" style="list-style-type:none;margin:0;padding:0;"></table>&#x27; +<br>    &#x27;</div>&#x27;,<br>  itemTpl: (value, color, checked, index) => &#123;<br>    const obj = dv.rows[index];<br>    checked = checked ? &#x27;checked&#x27; : &#x27;unChecked&#x27;;<br>    return &#x27;<tr class="g2-legend-list-item item-&#x27; + index + &#x27; &#x27; + checked +<br>      &#x27;" data-value="&#x27; + value + &#x27;" data-color=&#x27; + color +<br>      &#x27; style="cursor: pointer;font-size: 14px;">&#x27; +<br>      &#x27;<td width=150 style="border: none;padding:0;"><i class="g2-legend-marker" style="width:10px;height:10px;display:inline-block;margin-right:10px;background-color:&#x27; + color + &#x27;;"></i>&#x27; +<br>      &#x27;<span class="g2-legend-text">&#x27; + value + &#x27;</span></td>&#x27; +<br>      &#x27;<td style="text-align: right;border: none;padding:0;">&#x27; + obj.litres + &#x27;</td>&#x27; +<br>      &#x27;</tr>&#x27;;<br>  &#125;,<br>  offsetX: 15,<br>  &#x27;g2-legend&#x27;: &#123;<br>    marginLeft: &#x27;100px&#x27;,<br>    marginTop: &#x27;-107px&#x27;<br>  &#125;,<br>  &#x27;g2-legend-list&#x27;: &#123;<br>    border: &#x27;none&#x27;<br>  &#125;<br>&#125;);<br>chart.filter(&#x27;country&#x27;, val => &#123;<br>  return val !== &#x27;UK&#x27;;<br>&#125;);<br>chart.intervalStack()<br>  .position(&#x27;percent&#x27;)<br>  .color(&#x27;country&#x27;, [ &#x27;#67b7dc&#x27;, &#x27;#84b761&#x27;, &#x27;#fdd400&#x27;, &#x27;#cc4748&#x27;, &#x27;#cd82ad&#x27;, &#x27;#2f4074&#x27;, &#x27;#448e4d&#x27;, &#x27;#b7b83f&#x27;, &#x27;#b9783f&#x27; ])<br>  .label(&#x27;percent&#x27;, &#123;<br>    formatter: (val, item) => &#123;<br>      return item.point.country + &#x27;: &#x27; + val;<br>    &#125;<br>  &#125;)<br>  .style(&#123;<br>    lineWidth: 2,<br>    stroke: &#x27;#fff&#x27;<br>  &#125;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ul>
<li>1.隐藏图例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.legend(false); // 隐藏全部图例<br>chart.legend(&#x27;x&#x27;, false); // 只隐藏 x 维度对应的图例<br></code></pre></td></tr></table></figure>

<ul>
<li>2.更改图例位置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.legend(&#x27;x&#x27;, &#123;<br>  position: &#x27;bottom&#x27;<br>&#125;); // 只更改 x 维度对应的图例的显示位置<br></code></pre></td></tr></table></figure>

<ul>
<li>3.图例显示位置不够</li>
</ul>
<p>调整 padding 值（padding 的介绍详见<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-creating-chart#ocqogt">创建图表之图表样式</a>）。</p>
<h1 id="Tooltip-提示信息"><a href="#Tooltip-提示信息" class="headerlink" title="Tooltip 提示信息"></a>Tooltip 提示信息</h1><p>提示信息(tooltip)，是指当鼠标悬停在图表上的某点时，以提示框的形式展示该点的数据，比如该点的值，数据单位等。tooltip 内显示的信息完全可以通过格式化函数动态指定；通过调用 <code>chart.tooltip(false)</code> 即可不启用提示信息功能。<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL1ZMTmhrS1JBTGFmUHREQ0laRnFBLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="tooltip-配置语法"><a href="#tooltip-配置语法" class="headerlink" title="tooltip 配置语法"></a>tooltip 配置语法</h2><p>在 G2 中提供了个层次的配置 tooltip 的方法，</p>
<ol>
<li><p>设置在 chart 对象上的tooltip 样式、功能相关的配置，</p>
</li>
<li><p>设置在每个几何标记对象上的 tooltip 配置，具体如下：</p>
</li>
</ol>
<p>（1） chart 上的 tooltip 方法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.tooltip(true, cfg); // 开启 tooltip，并设置 tooltip 配置信息<br>chart.tooltip(cfg); // 省略 true, 直接设置 tooltip 配置信息<br>chart.tooltip(false); // 关闭 tooltip<br></code></pre></td></tr></table></figure>

<p>常用的 tooltip 配置信息如下，注意，G2 的 tooltip 是使用 html 进行渲染的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.tooltip(&#123;<br>  triggerOn: &#x27;mousemove&#x27; | &#x27;click&#x27; | &#x27;none&#x27;, // tooltip 的触发方式，默认为 mousemove <br>  showTitle: &#123;boolean&#125;, // 是否展示 title，默认为 true<br>  crosshairs: &#123;<br>    type: &#x27;rect&#x27; || &#x27;x&#x27; || &#x27;y&#x27; || &#x27;cross&#x27;,<br>    style: &#123;<br>      // 图形样式<br>    &#125;<br>  &#125;, // tooltip 辅助线配置<br>  offset: 10, // tooltip 距离鼠标的偏移量<br>  containerTpl: &#x27;<div class="g2-tooltip">&#x27;<br>    + &#x27;<div class="g2-tooltip-title" style="margin:10px 0;"></div>&#x27;<br>    + &#x27;<ul class="g2-tooltip-list"></ul></div>&#x27;, // tooltip 容器模板<br>  itemTpl: &#x27;<li data-index=&#123;index&#125;><span style="background-color:&#123;color&#125;;width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:8px;"></span>&#123;name&#125;: &#123;value&#125;</li>&#x27;, // tooltip 每项记录的默认模板<br>  inPlot: true, // 将 tooltip 展示在指定区域内<br>  follow: true， // tooltip 是否跟随鼠标移动<br>  shared: true || false, // 默认为 true, false 表示只展示单条 tooltip<br>  position: &#x27;left&#x27; || &#x27;right&#x27; || &#x27;top&#x27; || &#x27;bottom&#x27; // 固定位置展示 tooltip<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vc2t5bGFyay83NTA3MjVkNC0yZTU4LTQ0MjAtYjg4Ni00YWJlMWMwMzM1YzIvYXR0YWNoLzIzNzgvYWQ4ZmUyZGFhNTU3YWQ2Mi9pbWFnZS5wbmc?x-oss-process=image/format,png" alt="img"></p>
<p>更详细的配置请查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-chart#tooltip">tooltip api</a>。</p>
<p>（2）geom 对象上的 tooltip 配置</p>
<ol>
<li>可以在 geom 几何标记上配置 tooltip 的显示内容，如下语法所示：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.<geom>.tooltip(&#x27;field1*field2...*fieldN&#x27;);<br></code></pre></td></tr></table></figure>

<p>这个时候 tooltip 的显示内容如下：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vc2t5bGFyay9hOTJkMTIxYS01ODc5LTQyYWQtYjEyYy0xYjRjYzNjNzlmNjkvYXR0YWNoLzIzNzgvYjgwMTNlOWRkMTBmZDYzNC9pbWFnZS5wbmc?x-oss-process=image/format,png" alt="img"></p>
<ol>
<li>使用回调函数自定义 tooltip 信息, 默认情况下tooltip 的每一项包含以下信息：</li>
</ol>
<ul>
<li><p>title 标题，默认tooltip 的标题取第一项的 title</p>
</li>
<li><p>name 标题</p>
</li>
<li><p>value 值</p>
</li>
<li><p>color 图例项对应的颜色</p>
</li>
<li><p>index 索引值<br>所以在回调函数中可以通过修改这几个值，达到自定义tooltip 的目的</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.<geom>.tooltip(&#x27;a*b&#x27;, (a, b) => &#123;<br>  return &#123;<br>    name: a,<br>    value: b<br>  &#125;;<br>&#125;);<br></code></pre></td></tr></table></figure>

<ol>
<li>除了调用 <code>chart.tooltip(false)</code> 关闭 tooltip 外，还可以在 geom 上关闭 tooltip。配置方法如下：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.point().tooltip(false);<br></code></pre></td></tr></table></figure>

<h2 id="配置示例"><a href="#配置示例" class="headerlink" title="配置示例"></a>配置示例</h2><p>tooltip 的目的是为了展示数据点相关的数据，具体展示的内容完全可以通过多种灵活的方式来实现。</p>
<h3 id="指定-tooltip-的显示信息"><a href="#指定-tooltip-的显示信息" class="headerlink" title="指定 tooltip 的显示信息"></a>指定 tooltip 的显示信息</h3><p>如果 G2 默认生成的 tooltip 展示内容不满足需求，用户可以通过调用几何标记的 tooltip 方法手动指定要显示的 tooltip 内容。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDAwNDU4NjgtNzQ4OTJjMjgtNTEyNi00NDhiLWJmY2MtM2FkY2Q3NWU5NjY2LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; month: 0, tem: 7, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 1, tem: 6.9, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 2, tem: 9.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 3, tem: 14.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 4, tem: 18.2, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 5, tem: 21.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 6, tem: 25.2, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 7, tem: 26.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 8, tem: 23.3, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 9, tem: 18.3, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 10, tem: 13.9, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 11, tem: 9.6, city: &#x27;tokyo&#x27; &#125;<br>];<br><br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c0&#x27;,<br>  width: 800,<br>  height: 300<br>&#125;);<br><br>const defs = &#123;<br>  &#x27;month&#x27;:&#123;<br>    type: &#x27;cat&#x27;,<br>    alias: &#x27;月份&#x27;, // 别名，如果没有别名显示成字段名 month<br>    values: [ &#x27;一月&#x27;, &#x27;二月&#x27;, &#x27;三月&#x27;, &#x27;四月&#x27;, &#x27;五月&#x27;, &#x27;六月&#x27;, &#x27;七月&#x27;, &#x27;八月&#x27;, &#x27;九月&#x27;, &#x27;十月&#x27;, &#x27;十一月&#x27;, &#x27;十二月&#x27; ]<br>  &#125;,<br>  &#x27;tem&#x27;: &#123;<br>    alias: &#x27;温度&#x27;<br>  &#125;<br>&#125;;<br><br>chart.source(data,defs);<br><br>chart.tooltip(true, &#123;<br>  showTitle: false // 默认标题不显示<br>&#125;);<br>chart.line().position(&#x27;month*tem&#x27;).tooltip(&#x27;month*tem&#x27;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h3 id="格式化-tooltip-的显示内容"><a href="#格式化-tooltip-的显示内容" class="headerlink" title="格式化 tooltip 的显示内容"></a>格式化 tooltip 的显示内容</h3><p>当需要格式化 tooltip 的显示内容时，有两种方式：</p>
<ol>
<li><p>大部分场景下，可以使用 <code>geom.tooltip(&#39;x*y*z&#39;, callback)</code> 同 <code>chart.tooltip(&#123; itemTpl: &#39;xxx&#39;&#125;)</code> 的方式。</p>
</li>
<li><p>对于复杂的场景，可以监听 chart 对象上的 <code>tooltip:change</code> 事件。这个事件会返回如下参数：</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">&#123;<br>  x: 当前鼠标的 x 坐标,<br>  y: 当前鼠标的 y 坐标,<br>  tooltip: 当前的 tooltip 对象<br>  items: 数组对象，当前 tooltip 显示的每条内容<br>&#125;<br></code></pre></td></tr></table></figure>

<p>每一项的内容</p>
<ul>
<li><p>title 标题，默认tooltip 的标题取第一项的 title</p>
</li>
<li><p>name 标题</p>
</li>
<li><p>value 值</p>
</li>
<li><p>color 图例项对应的颜色</p>
</li>
<li><p>index 索引值</p>
</li>
</ul>
<p>通过修改 items 的内容就可以修改 tooltip 的展示内容了。</p>
<h4 id="使用-geom-tooltip-回调"><a href="#使用-geom-tooltip-回调" class="headerlink" title="使用 geom.tooltip() 回调"></a>使用 geom.tooltip() 回调</h4><p>这种方式通常需要同 chart.tooltip() 结合使用。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">//自定义模板，自定义tooltip展示<br>chart.tooltip(&#123;<br>  itemTpl: &#x27;<li>&#123;x&#125;: &#123;y&#125;</li>&#x27;<br>&#125;);<br>chart.line().position(&#x27;x*y&#x27;).tooltip(&#x27;x*y&#x27;, (x, y) => &#123;<br>  return &#123;<br>    x, <br>    y<br>  &#125;; // 返回的参数名对应 itemTpl 中的变量名<br>);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDAxMDAyMjEtYWU1OWNmZTctYWQ5NC00MTI1LTlhNGMtMDY2MzYxMmJlYTdhLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; name: &#x27;Microsoft Internet Explorer&#x27;, value: 30 &#125;,<br>  &#123; name: &#x27;Chrome&#x27;, value: 20 &#125;,<br>  &#123; name: &#x27;Firefox&#x27;, value: 10 &#125;,<br>  &#123; name: &#x27;Safari&#x27;, value: 10 &#125;,<br>  &#123; name: &#x27;Opera&#x27;, value: 15 &#125;,<br>  &#123; name: &#x27;Others&#x27;, value: 15 &#125;<br>];<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  forceFit: true,<br>  height: 400<br>&#125;);<br>chart.source(data);<br>chart.coord(&#x27;theta&#x27;, &#123; innerRadius: 0.6, radius: 0.8 &#125;);<br>chart.tooltip(&#123;<br>  showTitle: false,<br>  itemTpl: &#x27;<li>&#123;name&#125;: &#123;value&#125;</li>&#x27;<br>&#125;);<br>chart.intervalStack()<br>  .position(&#x27;value&#x27;)<br>  .color(&#x27;name&#x27;)<br>  .tooltip(&#x27;name*value&#x27;, (name, value) => &#123;<br>    return &#123;<br>      name: name,<br>      value: value + &#x27;%&#x27;<br>    &#125;;<br>  &#125;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h4 id="监听-tooltip-change-事件"><a href="#监听-tooltip-change-事件" class="headerlink" title="监听 tooltip:change 事件"></a>监听 tooltip:change 事件</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDAxNDM5OTEtZDQ4MzI0YjUtZTFmOC00NzliLTk3YzEtMTA3ZGEzYjYyZjczLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [ // 数据<br>  &#123; time: 1428163200000, start: 469, end: 480 &#125;,<br>  &#123; time: 1428163203600, start: 480, end: 430 &#125;,<br>  &#123; time: 1428163207200, start: 430, end: 410 &#125;,<br>  &#123; time: 1428163210800, start: 410, end: 420 &#125;,<br>  &#123; time: 1428163214400, start: 420, end: 440 &#125;,<br>  &#123; time: 1428163218000, start: 440, end: 460 &#125;,<br>  &#123; time: 1428163221600, start: 460, end: 410 &#125;,<br>  &#123; time: 1428163225200, start: 410, end: 440 &#125;,<br>  &#123; time: 1428163228800, start: 440, end: 490 &#125;<br>];<br><br>const DataView = DataSet.DataView;<br>const dv = new DataView();<br>dv.source(data).transform(&#123;<br>  type: &#x27;map&#x27;, <br>  callback: obj => &#123;<br>    obj.range = [ obj.start, obj.end ];<br>    obj.trend = (obj.start <= obj.end) ? &#x27;上涨&#x27; : &#x27;下跌&#x27;;<br>    return obj;<br>  &#125;<br>&#125;);<br><br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c2&#x27;,<br>  width: 800,<br>  height: 400,<br>  padding: [ 20, 50, 95, 80 ]<br>&#125;);<br>chart.source(dv, &#123;<br>  &#x27;time&#x27;: &#123; // 设置日期类型<br>    type: &#x27;time&#x27;,<br>    mask: &#x27;YYYY-MM-DD HH:MM:ss&#x27;<br>  &#125;,<br>  &#x27;trend&#x27;: &#123; <br>    alias: &#x27;趋势&#x27;<br>  &#125;<br>&#125;);<br>chart.interval()<br>  .position(&#x27;time*range&#x27;)<br>  .color(&#x27;trend&#x27;, [ &#x27;#1bbd19&#x27;, &#x27;#fa513a&#x27; ])<br>  .size(20);<br>chart.render();<br>chart.on(&#x27;tooltip:change&#x27;, function(ev) &#123;<br>  const items = ev.items; // tooltip显示的项<br>  const origin = items[0]; // 将一条数据改成多条数据<br>  const range = origin.point._origin.range;<br>  items.splice(0); // 清空<br>  items.push(Object.assign(&#123;<br>    name: &#x27;开始值&#x27;,<br>    marker: true,<br>    value: range[0]<br>  &#125;, origin));<br>  items.push(Object.assign(&#123;<br>    name: &#x27;结束值&#x27;,<br>    marker: true,<br>    value: range[1]<br>  &#125;, origin));<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="自定义-html-模板"><a href="#自定义-html-模板" class="headerlink" title="自定义 html 模板"></a>自定义 html 模板</h3><p>G2 也支持使用自定义的 html 展示 tooltip。配置方法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.tooltip(true, &#123;<br>  containerTpl: &#x27;<div class="g2-tooltip">&#x27;<br>    + &#x27;<div class="g2-tooltip-title" style="margin:10px 0;"></div>&#x27;<br>    + &#x27;<ul class="g2-tooltip-list"></ul></div>&#x27;,<br>  itemTpl: &#x27;<li data-index=&#123;index&#125;><span style="background-color:&#123;color&#125;;width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:8px;"></span>&#123;name&#125;: &#123;value&#125;</li>&#x27;<br>&#125;);<br></code></pre></td></tr></table></figure>

<blockquote>
<p><code>containerTpl</code> tooltip 容器模板 ，注意一定要包含以下 class:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext"><div class="g2-tooltip"><br>  <!-- tooltip 标题 --><br>  <div class="g2-tooltip-title" style="margin:10px 0;"></div><br>  <!-- tooltip 内容列表容器 --><br>  <ul class="g2-tooltip-list"></ul><br></div><br></code></pre></td></tr></table></figure>

<blockquote>
<p><code>itemTpl</code> tooltip 每项记录的默认模板:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext"><li data-index=&#123;index&#125;><br>  <!-- 每项记录的 marker --><br>  <span style="background-color:&#123;color&#125;;width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:8px;"></span><br>  &#123;name&#125;: &#123;value&#125;<br></li><br></code></pre></td></tr></table></figure>

<p>对于 tooltip 的显示样式的配置，用户可以：</p>
<ol>
<li><p>在自定义模板时使用内联的方式直接定义；</p>
</li>
<li><p>在 html 页面的 style 标签内，为对应的 dom 标签设置样式；</p>
</li>
<li><p>在 <code>chart.tooltip(cfg)</code> 中设置属性，如下，具体的说明详见 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-chart#tooltip">API</a></p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.tooltip(&#123;<br>  &#x27;g2-tooltip&#x27;: &#123;<br>    position: &#x27;absolute&#x27;,<br>    visibility: &#x27;hidden&#x27;,<br>    border : &#x27;1px solid #efefef&#x27;,<br>    backgroundColor: &#x27;white&#x27;,<br>    color: &#x27;#000&#x27;,<br>    opacity: "0.8",<br>    padding: &#x27;5px 15px&#x27;,<br>    &#x27;transition&#x27;: &#x27;top 200ms,left 200ms&#x27;<br>  &#125;, // 设置 tooltip 的 css 样式<br>  &#x27;g2-tooltip-list&#x27;: &#123;<br>    margin: &#x27;10px&#x27;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="其他配置-2"><a href="#其他配置-2" class="headerlink" title="其他配置"></a>其他配置</h2><h3 id="显示辅助线（辅助框）"><a href="#显示辅助线（辅助框）" class="headerlink" title="显示辅助线（辅助框）"></a>显示辅助线（辅助框）</h3><p>默认线图和区域图会显示辅助线、柱状图会显示辅助框，当用户需要显示辅助线（框）时，可以通过配置 <code>crosshairs</code> 属性设置，crosshairs 支持四种展示形式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">crosshairs: &#123;<br>  type: &#x27;rect&#x27; || &#x27;x&#x27; || &#x27;y&#x27; || &#x27;cross&#x27;,<br>  style: &#123;<br>    // 图形样式<br>  &#125;<br>&#125;, // tooltip 辅助线配置<br></code></pre></td></tr></table></figure>

<blockquote>
<p>crosshairs.type 说明：</p>
</blockquote>
<ul>
<li><p>rect: 矩形框</p>
</li>
<li><p>x: 水平辅助线</p>
</li>
<li><p>y: 垂直辅助线</p>
</li>
<li><p>cross: 十字辅助线</p>
</li>
</ul>
<p>‘line’, ‘area’, ‘path’ 默认会展示垂直辅助线；‘interval’， 默认会展示矩形背景框。</p>
<h3 id="改变-tooltip-触发方式"><a href="#改变-tooltip-触发方式" class="headerlink" title="改变 tooltip 触发方式"></a>改变 tooltip 触发方式</h3><p>通过配置 <code>triggerOn</code> 参数来改变 tooltip 的触发方式，可配置值为：</p>
<ul>
<li><p><code>mousemove</code>: 鼠标移动至目标区域触发，默认方式；</p>
</li>
<li><p><code>click</code>: 鼠标点击目标区域触发</p>
</li>
<li><p><code>none</code>: 不触发 tooltip，由用户调用 <code>chart.showTooltip(point)</code> 和 <code>chart.hideTooltip()</code> 来控制提示框的显示隐藏。</p>
</li>
</ul>
<p>当然在任何触发方式下，用户都可以通过调用 <code>chart.showTooltip(point)</code> 可以控制在固定的位置显示提示信息，参数 <code>point</code> 为画布上的坐标点，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const point = &#123;<br>  x: 23,<br>  y: 30<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>另外还提供了 <code>chart.getXY(&#123;xField: value, yField: value&#125;)</code> 方法，用于获取数据对应在画布空间的坐标。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDAxOTEwMjgtZmRlZDg0NWMtOGNkYi00MTEyLThmYmQtZmUzNmJkNTg4YWIxLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; time: &#x27;2016-10-25 00:00:00&#x27;, runCount: 4, type: 2, runTime: 2 &#125;,<br>  &#123; time: &#x27;2016-10-25 00:30:00&#x27;, runCount: 2, type: 6, runTime: 3 &#125;,<br>  &#123; time: &#x27;2016-10-25 01:00:00&#x27;, runCount: 13, type: 2, runTime: 5 &#125;,<br>  &#123; time: &#x27;2016-10-25 01:30:00&#x27;, runCount: 9, type: 9, runTime: 1 &#125;,<br>  &#123; time: &#x27;2016-10-25 02:00:00&#x27;, runCount: 5, type: 2, runTime: 3 &#125;,<br>  &#123; time: &#x27;2016-10-25 02:30:00&#x27;, runCount: 8, type: 2, runTime: 1 &#125;,<br>  &#123; time: &#x27;2016-10-25 03:00:00&#x27;, runCount: 13, type: 1, runTime: 2 &#125;,<br>  &#123; time: &#x27;2016-10-25 03:30:00&#x27;, runCount: 4, type: 2, runTime: 2 &#125;,<br>  &#123; time: &#x27;2016-10-25 04:00:00&#x27;, runCount: 2, type: 6, runTime: 3 &#125;,<br>  &#123; time: &#x27;2016-10-25 04:30:00&#x27;, runCount: 13, type: 2, runTime: 5 &#125;,<br>  &#123; time: &#x27;2016-10-25 05:00:00&#x27;, runCount: 9, type: 9, runTime: 1 &#125;,<br>  &#123; time: &#x27;2016-10-25 05:30:00&#x27;, runCount: 5, type: 2, runTime: 3 &#125;<br>];<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c3&#x27;,<br>  forceFit: true,<br>  height: 300,<br>  padding: [ 50, 80 ]<br>&#125;);<br>chart.source(data);<br>chart.scale(&#x27;time&#x27;,&#123;<br>  type: &#x27;timeCat&#x27;,<br>  mask: &#x27;HH:MM&#x27;,<br>  tickCount:12,<br>  nice:true,<br>&#125;);<br>chart.scale(&#x27;runCount&#x27;, &#123;<br>  alias: &#x27;运行数量&#x27;,<br>  min: 0<br>&#125;);<br>chart.scale(&#x27;runTime&#x27;, &#123;<br>  alias: &#x27;运行时间(ms)&#x27;<br>&#125;);<br>chart.tooltip(&#123;<br>  triggerOn: &#x27;click&#x27; // 鼠标点击触发 tooltip<br>&#125;); // 关闭 tooltip<br>chart.legend(false); // 不显示图例<br>chart.line()<br>  .position(&#x27;time*runTime&#x27;)<br>  .color(&#x27;#5ed470&#x27;)<br>  .size(2)<br>  .shape(&#x27;smooth&#x27;); // 绘制曲线图<br>chart.point()<br>  .position(&#x27;time*runTime&#x27;)<br>  .color(&#x27;#5ed470&#x27;)<br>  .size(5)<br>  .shape(&#x27;circle&#x27;)<br>  .style(&#123;<br>    cursor: &#x27;pointer&#x27;<br>  &#125;); // 绘制点图<br>chart.render();<br><br>// 初始化到最新一个点<br>const lastPoint  = chart.get(&#x27;plotRange&#x27;).br;<br>chart.showTooltip(lastPoint);<br></code></pre></td></tr></table></figure>

<h1 id="Guide-辅助元素"><a href="#Guide-辅助元素" class="headerlink" title="Guide 辅助元素"></a>Guide 辅助元素</h1><p>Guide 作为 G2 图表的辅助元素，主要用于在图表上标识额外的标记注解。<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL2Vrckh0Q2tkZk10dGpuQVhxQXBILnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="guide-类型"><a href="#guide-类型" class="headerlink" title="guide 类型"></a>guide 类型</h2><p>G2 目前支持 <strong>9</strong> 种辅助标记类型：</p>
<ul>
<li><p>line：辅助线（可带文本），例如表示平均值或者预期分布的直线；</p>
</li>
<li><p>image：辅助图片，在图表上添加辅助图片；</p>
</li>
<li><p>text：辅助文本，指定位置添加文本说明；</p>
</li>
<li><p>region：辅助框，框选一段图区，设置背景、边框等；</p>
</li>
<li><p>regionFilter:区域着色，将图表中位于矩形选区中的图形元素提取出来，重新着色；</p>
</li>
<li><p>html：辅助 html，指定位置添加自定义 html，显示自定义信息；</p>
</li>
<li><p>arc：辅助弧线。</p>
</li>
<li><p>dataMarker:特殊数据点标注，多用于折线图和面积图</p>
</li>
<li><p>dataRegion:特殊数据区间标注，多用于折线图和面积图</p>
</li>
</ul>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>下面列出了各个 guide 辅助标记类型的使用，更详细的配置项参见 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-chart#gokznc">Guide API</a>。</p>
<p>guide 辅助标记用于标示位置的方式主要有两种</p>
<ul>
<li><p>原始数据的值 如： {time: ‘2010-01-01’, value: 100} 或者 [‘2010-01-01’, 100]</p>
</li>
<li><p>图表绘图区域的相对位置，从左上角计算 如：[‘50%’, ‘50%’]</p>
</li>
</ul>
<p><code>注意</code>：</p>
<ul>
<li><p>原始数据和百分比的方式不能混用，不支持[‘2010-01-01’, ‘50%’]</p>
</li>
<li><p>不同 guide 中标示位置的参数不完全相同，主要是 start, end, position</p>
</li>
</ul>
<h3 id="line-辅助线"><a href="#line-辅助线" class="headerlink" title="line 辅助线"></a>line 辅助线</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.guide().line(&#123;<br>  start: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // 辅助线起始位置，值为原始数据值，支持 callback<br>  end: &#123;object&#125; | &#123;function&#125;|| &#123;array&#125;,// 辅助线结束位置，值为原始数据值，支持 callback<br>  lineStyle: &#123;<br>    stroke: &#x27;#999&#x27;, // 线的颜色<br>    lineDash: [ 0, 2, 2 ], // 虚线的设置<br>    lineWidth: 3 // 线的宽度<br>  &#125;, // 图形样式配置<br>  text: &#123;<br>    position: &#x27;start&#x27; | &#x27;center&#x27; | &#x27;end&#x27; | &#x27;39%&#x27; | 0.5, // 文本的显示位置<br>    autoRotate: &#123;boolean&#125;, // 是否沿线的角度排布，默认为 true<br>    style: &#123;<br>      // 文本图形样式配置<br>    &#125;,<br>    content: &#123;string&#125;, // 文本的内容<br>    offsetX: &#123;number&#125;, // x 方向的偏移量<br>    offsetY: &#123;number&#125; // y 方向的偏移量<br>  &#125; // 文本配置<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDAzNzM3NzUtOGFlNTJjYjctYjFiOC00ZWYzLTkwNTMtMDA2NzIxYWJmNjFjLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const DataView = DataSet.DataView;<br>$.getJSON(&#x27;/assets/data/diamond.json&#x27;, function(data) &#123;<br>  const dv = (new DataView()).source(data);<br>  const caratAvg = dv.mean(&#x27;carat&#x27;); // 计算克拉数均值<br>  const priceAvg = dv.mean(&#x27;price&#x27;); // 计算价格均值<br>  const chart = new G2.Chart(&#123; // 创建图表<br>    container : &#x27;c1&#x27;,<br>    forceFit: true,<br>    height: 450<br>  &#125;);<br> <br>  chart.source(data); // 设置数据源<br>  chart.point().position(&#x27;carat*price&#x27;);<br>  chart.guide().line(&#123;<br>    start: [ caratAvg, 0 ], // 使用数组格式<br>    end: [ caratAvg, 20000 ],<br>    text: &#123;<br>      position: &#x27;end&#x27;,<br>      autoRotate: false,<br>      content: &#x27;克拉数均值:&#x27; + caratAvg<br>    &#125;<br>  &#125;);<br>  chart.guide().line(&#123;<br>    start: &#123;<br>      carat: 0,<br>      price: priceAvg<br>    &#125;, // 使用对象格式<br>    end: &#123;<br>      carat: 4,<br>      price: priceAvg<br>    &#125;,<br>    text: &#123;<br>      position: &#x27;end&#x27;,<br>      autoRotate: false,<br>      content: &#x27;价格均值:&#x27; + priceAvg,<br>      style: &#123;<br>        textAlign: &#x27;end&#x27;<br>      &#125;<br>    &#125;<br>  &#125;);<br>  chart.render(); // 图表渲染<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="image-辅助图片"><a href="#image-辅助图片" class="headerlink" title="image 辅助图片"></a>image 辅助图片</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">// 辅助图片 image，只是指定了 start，则该点表示图片左上角坐标<br>chart.guide().image(&#123;<br>  top: &#123;boolean&#125;, // 指定 giude 是否绘制在 canvas 最上层，默认为 false, 即绘制在最下层<br>  zIndex: &#123;number&#125;,<br>  start: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // 图片起始位置， 值为原始数据值，支持 callback<br>  src: &#123;string&#125;, // 图片路径<br>  width: &#123;number&#125;,<br>  height: &#123;number&#125;,<br>  offsetX: &#123;number&#125;, // x 方向的偏移量<br>  offsetY: &#123;number&#125; // y 方向偏移量<br>&#125;);<br>// 辅助图片 image，通过指定 start 和 end 确定图片的位置和宽高<br>chart.guide().image(&#123;<br>  top: &#123;boolean&#125;, // 指定 giude 是否绘制在 canvas 最上层，默认为 false, 即绘制在最下层 <br>  start: &#123;array&#125; | &#123;function&#125; | &#123;array&#125;, // 图片起始位置， 值为原始数据值，支持 callback<br>  end: &#123;array&#125; | &#123;function&#125; | &#123;array&#125;, // 图片结束位置， 值为原始数据值，支持 callback<br>  src: &#123;string&#125;, // 图片路径<br>  offsetX: &#123;number&#125;, // x 方向的偏移量<br>  offsetY: &#123;number&#125; // y 方向偏移量<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDAzOTc0NjYtZDNkNTYzNmQtYWFkMy00YjUxLWJiMjUtODMyOTFjMzUyM2VjLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const DataView = DataSet.DataView;<br>$.getJSON(&#x27;/assets/data/diamond.json&#x27;, function(data) &#123;<br>  const dv = new DataView();<br>  dv.source(data).transform(&#123;<br>    type: &#x27;bin.histogram&#x27;,<br>    field: &#x27;depth&#x27;,<br>    binWidth: 0.5,<br>    as: [ &#x27;depth&#x27;, &#x27;count&#x27; ],<br>  &#125;);<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c2&#x27;,<br>    forceFit: true,<br>    height: 450<br>  &#125;);<br>  chart.source(dv);<br>  chart.tooltip(&#123;<br>    crosshairs: false<br>  &#125;);<br>  chart.interval().position(&#x27;depth*count&#x27;).shape(&#x27;hollowRect&#x27;);<br><br>  chart.guide().image(&#123;<br>    start: [ 55, 200 ],<br>    src: &#x27;https://os.alipayobjects.com/rmsportal/IUYwZOlOpysCUsl.png&#x27;,<br>    width: 60,<br>    height: 100<br>  &#125;);<br>  chart.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="text-辅助文本"><a href="#text-辅助文本" class="headerlink" title="text 辅助文本"></a>text 辅助文本</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.guide().text(&#123;<br>  top: &#123;boolean&#125;, // 指定 giude 是否绘制在 canvas 最上层，默认为 false, 即绘制在最下层<br>  zIndex: &#123;number&#125;,<br>  position: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // 文本的起始位置，值为原始数据值，支持 callback<br>  content: <br>  style: &#123;<br>    fill: &#x27;#666&#x27;, // 文本颜色<br>    fontSize: &#x27;12&#x27;, // 文本大小<br>    fontWeight: &#x27;bold&#x27; // 文本粗细<br>    rotate: 30 // 旋转角度<br>  &#125;, // 文本的图形样式属性<br>  offsetX: &#123;number&#125;, // x 方向的偏移量<br>  offsetY: &#123;number&#125; // y 方向偏移量<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDA0MjkyNzctNTNhOGUzNmMtOGE3ZS00MWNmLTkzZmQtNDNjYTdjMmFiNDQ0LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const colors = G2.Global.colors;<br>$.getJSON(&#x27;/assets/data/diamond.json&#x27;, function(data) &#123;<br>  const chart = new G2.Chart(&#123; // 创建图表<br>    container : &#x27;c3&#x27;,<br>    forceFit: true,<br>    height: 450,<br>    padding: [ 20, 90, 60, 80 ]<br>  &#125;);<br>  const defs = &#123;<br>    &#x27;cut&#x27;: &#123;<br>      type: &#x27;cat&#x27;,<br>      values:[ &#x27;Ideal&#x27;, &#x27;Premium&#x27;, &#x27;Very-Good&#x27;, &#x27;Good&#x27;, &#x27;Fair&#x27; ]<br>    &#125;<br>  &#125;;<br>  chart.source(data, defs); // 设置数据源<br>  chart.legend(false);<br>  chart.pointJitter().position(&#x27;cut*depth&#x27;).color(&#x27;cut&#x27;);<br>  chart.guide().text(&#123;<br>    position: [ &#x27;Ideal&#x27;, 67 ], <br>    content: &#x27;越完美的钻石切割工艺越集中&#x27;, <br>    style: &#123;<br>      fill: colors[0],<br>      textAlign: &#x27;center&#x27;,<br>      fontSize: 14<br>    &#125;<br>  &#125;);<br>  chart.guide().text(&#123;<br>    position: [ &#x27;Fair&#x27;, 63 ], <br>    content: &#x27;越差的钻石切割工艺越分散&#x27;, <br>    style: &#123;<br>      fill: colors[4],<br>      textAlign: &#x27;center&#x27;,<br>      fontSize: 14<br>    &#125;<br>  &#125;);<br>  chart.render(); // 图表渲染<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="region-辅助框"><a href="#region-辅助框" class="headerlink" title="region 辅助框"></a>region 辅助框</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.guide().region(&#123;<br>  top: &#123;boolean&#125;, // 指定 giude 是否绘制在 canvas 最上层，默认为 false, 即绘制在最下层<br>  start: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // 辅助框起始位置，值为原始数据值，支持 callback <br>  end: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;,// 辅助框结束位置，值为原始数据值，支持 callback<br>  style: &#123;<br>    lineWidth: 0, // 辅助框的边框宽度<br>    fill: &#x27;#f80&#x27;, // 辅助框填充的颜色<br>    fillOpacity: 0.1, // 辅助框的背景透明度<br>    stroke: &#x27;#ccc&#x27; // 辅助框的边框颜色设置<br>  &#125; // 辅助框的图形样式属性<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDA0NTI4ODEtMDVlNDY3NzYtYTQ5OC00MDM3LTk3NDEtOWMyZGYzNmE2NjVlLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; month: 0, tem: 7, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 1, tem: 6.9, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 2, tem: 9.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 3, tem: 14.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 4, tem: 18.2, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 5, tem: 21.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 6, tem: 25.2, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 7, tem: 26.5, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 8, tem: 23.3, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 9, tem: 18.3, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 10, tem: 13.9, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 11, tem: 9.6, city: &#x27;tokyo&#x27; &#125;,<br>  &#123; month: 0, tem: -0.2, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 1, tem: 0.8, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 2, tem: 5.7, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 3, tem: 11.3, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 4, tem: 17, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 5, tem: 22, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 6, tem: 24.8, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 7, tem: 24.1, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 8, tem: 20.1, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 9, tem: 14.1, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 10, tem: 8.6, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 11, tem: 2.5, city: &#x27;newYork&#x27; &#125;,<br>  &#123; month: 0, tem: -0.9, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 1, tem: 0.6, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 2, tem: 3.5, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 3, tem: 8.4, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 4, tem: 13.5, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 5, tem: 17, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 6, tem: 18.6, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 7, tem: 17.9, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 8, tem: 14.3, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 9, tem: 9, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 10, tem: 3.9, city: &#x27;berlin&#x27; &#125;,<br>  &#123; month: 11, tem: 1, city: &#x27;berlin&#x27; &#125;<br>];<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c4&#x27;,<br>  forceFit: true,<br>  height: 450<br>&#125;);<br>chart.source(data);<br>chart.line().position(&#x27;month*tem&#x27;).color(&#x27;city&#x27;);<br>chart.guide().region(&#123;<br>  start: [ 5, &#x27;min&#x27; ], <br>  end: [ 7, &#x27;max&#x27; ]<br>&#125;); // 6月 - 8月最低温度<br>chart.render();<br></code></pre></td></tr></table></figure>

<h3 id="辅助-html"><a href="#辅助-html" class="headerlink" title="辅助 html"></a>辅助 html</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.guide().html(&#123;<br>  position: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // html 的中心位置， 值为原始数据值，支持 callback<br>  alignX: &#x27;left&#x27; | &#x27;middle&#x27; | &#x27;right&#x27;,<br>  alignY: &#x27;top&#x27; | &#x27;middle&#x27; | &#x27;bottom&#x27;,<br>  offsetX: &#123;number&#125;,<br>  offsetY: &#123;number&#125;,<br>  html: &#123;string&#125;, // html 代码，也支持callback,可能是最大值、最小值之类的判定<br>  zIndex: &#123;number&#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDA0Nzk4MTQtMzk3NTJmNjEtMDcxYy00MTQ1LTg3MDUtZWZjMDI2NGUyYzJlLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const DataView = DataSet.DataView;<br>$.getJSON(&#x27;/assets/data/diamond.json&#x27;, function(data) &#123;<br>  const dv = (new DataView()).source(data);<br>  const caratAvg = dv.mean(&#x27;carat&#x27;); // 计算克拉数均值<br>  const priceAvg = dv.mean(&#x27;price&#x27;); // 计算价格均值<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c5&#x27;,<br>    forceFit: true,<br>    height: 450<br>  &#125;);<br>  chart.source(data);<br>  chart.point().position(&#x27;carat*price&#x27;);<br>  // 坐标点<br>  const point = [ 3.5, 12000 ];<br>  //html字符串<br>  const tooltipHtml = "<div style=&#x27;border: 2px solid #0f8de8;width: 50px;height: 26px;color: #0f8de8;position: relative;&#x27;>" +<br>      "<span style=&#x27;color:#63c6c2;font-size:15px&#x27;>异常值</span>" +<br>      "<div style=&#x27;width: 0;height: 0;border-bottom: 8px solid #0f8de8;border-right:10px solid transparent;position: absolute;top: 16px;left: 46px;&#x27;></div>" +<br>      "</div>";<br>  chart.guide().html(&#123;<br>    position: point, <br>    html: tooltipHtml, <br>    alignX: &#x27;right&#x27;,<br>    alignY: &#x27;bottom&#x27;,<br>    offsetX: 10<br>  &#125;);<br>  chart.render(); // 图表渲染<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="辅助-regionFilter"><a href="#辅助-regionFilter" class="headerlink" title="辅助 regionFilter"></a>辅助 regionFilter</h3><p>将图表中位于矩形选区中的图形元素提取出来，重新着色，可以用于区域筛选、图表分段着色。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.guide().regionFilter(&#123;<br>  top: &#123;boolean&#125;, // 指定 giude 是否绘制在 canvas 最上层，默认为 true, 即绘制在最上层<br>  start: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // 辅助框起始位置，值为原始数据值，支持 callback <br>  end: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;,// 辅助框结束位置，值为原始数据值，支持 callback<br>  color:&#x27;#ccc&#x27; //染色色值<br>  apply:&#123;array&#125; //可选,设定regionFilter只对特定geom类型起作用，如apply:[&#x27;area&#x27;],默认regionFilter的作用域为整个图表<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDA1MjczOTUtZjQ4OTNlZGItNzg2Ny00M2RlLThiNDYtMWFjMGE5ZmYwNmE4LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>    &#123; year: &#x27;1991&#x27;, value: 15468 &#125;,<br>    &#123; year: &#x27;1992&#x27;, value: 16100 &#125;,<br>    &#123; year: &#x27;1993&#x27;, value: 15900 &#125;,<br>    &#123; year: &#x27;1994&#x27;, value: 17409 &#125;,<br>    &#123; year: &#x27;1995&#x27;, value: 17000 &#125;,<br>    &#123; year: &#x27;1996&#x27;, value: 31056 &#125;,<br>    &#123; year: &#x27;1997&#x27;, value: 31982 &#125;,<br>    &#123; year: &#x27;1998&#x27;, value: 32040 &#125;,<br>    &#123; year: &#x27;1999&#x27;, value: 33233 &#125;<br>  ];<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c6&#x27;,<br>    forceFit: true,<br>    height: 450<br>  &#125;);<br>  chart.source(data);<br>  chart.scale(&#123;<br>    value: &#123;<br>      min: 10000<br>    &#125;,<br>    year: &#123;<br>      range: [ 0, 1 ]<br>    &#125;<br>  &#125;);<br>  chart.axis(&#x27;value&#x27;, &#123;<br>    label: &#123;<br>      formatter: val => &#123;<br>        return (val / 10000).toFixed(1) + &#x27;k&#x27;;<br>      &#125;<br>    &#125;<br>  &#125;);<br>  chart.tooltip(&#123;<br>    crosshairs: &#123;<br>      type: &#x27;line&#x27;<br>    &#125;<br>  &#125;);<br><br>  chart.line().position(&#x27;year*value&#x27;).size(2);<br><br>  chart.guide().regionFilter(&#123;<br>    start: [ &#x27;1991&#x27;, &#x27;min&#x27; ],<br>    end: [ &#x27;1995&#x27;, &#x27;max&#x27; ],<br>    color: &#x27;#178fff&#x27;<br>  &#125;);<br>  chart.guide().regionFilter(&#123;<br>    start: [ &#x27;1995&#x27;, &#x27;min&#x27; ],<br>    end: [ &#x27;1999&#x27;, &#x27;max&#x27; ],<br>    color: &#x27;#2ec15a&#x27;<br>  &#125;);<br>  chart.render();<br></code></pre></td></tr></table></figure>

<h3 id="arc-辅助弧线"><a href="#arc-辅助弧线" class="headerlink" title="arc 辅助弧线"></a>arc 辅助弧线</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.guide().arc(&#123;<br>  top: true | false, // 指定 giude 是否绘制在 canvas 最上层，默认为 false, 即绘制在最下层<br>  start: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // 辅助框起始位置，值为原始数据值，支持 callback <br>  end: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;,// 辅助框结束位置，值为原始数据值，支持 callback<br>  style: &#123;&#125; // 图形样式属性<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><code>注意</code>：</p>
<ul>
<li>arc 辅助弧线，仅在 polar <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-coord">坐标系（Coord）</a>下生效</li>
</ul>
<h3 id="dataMarker-特殊数据标注点"><a href="#dataMarker-特殊数据标注点" class="headerlink" title="dataMarker 特殊数据标注点"></a>dataMarker 特殊数据标注点</h3><p>对图表中的某个特殊数据点进行标注。默认状态的特殊数据标注点由point、line、text三部分组成，同时开放接口对各部分是否显示及显示样式等进行设置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.guide().dataMarker(&#123;<br>  top:true | false, // 指定 giude 是否绘制在 canvas 最上层，默认为true, 即绘制在最上层<br>  position: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // 标注点起始位置，值为原始数据值，支持 callback ,<br>  content: &#123;string&#125;, // 显示的文本内容<br>  style: &#123;<br>    text: &#123;object&#125;,<br>    point:&#123;object&#125;,<br>    line:&#123;object&#125;<br>  &#125;,//可选，文本/point/line样式<br>  display:&#123;<br>    text:&#123;boolean&#125;,<br>    point:&#123;boolean&#125;,<br>    line:&#123;boolean&#125;<br>  &#125;,//可选，是否显示文本/point/line，默认为全部显示<br>  lineLength:&#123;number&#125;,//可选，line长度，default为30<br>  direction:&#x27;upward&#x27; | &#x27;downward&#x27; //可选，朝向，默认为upwaard<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><code>注意</code>：</p>
<ul>
<li>dataMarker 特殊数据标注点，适用于折线图和面积图</li>
</ul>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDA2MTg0NTQtYzUwNzgzYWEtMDcxNy00YzE4LWIyYzItNWE3YzRkYTIxZGQwLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">var data = [&#123; year: &#x27;1991&#x27;,value: 3&#125;, <br>            &#123; year: &#x27;1992&#x27;,value: 4&#125;, <br>            &#123; year: &#x27;1993&#x27;,value: 3.5&#125;, <br>            &#123; year: &#x27;1994&#x27;,value: 5&#125;, <br>            &#123; year: &#x27;1995&#x27;,value: 4.9&#125;, <br>            &#123; year: &#x27;1996&#x27;,value: 6&#125;, <br>            &#123; year: &#x27;1997&#x27;,value: 7&#125;, <br>            &#123; year: &#x27;1998&#x27;,value: 9&#125;, <br>            &#123; year: &#x27;1999&#x27;,value: 13&#125;];<br>var chart = new G2.Chart(&#123;<br>  container: &#x27;c7&#x27;,<br>  forceFit: true,<br>  height: window.innerHeight<br>&#125;);<br>chart.source(data);<br>chart.scale(&#x27;value&#x27;, &#123;<br>  min: 0<br>&#125;);<br>chart.scale(&#x27;year&#x27;, &#123;<br>  range: [0, 1]<br>&#125;);<br>chart.line().position(&#x27;year*value&#x27;);<br>chart.guide().dataMarker(&#123;<br>  position: [ &#x27;1997&#x27;, 7 ],<br>  content: &#x27;特殊数据标注点&#x27;<br>&#125;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h3 id="dataRegion-特殊数据区间标注"><a href="#dataRegion-特殊数据区间标注" class="headerlink" title="dataRegion 特殊数据区间标注"></a>dataRegion 特殊数据区间标注</h3><p>对图表中的某个特殊数据区间进行标注。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.guide().dataRegion(&#123;<br>  top:true | false, // 指定 giude 是否绘制在 canvas 最上层，默认为 true, 即绘制在最上层<br>  start: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // 标注点起始位置，值为原始数据值，支持 callback ,<br>  end: &#123;object&#125; | &#123;function&#125; | &#123;array&#125;, // 标注点结束位置，值为原始数据值，支持 callback ,<br>  content: &#123;string&#125;, // 显示的文本内容<br>  style: &#123;<br>    text: &#123;object&#125;,<br>    point:&#123;object&#125;,<br>    line:&#123;object&#125;<br>  &#125;,//可选，文本/point/line样式<br>  display:&#123;<br>    text:&#123;boolean&#125;,<br>    point:&#123;boolean&#125;,<br>    line:&#123;boolean&#125;<br>  &#125;,//可选，是否显示文本/point/line，默认为全部显示<br>  lineLength:&#123;number&#125;,//可选，line长度，default为30<br>  direction:&#x27;upward&#x27; | &#x27;downward&#x27; //可选，朝向，默认为upwaard<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><code>注意</code>：</p>
<ul>
<li>dataRegion 特殊数据区间标注，适用于折线图和面积图</li>
</ul>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDA2NTQ0MjQtMGM1N2VmZWMtNGM5MC00OTk0LWEyOWItNWNmMjQwNGNiY2Q5LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">var data = [&#123; year: &#x27;1991&#x27;,value: 3&#125;, <br>            &#123; year: &#x27;1992&#x27;,value: 4&#125;, <br>            &#123; year: &#x27;1993&#x27;,value: 3.5&#125;, <br>            &#123; year: &#x27;1994&#x27;,value: 5&#125;, <br>            &#123; year: &#x27;1995&#x27;,value: 4.9&#125;, <br>            &#123; year: &#x27;1996&#x27;,value: 6&#125;, <br>            &#123; year: &#x27;1997&#x27;,value: 7&#125;, <br>            &#123; year: &#x27;1998&#x27;,value: 9&#125;, <br>            &#123; year: &#x27;1999&#x27;,value: 13&#125;];<br>var chart = new G2.Chart(&#123;<br>  container: &#x27;c8&#x27;,<br>  forceFit: true,<br>  height: window.innerHeight<br>&#125;);<br>chart.source(data);<br>chart.scale(&#x27;value&#x27;, &#123;<br>  min: 0<br>&#125;);<br>chart.scale(&#x27;year&#x27;, &#123;<br>  range: [0, 1]<br>&#125;);<br>chart.line().position(&#x27;year*value&#x27;);<br>chart.guide().dataRegion(&#123;<br>  start: [ &#x27;1994&#x27;, 5 ],<br>  end: [ &#x27;1996&#x27;, 6 ],<br>  content: &#x27;数据区间标注&#x27;,<br>  lineLength: 50<br>&#125;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h3 id="动态辅助标记"><a href="#动态辅助标记" class="headerlink" title="动态辅助标记"></a>动态辅助标记</h3><p>辅助标记接受的位置信息的参数都是原始数据值，辅助标记一旦生成后就是固定了位置，如果数据发生改变，辅助标记就需要删除掉重新创建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">// 清除图表<br>chart.clear();<br>// 重新声明图形语法<br>chart.point().position(&#x27;carat*price&#x27;);<br>chart.guide().html([ newX, newY ], htmlstring);<br>chart.render();<br></code></pre></td></tr></table></figure>

<ul>
<li>newX,newY 是重新计算的位置</li>
</ul>
<p>如果数据是动态更新的那么这个过程需要频繁进行，基于这种场景 guide 提供两种计算动态位置的：</p>
<ul>
<li><p>可以使用’min’, ‘median’, ‘max’ 字符串代表原始值的最小值、平均值、最大值，例如： [0, ‘min’] 表示 x 轴上数值为 0，y 轴位置在数值的最小值上；</p>
</li>
<li><p>表示位置的数组可以换成回调函数，函数原型： <code>function(xScale, yScale) &#123;return [];&#125;</code></p>
</li>
<li><ul>
<li>xScale, yScale 映射到 x 轴上的字段生成的度量，详情查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-scale">度量</a>,<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-chart#eh2hbw"> ap</a>i;</li>
</ul>
</li>
<li><ul>
<li>分类度量常用的值是 <code>values</code> 包含了所有的分类，连续度量常用的是 min, max</li>
</ul>
</li>
</ul>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDA2OTU1MDEtNzFlYWY4YjEtYWQ5ZC00YmNjLTlkODQtNDZiMmNhNDA2NzFiLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [];                                                 <br>const time = Math.floor((new Date()).getTime() / 1000) * 1000;                             <br>                                                                <br>for (let i = -19; i <= 0; i++) &#123;                                    <br>  data.push(&#123;                                                 <br>    time: time + i * 3 * 1000,                                     <br>    value: Math.random() + .25                                      <br>  &#125;);                                                         <br>&#125;   <br><br>// 查找最大值<br>function findMax() &#123;<br>  let maxValue = 0;<br>  let maxObj = null;<br>  data.forEach(obj => &#123;<br>    if (obj.value > maxValue) &#123;<br>      maxValue = obj.value;<br>      maxObj = obj;<br>    &#125;<br>  &#125;);<br>  return maxObj;<br>&#125;<br><br>const chart = new G2.Chart(&#123; // 创建图表<br>  container: &#x27;c9&#x27;,<br>  forceFit: true,<br>  height: 450<br>&#125;);<br><br>chart.source(data, &#123;<br>  time: &#123;<br>    type: &#x27;time&#x27;,<br>    mask: &#x27;HH:mm:ss&#x27;<br>  &#125;<br>&#125;);<br><br>chart.line().position(&#x27;time*value&#x27;);<br>// 添加一条虚线<br>chart.guide().line(&#123;<br>  start: [ &#x27;min&#x27;, 0.25 ], <br>  end: [ &#x27;max&#x27;, 0.25] <br>&#125;);<br>chart.guide().text(&#123;<br>  position() &#123;<br>    const obj = findMax();<br>    return [ obj.time, obj.value ];<br>  &#125;,<br>  content: &#x27;最大值&#x27;<br>&#125;);<br><br>chart.render();<br><br>setInterval(function() &#123;<br>  data.shift();<br>  data.push(&#123;<br>    time: new Date().getTime(),<br>    value: Math.random() + .25<br>  &#125;);<br>  chart.changeData(data);<br>&#125;, 3000);<br></code></pre></td></tr></table></figure>

<h1 id="Facet-分面"><a href="#Facet-分面" class="headerlink" title="Facet 分面"></a>Facet 分面</h1><p>分面，将一份数据按照某个维度分隔成若干子集，然后创建一个图表的矩阵，将每一个数据子集绘制到图形矩阵的窗格中。</p>
<p>总结起来，分面其实提供了两个功能：</p>
<ol>
<li><p>按照指定的维度划分数据集；</p>
</li>
<li><p>对图表进行排版。</p>
</li>
</ol>
<p>对于探索型数据分析来说，分面是一个强大有力的工具，能帮你迅速地分析出数据各个子集模式的异同。<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL0hsVUpkamZZQ0VlZU9Lc0JSRW5wLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="如何设置分面"><a href="#如何设置分面" class="headerlink" title="如何设置分面"></a>如何设置分面</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.facet(type, &#123;<br>  fileds: [field1, field2...],<br>  showTitle: true, // 显示标题<br>  autoSetAxis: true,// 自动设置坐标轴的文本，避免重复和遮挡<br>  padding: 10, // 每个view 之间的间距<br>  /**<br>   * 创建每个分面中的视图<br>   * @param  &#123;object&#125; view  视图对象<br>   * @param  &#123;object&#125; facet facet中有行列等信息，常见属性：data rows cols rowIndex colIndex rowField colField<br>   * @return &#123;null&#125;<br>   */<br>  eachView(view, facet) &#123;&#125;,<br>  // 列标题<br>  colTitle: &#123;<br>    offsetY: -15,<br>    style: &#123;<br>      fontSize: 14,<br>      textAlign: &#x27;center&#x27;,<br>      fill: &#x27;#444&#x27;<br>    &#125;<br>  &#125;,<br>  // 行标题<br>  rowTitle: &#123;<br>    offsetX: 15,<br>    style: &#123;<br>      fontSize: 14,<br>      textAlign: &#x27;center&#x27;,<br>      rotate: 90,<br>      fill: &#x27;#444&#x27;<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li><p>第一个参数 <code>type</code> 用于指定分面的类型；</p>
</li>
<li><p><code>fileds</code> 属性用于指定数据集划分依据的字段；</p>
</li>
<li><p><code>eachView</code> 回调函数中创建各个视图的图表类型；</p>
</li>
</ul>
<p>也可以设置每个分面之间的间距 padding</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.facet(&#x27;list&#x27;, &#123;<br>  fileds: [ &#x27;cut&#x27;, &#x27;carat&#x27; ],<br>  padding: 20 // 各个分面之间的间距，也可以是数组 [top, right, bottom, left]<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>更多配置信息，请查阅 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-chart#cizqmm">Facet API</a>。</p>
<h2 id="分面的类型"><a href="#分面的类型" class="headerlink" title="分面的类型"></a>分面的类型</h2><p>G2 支持的分面类型如下表所示：</p>
<table>
<thead>
<tr>
<th>分面类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-facet#07bbpg">rect</a></td>
<td><strong>默认类型</strong>，指定 2 个维度作为行列，形成图表的矩阵。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-facet#toe6pw">list</a></td>
<td>指定一个维度，可以指定一行有几列，超出自动换行。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-facet#3cattw">circle</a></td>
<td>指定一个维度，沿着圆分布。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-facet#bn95db">tree</a></td>
<td>指定多个维度，每个维度作为树的一级，展开多层图表。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-facet#ncc9xr">mirror</a></td>
<td>指定一个维度，形成镜像图表。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/tutorial-facet#gz4qqf">matrix</a></td>
<td>指定一个维度，形成矩阵分面。</td>
</tr>
</tbody></table>
<h3 id="rect-矩形分面"><a href="#rect-矩形分面" class="headerlink" title="rect 矩形分面"></a>rect 矩形分面</h3><p>rect 矩形分面是 G2 的默认分面类型。支持按照一个或者两个维度的数据划分，按照先列后行的顺序。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.facet(&#x27;rect&#x27;, &#123;<br>  fields: [ &#x27;cut&#x27;, &#x27;clarity&#x27; ],<br>  eachView(view) &#123;<br>    view.point().position(&#x27;carat*price&#x27;).color(&#x27;cut&#x27;);<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>分面矩阵每列按照 <code>cut</code> 字段划分，每行按照 <code>clarity</code> 字段划分。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDEyMTI1NzgtMGRmODgwOWUtOWUyNi00ODYwLWIxNzEtODhlY2I3YjY0NWE3LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">$.getJSON(&#x27;/assets/data/diamond.json&#x27;, function(data) &#123;<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c1&#x27;,<br>    forceFit: true,<br>    height: 600,<br>    padding: [ 30, 80, 80, 80 ]<br>  &#125;);<br>  chart.source(data, &#123;<br>    carat: &#123;<br>      sync: true<br>    &#125;,<br>    price: &#123;<br>      sync: true<br>    &#125;,<br>    cut: &#123;<br>      sync: true<br>    &#125;<br>  &#125;);<br>  chart.facet(&#x27;rect&#x27;, &#123;<br>    fields: [ &#x27;cut&#x27;, &#x27;clarity&#x27; ],<br>    eachView(view) &#123;<br>      view.point().position(&#x27;carat*price&#x27;).color(&#x27;cut&#x27;);<br>    &#125;<br>  &#125;);<br>  chart.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li>可以将 <code>fields</code> 字段中表示行和列的字段名时，可以设置行或者列为 <code>null</code>,会变成单行或者单列的分面</li>
</ul>
<h3 id="list-水平列表分面"><a href="#list-水平列表分面" class="headerlink" title="list 水平列表分面"></a>list 水平列表分面</h3><p>该类型分面可以通过设置 <code>cols</code> 属性来指定每行可显示分面的个数，超出时会自动换行。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDEyNjA0MTEtZGIyYzMwY2QtOGRlMC00ZjFhLWI2YWYtM2Q3MGFjOGY0MTNjLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">$.getJSON(&#x27;/assets/data/diamond.json&#x27;, function(data) &#123;<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c2&#x27;,<br>    width: 800,<br>    height: 400,<br>    padding: [ 30, 90, 80, 80 ]<br>  &#125;);<br>  chart.source(data, &#123;<br>    carat: &#123;<br>      sync: true<br>    &#125;,<br>    price: &#123;<br>      sync: true<br>    &#125;,<br>    cut: &#123;<br>      sync: true<br>    &#125;<br>  &#125;);<br>  chart.facet(&#x27;list&#x27;, &#123;<br>    fields: [ &#x27;cut&#x27; ],<br>    cols: 3, // 超过3个换行<br>    padding: 30,<br>    eachView(view) &#123;<br>      view.point().position(&#x27;carat*price&#x27;).color(&#x27;cut&#x27;);<br>    &#125;<br>  &#125;);<br>  chart.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="circle-圆形分面"><a href="#circle-圆形分面" class="headerlink" title="circle 圆形分面"></a>circle 圆形分面</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDEyOTMyNTMtM2JiM2M3YzEtNzI3OC00ZmMyLTgzZmItMDE5YzU4N2NjZGU5LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const DataView = DataSet.DataView;<br>$.getJSON(&#x27;/assets/data/diamond.json&#x27;,function (data) &#123;<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c3&#x27;,<br>    width: 600,<br>    height: 600,<br>    animate: false,<br>    padding: [ 20, 20, 70, 20 ]<br>  &#125;);<br>  chart.source(data, &#123;<br>    mean: &#123;<br>      sync: true<br>    &#125;,<br>    cut: &#123;<br>      sync: true<br>    &#125;<br>  &#125;);<br>  chart.coord(&#x27;polar&#x27;);<br>  chart.axis(false);<br>  chart.facet(&#x27;circle&#x27;, &#123;<br>    fields: [ &#x27;clarity&#x27; ],<br>    padding: 0,<br>    eachView(view, facet) &#123;<br>      const data = facet.data;<br>      const dv = new DataView();<br>      dv.source(data).transform(&#123;<br>        type: &#x27;aggregate&#x27;,<br>        fields: [ &#x27;price&#x27; ],<br>        operations: [ &#x27;mean&#x27; ],<br>        as: [ &#x27;mean&#x27; ],<br>        groupBy: [ &#x27;cut&#x27; ]<br>      &#125;);<br>      view.source(dv);<br>      view.interval().position(&#x27;cut*mean&#x27;).color(&#x27;cut&#x27;);<br>    &#125;<br>  &#125;); // 分面设置<br>  chart.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="tree-树形分面"><a href="#tree-树形分面" class="headerlink" title="tree 树形分面"></a>tree 树形分面</h3><p>树形分面一般用于展示存在层次结构的数据，展示的是整体和部分之间的关系</p>
<p>提供了 <code>line</code> 和 <code>lineSmooth</code> 两个属性，用于配置连接各个分面的线的样式，其中：</p>
<ul>
<li><p>line，用于配置线的显示属性。</p>
</li>
<li><p>lineSmooth，各个树节点的连接线是否是平滑的曲线，默认为 false。</p>
</li>
</ul>
<p>下图展示了树形多层级的分面。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDEzMjE1NjEtNmQwYjIyN2ItZjZkMC00MWI5LWJmNmQtNTRlNjZmOGM1OTI4LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; gender: &#x27;男&#x27;, count: 40, class: &#x27;一班&#x27;, grade: &#x27;一年级&#x27; &#125;,<br>  &#123; gender: &#x27;女&#x27;, count: 30, class: &#x27;一班&#x27;, grade: &#x27;一年级&#x27; &#125;,<br>  &#123; gender: &#x27;男&#x27;, count: 35, class: &#x27;二班&#x27;, grade: &#x27;一年级&#x27; &#125;,<br>  &#123; gender: &#x27;女&#x27;, count: 45, class: &#x27;二班&#x27;, grade: &#x27;一年级&#x27; &#125;,<br>  &#123; gender: &#x27;男&#x27;, count: 20, class: &#x27;三班&#x27;, grade: &#x27;一年级&#x27; &#125;,<br>  &#123; gender: &#x27;女&#x27;, count: 35, class: &#x27;三班&#x27;, grade: &#x27;一年级&#x27; &#125;,<br>  &#123; gender: &#x27;男&#x27;, count: 30, class: &#x27;一班&#x27;, grade: &#x27;二年级&#x27; &#125;,<br>  &#123; gender: &#x27;女&#x27;, count: 40, class: &#x27;一班&#x27;, grade: &#x27;二年级&#x27; &#125;,<br>  &#123; gender: &#x27;男&#x27;, count: 25, class: &#x27;二班&#x27;, grade: &#x27;二年级&#x27; &#125;,<br>  &#123; gender: &#x27;女&#x27;, count: 32, class: &#x27;二班&#x27;, grade: &#x27;二年级&#x27; &#125;,<br>  &#123; gender: &#x27;男&#x27;, count: 28, class: &#x27;三班&#x27;, grade: &#x27;二年级&#x27; &#125;,<br>  &#123; gender: &#x27;女&#x27;, count: 36, class: &#x27;三班&#x27;, grade: &#x27;二年级&#x27; &#125;<br>];<br>const DataView = DataSet.DataView;<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c4&#x27;,<br>  width: 800,<br>  height: 400,<br>  animate: false,<br>  padding: [ 0, 90, 80, 80 ]<br>&#125;);<br>chart.source(data);<br>chart.coord(&#x27;theta&#x27;);<br>chart.tooltip(&#123;<br>  showTitle: false<br>&#125;);<br>chart.facet(&#x27;tree&#x27;, &#123;<br>  fields: [ &#x27;grade&#x27;,&#x27;class&#x27; ],<br>  line: &#123;<br>    stroke: &#x27;#00a3d7&#x27;<br>  &#125;,<br>  lineSmooth: true,<br>  eachView(view, facet) &#123;<br>    const data = facet.data;<br>    const dv = new DataView();<br>    dv.source(data).transform(&#123;<br>      type: &#x27;percent&#x27;,<br>      field: &#x27;count&#x27;,<br>      dimension: &#x27;gender&#x27;,<br>      as: &#x27;percent&#x27;<br>    &#125;);<br>    view.source(dv, &#123;<br>      percent: &#123;<br>        formatter(val) &#123;<br>          return (val * 100).toFixed(2) + &#x27;%&#x27;;<br>        &#125;<br>      &#125;<br>    &#125;);<br>    view.intervalStack().position(&#x27;percent&#x27;).color(&#x27;gender&#x27;);<br>  &#125;<br>&#125;); <br>chart.render();<br></code></pre></td></tr></table></figure>

<h3 id="mirror-镜像分面"><a href="#mirror-镜像分面" class="headerlink" title="mirror 镜像分面"></a>mirror 镜像分面</h3><p>镜像分面一般用于对比两类数据的场景，例如 男女的比例、正确错误的对比等</p>
<p>通过配置 <code>transpose</code> 属性为 true，可以将镜像分面翻转。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDEzNjAwNDEtZmQ5OTgzZWYtMDVmZi00NTc2LTk5YTUtNDI4YjBkNmNmNjFhLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">$.getJSON(&#x27;/assets/data/population.json&#x27;, function(data) &#123;<br>  const tmp = [];<br>  const dates = [];<br>  const selEl = $(&#x27;#selYear&#x27;);<br>  data.male.values.forEach(function(obj) &#123;<br>    if (dates.indexOf(obj.date) === -1) &#123;<br>      dates.push(obj.date);<br>    &#125;<br>    obj.age_groups.forEach(function(subObject) &#123;<br>      subObject.gender = &#x27;male&#x27;;<br>      subObject.date = obj.date;<br>      tmp.push(subObject);<br>    &#125;);<br>  &#125;);<br>  data.female.values.forEach(function(obj) &#123;<br>    obj.age_groups.forEach(function(subObject) &#123;<br>      subObject.gender = &#x27;female&#x27;;<br>      subObject.date = obj.date;<br>      tmp.push(subObject);<br>    &#125;);<br>  &#125;);<br>  dates.forEach(date => &#123;<br>    $(&#x27;<option value="&#x27; + date + &#x27;">&#x27; + new Date(date * 1000).getFullYear() + &#x27;</option>&#x27;).appendTo(selEl);<br>  &#125;);<br>  const ds = new DataSet(&#123;<br>    state: &#123;<br>      date: dates[0]<br>    &#125;<br>  &#125;);<br><br>  const dv = ds.createView()<br>    .source(tmp)<br>    .transform(&#123;<br>      type: &#x27;filter&#x27;,<br>      callback(row) &#123; // 判断某一行是否保留，默认返回true<br>        return new Date(row.date * 1000).getFullYear() === new Date(ds.state.date * 1000).getFullYear();<br>      &#125;<br>    &#125;);<br><br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c5&#x27;,<br>    forceFit: true,<br>    height: 600<br>  &#125;);<br><br>  chart.source(dv, &#123;<br>    age: &#123;<br>      sync: true,<br>      tickCount: 11<br>    &#125;,<br>    total_percentage: &#123;<br>      sync: true,<br>      formatter(v) &#123;<br>        return v + &#x27;%&#x27;;<br>      &#125;<br>    &#125;,<br>    gender: &#123;<br>      sync: true<br>    &#125;<br>  &#125;);<br>  chart.facet(&#x27;mirror&#x27;, &#123;<br>    fields: [ &#x27;gender&#x27; ],<br>    transpose: true,<br>    eachView(view) &#123;<br>      view.interval().position(&#x27;age*total_percentage&#x27;)<br>        .color(&#x27;gender&#x27;, [ &#x27;rgb(113,192,235)&#x27;, &#x27;rgb(246,170,203)&#x27; ]);<br>    &#125;<br>  &#125;);<br>  chart.render();<br>  selEl.on(&#x27;change&#x27;, function() &#123;<br>    const val = selEl.val();<br>    const date = parseInt(val);<br>    ds.setState(&#x27;date&#x27;, date);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="matrix-矩阵分面"><a href="#matrix-矩阵分面" class="headerlink" title="matrix 矩阵分面"></a>matrix 矩阵分面</h3><p>矩阵分面主要对比数据中多个字段之间的关系，例如常见的散点矩阵图</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDEzOTA3NTAtNzk3ZTk0OGMtZTYwMy00ZjQ0LWE2NGUtMzg4OTg5ODliNzkyLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const DataView = DataSet.DataView;<br>$.getJSON(&#x27;/assets/data/iris.json&#x27;, function(data) &#123;<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c6&#x27;,<br>    forceFit: true,<br>    height: 600<br>  &#125;);<br><br>  chart.source(data, &#123;<br>    Species: &#123;<br>      sync: true<br>    &#125;<br>  &#125;);<br>  chart.facet(&#x27;matrix&#x27;, &#123;<br>    fields: [ &#x27;SepalLength&#x27;, &#x27;SepalWidth&#x27;, &#x27;PetalLength&#x27;, &#x27;PetalWidth&#x27; ],<br>    eachView(view, facet) &#123;<br>      if (facet.rowIndex === facet.colIndex) &#123;<br>        const dv = new DataView();<br>        dv.source(facet.data)<br>          .transform(&#123;<br>            type: &#x27;bin.histogram&#x27;,<br>            field: facet.colField,  // 对应数轴上的一个点<br>            bins: 30,               // 分箱个数<br>            as: [ facet.colField, &#x27;count&#x27; ],<br>            groupBy: [ &#x27;Species&#x27; ]<br>          &#125;);<br>        view.source(dv.rows);<br>        view.intervalStack()<br>          .position(facet.colField + &#x27;*count&#x27;)<br>          .color(&#x27;Species&#x27;, [ &#x27;#880000&#x27;, &#x27;#008800&#x27;, &#x27;#000088&#x27; ]);<br>      &#125; else &#123;<br>        view.point()<br>          .position([ facet.colField, facet.rowField ])<br>          .color(&#x27;Species&#x27;, [ &#x27;#880000&#x27;, &#x27;#008800&#x27;, &#x27;#000088&#x27; ]);<br>      &#125;<br>    &#125;<br>  &#125;);<br>  chart.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h1 id="Theme-图表皮肤"><a href="#Theme-图表皮肤" class="headerlink" title="Theme 图表皮肤"></a>Theme 图表皮肤</h1><p>在图表样式上，G2 提供了丰富的自定义配置选项，既可从全局设置，也支持 Chart 级别的主题设置和局部设置数据层级的设置。</p>
<h2 id="图表主题"><a href="#图表主题" class="headerlink" title="图表主题"></a>图表主题</h2><p>G2 默认提供了两种图表主题： default、dark。<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL0VRYWRDalZGZmFYanVQYlN5U0pwLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="图表样式设置"><a href="#图表样式设置" class="headerlink" title="图表样式设置"></a>图表样式设置</h2><h3 id="新增主题"><a href="#新增主题" class="headerlink" title="新增主题"></a>新增主题</h3><p>新增主题可以使用 Global 上的 registerTheme 接口。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const &#123; Global &#125; = G2; // 获取 Global 全局对象<br>Global.registerTheme(&#x27;newTheme&#x27;, &#123;<br>  colors: [ &#x27;red&#x27;, &#x27;blue&#x27;, &#x27;yello&#x27; ]<br>&#125;); // 传入两个参数，一个参数是主题的名称，另一个参数是主题配置项<br></code></pre></td></tr></table></figure>

<p>这样就可以在全局切换这个主题或者在 chart 新建的时候指定设置的主题了。</p>
<h3 id="全局图表主题切换"><a href="#全局图表主题切换" class="headerlink" title="全局图表主题切换"></a>全局图表主题切换</h3><p>直接传入主题名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const &#123; Global &#125; = G2; // 获取 Global 全局对象<br>Global.setTheme(&#x27;dark&#x27;); // 传入值为 &#x27;default&#x27;、&#x27;dark&#x27; 的一种，如果不是，那么使用 default 主题。<br></code></pre></td></tr></table></figure>

<h3 id="变更全局样式"><a href="#变更全局样式" class="headerlink" title="变更全局样式"></a>变更全局样式</h3><p>G2 图表样式的配置项都是设置到全局变量 <code>G2.Global</code> 上，可以通过如下两种方式进行局部的样式设置：</p>
<p>（1）方式一： 直接赋值给全局对象 Global，但是不推荐</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">G2.Global.animate = false ; // 关闭默认动画<br>G2.Global.colors = [ &#x27;red&#x27;, &#x27;blue&#x27;, &#x27;yellow&#x27; ]; // 更改默认的颜色<br></code></pre></td></tr></table></figure>

<p>(2) 方式二： 使用 Global.setTheme 方法。推荐使用这种方式，使用方法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const theme = G2.Util.deepMix(&#123;<br>  animate: false,<br>  colors: &#123;...&#125;,<br>  shapes: &#123;...&#125;<br>  // 具体的配置项详见 api/global.html<br>&#125;, G2.Theme);<br><br>G2.Global.setTheme(theme); // 将主题设置为用户自定义的主题<br></code></pre></td></tr></table></figure>

<p>对于数据级别或者更细粒度的样式设置，可以通过 geom 对象上的 color 图形属性方法或者各个 chart 配置项上的图形属性设置。</p>
<p>更多 Global 上关于主题的配置属性，可以直接查看 <code>G2.Global</code> 的返回值。</p>
<h4 id="demo-演示-1"><a href="#demo-演示-1" class="headerlink" title="demo 演示"></a>demo 演示</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDE1NTA3NjAtMTlhOGM3ZTMtMGM2OS00YjFiLTk1OTctOWZlMWQyY2EwYTViLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const Util = G2.Util;<br>const theme = Util.deepMix(&#123;<br>  shape: &#123;<br>    polygon: &#123;<br>      stroke: &#x27;#213c51&#x27;, // 地图轮廓线颜色<br>      lineWidth: 1 // 地图轮廓线宽度<br>    &#125;,<br>    hollowPoint: &#123;<br>      fill: &#x27;#21273b&#x27;, // 点的填充颜色<br>      lineWidth: 2, // 点的边框宽度<br>      radius: 3 // 点的半径<br>    &#125;,<br>    interval: &#123;<br>      fillOpacity: 1 // 填充透明度设置<br>    &#125;<br>  &#125;,<br>  axis: &#123;<br>    bottom: &#123;<br>      label: &#123;<br>        textStyle: &#123; fill: &#x27;#999&#x27;&#125; // 底部标签文本的颜色<br>      &#125;<br>    &#125;,<br>    left: &#123;<br>      label: &#123;<br>        textStyle: &#123; fill: &#x27;#999&#x27;&#125; // 左部标签文本的颜色<br>      &#125;<br>    &#125;,<br>    right: &#123;<br>      label: &#123;<br>        textStyle: &#123; fill: &#x27;#999&#x27;&#125; // 右部标签文本的颜色<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;, G2.Global);<br>G2.Global.setTheme(theme);<br><br>$.getJSON(&#x27;/assets/data/world.geo.json&#x27;, function(mapData) &#123;<br>  const userData = [];<br>  const features = mapData.features;<br>  for(let i=0; i<features.length; i++) &#123;<br>    const name = features[i].properties.name;<br>    userData.push(&#123;<br>      "name": name,<br>      "value": Math.round(Math.random()*1000)<br>    &#125;);<br>  &#125;<br><br>  // 绘制地图背景<br>  const ds = new DataSet();<br>  const bgDataView = ds.createView(&#x27;back&#x27;)<br>    .source(mapData, &#123;<br>      type: &#x27;GeoJSON&#x27;<br>    &#125;)<br>    .transform(&#123;<br>      type: &#x27;geo.projection&#x27;,<br>      projection: &#x27;geoMercator&#x27;<br>    &#125;);<br>  const userPolygonDv = ds.createView()<br>    .source(userData)<br>    .transform(&#123;<br>      geoDataView: bgDataView,<br>      field: &#x27;name&#x27;,<br>      type: &#x27;geo.region&#x27;,<br>      as: [ &#x27;longitude&#x27;, &#x27;latitude&#x27; ]<br>  &#125;);<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c1&#x27;,<br>    forceFit: true,<br>    height: 400,<br>    padding: 0<br>  &#125;);<br>  chart.source(userPolygonDv);<br>  chart.coord().reflect();<br>  chart.tooltip(&#123;<br>    showTitle: false<br>  &#125;);<br>  chart.axis(false);<br>  chart.legend(false);<br>  chart.polygon()<br>    .position(&#x27;longitude*latitude&#x27;)<br>    .color(&#x27;value&#x27;,&#x27;#39ccf4-#20546b&#x27;)<br>    .style(&#123;<br>      lineWidth: 1,<br>      stroke: &#x27;#999&#x27;<br>    &#125;);<br>  chart.render();<br><br>  const data = [<br>    &#123; time: &#x27;10:10&#x27;, call: 4, waiting: 2, people: 2 &#125;,<br>    &#123; time: &#x27;10:15&#x27;, call: 2, waiting: 6, people: 3 &#125;,<br>    &#123; time: &#x27;10:20&#x27;, call: 13, waiting: 2, people: 5 &#125;,<br>    &#123; time: &#x27;10:25&#x27;, call: 9, waiting: 9, people: 1 &#125;,<br>    &#123; time: &#x27;10:30&#x27;, call: 5, waiting: 2, people: 3 &#125;,<br>    &#123; time: &#x27;10:35&#x27;, call: 8, waiting: 2, people: 1 &#125;,<br>    &#123; time: &#x27;10:40&#x27;, call: 13, waiting: 1, people: 2 &#125;<br>  ];<br>  const dv = new DataSet.DataView();<br>  dv.source(data).transform(&#123;<br>    type: &#x27;fold&#x27;,<br>    fields: [ &#x27;call&#x27;,&#x27;waiting&#x27; ],<br>    key: &#x27;type&#x27;,<br>    value: &#x27;count&#x27;,<br>    retains: [ &#x27;time&#x27;, &#x27;people&#x27; ]<br>  &#125;);<br>  const chart2 = new G2.Chart(&#123;<br>    container: &#x27;c2&#x27;,<br>    forceFit: true,<br>    height: 250<br>  &#125;);<br>  chart2.source(dv, &#123;<br>    &#x27;count&#x27;: &#123; alias: &#x27;话务量（通）&#x27;, min: 0 &#125;,<br>    &#x27;people&#x27;: &#123; alias: &#x27;人数（人）&#x27;, min: 0 &#125;<br>  &#125;);<br>  chart2.legend(false);// 不显示图例<br>  chart2.intervalStack().position(&#x27;time*count&#x27;).color(&#x27;type&#x27;, [ &#x27;#348cd1&#x27;, &#x27;#43b5d8&#x27; ]); // 绘制层叠柱状图<br>  chart2.line().position(&#x27;time*people&#x27;).color(&#x27;#5ed470&#x27;).size(4).shape(&#x27;smooth&#x27;); // 绘制曲线图<br>  chart2.point().position(&#x27;time*people&#x27;).color(&#x27;#5ed470&#x27;).tooltip(false); // 绘制点图<br>  chart2.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>Global 上可以配置的信息：</p>
<ul>
<li>全局的控制变量：柱子的默认宽度、版本号、折线图遇到 Null 时的处理策略</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const Global = &#123;<br>  version: &#x27;3.2.0-beta.3&#x27;,<br>  renderer2d: &#x27;canvas&#x27;,<br>  // renderer2d: &#x27;svg&#x27;,<br>  trackable: true,<br>  animate: true,<br>  snapArray: [ 0, 1, 2, 4, 5, 10 ],<br>  // 指定固定 tick 数的逼近值<br>  snapCountArray: [ 0, 1, 1.2, 1.5, 1.6, 2, 2.2, 2.4, 2.5, 3, 4, 5, 6, 7.5, 8, 10 ],<br>  widthRatio: &#123; // 宽度所占的分类的比例<br>    column: 1 / 2, // 一般的柱状图占比 1/2<br>    rose: 0.9999999, // 玫瑰图柱状占比 1<br>    multiplePie: 1 / 1.3 // 多层的饼图、环图<br>  &#125;,<br>  // 折线图、区域图、path 当只有一个数据时，是否显示成点<br>  showSinglePoint: false,<br>  connectNulls: false,<br>  scales: &#123;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>更多的查看：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/antvis/g2/blob/master/src/global.js">https://github.com/antvis/g2/blob/master/src/global.js</a></p>
<ul>
<li>默认的皮肤样式，查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/antvis/g2/blob/master/src/theme/default.js">https://github.com/antvis/g2/blob/master/src/theme/default.js</a></li>
</ul>
<h3 id="Chart-级别主题切换"><a href="#Chart-级别主题切换" class="headerlink" title="Chart 级别主题切换"></a>Chart 级别主题切换</h3><p>同一个上下文现在支持多种主题共存，上述两个图表，通过给第二个图表指定主题，可以切换其主题：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const chart2 = new G2.Chart(&#123;<br>  container: &#x27;c2&#x27;,<br>  forceFit: true,<br>  height: 250,<br>  theme: &#x27;dark&#x27;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDE2MDA1NjEtNDQzMGVlYjctZjc4Zi00NjlmLWFmNWUtNzMxYTQ0ZDkyNWZjLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const Util = G2.Util;<br>const theme = Util.deepMix(&#123;<br>  shape: &#123;<br>    polygon: &#123;<br>      stroke: &#x27;#213c51&#x27;, // 地图轮廓线颜色<br>      lineWidth: 1 // 地图轮廓线宽度<br>    &#125;,<br>    hollowPoint: &#123;<br>      fill: &#x27;#21273b&#x27;, // 点的填充颜色<br>      lineWidth: 2, // 点的边框宽度<br>      radius: 3 // 点的半径<br>    &#125;,<br>    interval: &#123;<br>      fillOpacity: 1 // 填充透明度设置<br>    &#125;<br>  &#125;,<br>  axis: &#123;<br>    bottom: &#123;<br>      label: &#123;<br>        textStyle: &#123; fill: &#x27;#999&#x27;&#125; // 底部标签文本的颜色<br>      &#125;<br>    &#125;,<br>    left: &#123;<br>      label: &#123;<br>        textStyle: &#123; fill: &#x27;#999&#x27;&#125; // 左部标签文本的颜色<br>      &#125;<br>    &#125;,<br>    right: &#123;<br>      label: &#123;<br>        textStyle: &#123; fill: &#x27;#999&#x27;&#125; // 右部标签文本的颜色<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;, G2.Global);<br>G2.Global.setTheme(theme);<br><br>$.getJSON(&#x27;/assets/data/world.geo.json&#x27;, function(mapData) &#123;<br>  const userData = [];<br>  const features = mapData.features;<br>  for(let i=0; i<features.length; i++) &#123;<br>    const name = features[i].properties.name;<br>    userData.push(&#123;<br>      "name": name,<br>      "value": Math.round(Math.random()*1000)<br>    &#125;);<br>  &#125;<br><br>  // 绘制地图背景<br>  const ds = new DataSet();<br>  const bgDataView = ds.createView(&#x27;back&#x27;)<br>    .source(mapData, &#123;<br>      type: &#x27;GeoJSON&#x27;<br>    &#125;)<br>    .transform(&#123;<br>      type: &#x27;geo.projection&#x27;,<br>      projection: &#x27;geoMercator&#x27;<br>    &#125;);<br>  const userPolygonDv = ds.createView()<br>    .source(userData)<br>    .transform(&#123;<br>      geoDataView: bgDataView,<br>      field: &#x27;name&#x27;,<br>      type: &#x27;geo.region&#x27;,<br>      as: [ &#x27;longitude&#x27;, &#x27;latitude&#x27; ]<br>  &#125;);<br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;c3&#x27;,<br>    forceFit: true,<br>    height: 400,<br>    padding: 0<br>  &#125;);<br>  chart.source(userPolygonDv);<br>  chart.coord().reflect();<br>  chart.tooltip(&#123;<br>    showTitle: false<br>  &#125;);<br>  chart.axis(false);<br>  chart.legend(false);<br>  chart.polygon()<br>    .position(&#x27;longitude*latitude&#x27;)<br>    .color(&#x27;value&#x27;,&#x27;#39ccf4-#20546b&#x27;)<br>    .style(&#123;<br>      lineWidth: 1,<br>      stroke: &#x27;#999&#x27;<br>    &#125;);<br>  chart.render();<br><br>  const data = [<br>    &#123; time: &#x27;10:10&#x27;, call: 4, waiting: 2, people: 2 &#125;,<br>    &#123; time: &#x27;10:15&#x27;, call: 2, waiting: 6, people: 3 &#125;,<br>    &#123; time: &#x27;10:20&#x27;, call: 13, waiting: 2, people: 5 &#125;,<br>    &#123; time: &#x27;10:25&#x27;, call: 9, waiting: 9, people: 1 &#125;,<br>    &#123; time: &#x27;10:30&#x27;, call: 5, waiting: 2, people: 3 &#125;,<br>    &#123; time: &#x27;10:35&#x27;, call: 8, waiting: 2, people: 1 &#125;,<br>    &#123; time: &#x27;10:40&#x27;, call: 13, waiting: 1, people: 2 &#125;<br>  ];<br>  const dv = new DataSet.DataView();<br>  dv.source(data).transform(&#123;<br>    type: &#x27;fold&#x27;,<br>    fields: [ &#x27;call&#x27;,&#x27;waiting&#x27; ],<br>    key: &#x27;type&#x27;,<br>    value: &#x27;count&#x27;,<br>    retains: [ &#x27;time&#x27;, &#x27;people&#x27; ]<br>  &#125;);<br>  const chart2 = new G2.Chart(&#123;<br>    container: &#x27;c4&#x27;,<br>    forceFit: true,<br>    height: 250,<br>    theme: &#x27;dark&#x27;<br>  &#125;);<br>  chart2.source(dv, &#123;<br>    &#x27;count&#x27;: &#123; alias: &#x27;话务量（通）&#x27;, min: 0 &#125;,<br>    &#x27;people&#x27;: &#123; alias: &#x27;人数（人）&#x27;, min: 0 &#125;<br>  &#125;);<br>  chart2.legend(false);// 不显示图例<br>  chart2.intervalStack().position(&#x27;time*count&#x27;).color(&#x27;type&#x27;, [ &#x27;#348cd1&#x27;, &#x27;#43b5d8&#x27; ]); // 绘制层叠柱状图<br>  chart2.line().position(&#x27;time*people&#x27;).color(&#x27;#5ed470&#x27;).size(4).shape(&#x27;smooth&#x27;); // 绘制曲线图<br>  chart2.point().position(&#x27;time*people&#x27;).color(&#x27;#5ed470&#x27;).tooltip(false); // 绘制点图<br>  chart2.render();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h1 id="Label-图形文本"><a href="#Label-图形文本" class="headerlink" title="Label 图形文本"></a>Label 图形文本</h1><p>恰当的文本标注可以提高可视化图表的可读性。除了提供文本标签标注的功能之外，G2 还支持文本的格式化以及自定义 html 文本标签的功能。<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL2xTYXNZa0xVTEZJSFlJcEVJZVV3LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="如何使用-1"><a href="#如何使用-1" class="headerlink" title="如何使用"></a>如何使用</h2><p>在每个几何标记 geom 上调用 label 方法，指定需要显示的数据维度即可：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">// 指定显示文本标签<br>chart.point().position(&#x27;x*y&#x27;).label(&#x27;x&#x27;);<br>// 格式化文本标签的显示内容<br>chart.interval().position(&#x27;x*y&#x27;).label(&#x27;x&#x27;, &#123;<br>  offset: &#123;number&#125;, // 设置坐标轴文本 label 距离坐标轴线的距离<br>  textStyle: &#123;<br>    textAlign: &#x27;center&#x27;, // 文本对齐方向，可取值为： start middle end<br>    fill: &#x27;#404040&#x27;, // 文本的颜色<br>    fontSize: &#x27;12&#x27;, // 文本大小<br>    fontWeight: &#x27;bold&#x27;, // 文本粗细<br>    textBaseline: &#x27;top&#x27; // 文本基准线，可取 top middle bottom，默认为middle<br>  &#125; || &#123;function&#125;, // 支持回调 <br>  rotate: 30,<br>  autoRotate: &#123;boolean&#125; // 是否需要自动旋转，默认为 true<br>  formatter: &#123;function&#125;, // 回调函数，用于格式化坐标轴上显示的文本信息<br>  htmlTemplate: &#123;function&#125;, // 使用 html 自定义 label<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDE3NjM3MDQtZWM4OTFkOTMtMWExNi00ZWI3LWFhNTUtMzYxNmI5ZjBlMDkyLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; genre: &#x27;Sports&#x27;, sold: 275 &#125;,<br>  &#123; genre: &#x27;Strategy&#x27;, sold: 115 &#125;,<br>  &#123; genre: &#x27;Action&#x27;, sold: 120 &#125;,<br>  &#123; genre: &#x27;Shooter&#x27;, sold: 350 &#125;,<br>  &#123; genre: &#x27;Other&#x27;, sold: 150 &#125;<br>];<br><br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c0&#x27;,<br>  height: 300,<br>  forceFit: true,<br>  padding: [ 40, 20, 95, 80 ]<br>&#125;);<br><br>chart.source(data, &#123;<br>  genre: &#123;<br>    alias: &#x27;游戏种类&#x27; // 列定义，定义该属性显示的别名<br>  &#125;,<br>  sold: &#123;<br>    alias: &#x27;销售量&#x27;<br>  &#125;<br>&#125;);<br>chart.interval().position(&#x27;genre*sold&#x27;).color(&#x27;genre&#x27;).label(&#x27;sold&#x27;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<p>更多配置项请查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-geom#84ebds">label</a> api。</p>
<h2 id="格式化文本"><a href="#格式化文本" class="headerlink" title="格式化文本"></a>格式化文本</h2><p>如果默认提供的 label 显示形式不满足需求时，可以在 label 中定义 formatter 回调函数。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.interval().position(&#x27;x*y&#x27;).label(&#x27;x&#x27;, &#123;<br>  /**<br>   * 文本格式化函数<br>   * @param  &#123;string&#125; text  每条记录 x 属性的值<br>   * @param  &#123;object&#125; item  映射后的每条数据记录，是一个对象，可以从里面获取你想要的数据信息<br>   * @param  &#123;number&#125; index 每条记录的索引<br>   * @return &#123;string&#125;       返回格式化后的文本<br>   */<br>  formatter: (text, item, index) => &#123;&#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDE3OTA0ODYtNmVmNDg4YWEtODEyYy00ZGRmLWE5ZDEtMWM2ZGYzMmNkOTRhLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>完整代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; name: &#x27;Microsoft Internet Explorer&#x27;, value: 56.33 &#125;,<br>  &#123; name: &#x27;Chrome&#x27;, value: 24.03 &#125;,<br>  &#123; name: &#x27;Firefox&#x27;, value: 10.38 &#125;,<br>  &#123; name: &#x27;Safari&#x27;,  value: 4.77 &#125;,<br>  &#123; name: &#x27;Opera&#x27;, value: 0.91 &#125;,<br>  &#123; name: &#x27;Proprietary or Undetectable&#x27;, value: 0.2 &#125;<br>];<br>const dv = new DataSet.DataView();<br>dv.source(data).transform(&#123;<br>  type: &#x27;percent&#x27;,<br>  field: &#x27;value&#x27;,<br>  dimension: &#x27;name&#x27;,<br>  as: &#x27;percent&#x27;<br>&#125;);<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  width: 800,<br>  height: 400<br>&#125;);<br>chart.source(dv);<br>// 重要：绘制饼图时，必须声明 theta 坐标系<br>chart.coord(&#x27;theta&#x27;, &#123;<br>  radius: 0.8 // 设置饼图的大小<br>&#125;);<br>chart.tooltip(&#123;<br>  showTitle: false<br>&#125;);<br>chart.intervalStack()<br>  .position(&#x27;percent&#x27;)<br>  .color(&#x27;name&#x27;)<br>  .tooltip(&#x27;name*percent&#x27;, (name, percent) => &#123;<br>    return &#123;<br>      name,<br>      value: (percent * 100).toFixed(2) + &#x27;%&#x27;<br>    &#125;;<br>  &#125;)<br>  .label(&#x27;name&#x27;, &#123;<br>    formatter: (text, item, index) => &#123;<br>      const point = item.point; // 每个弧度对应的点<br>      let percent = point[&#x27;percent&#x27;];<br>      percent = (percent * 100).toFixed(2) + &#x27;%&#x27;;<br>      return text + &#x27; &#x27; + percent;<br>    &#125;<br>  &#125;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h2 id="自定义-html-文本"><a href="#自定义-html-文本" class="headerlink" title="自定义 html 文本"></a>自定义 html 文本</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.interval().position(&#x27;x*y&#x27;).label(&#x27;x&#x27;, &#123;<br>  /**<br>   * 创建 html 文本<br>   * @param  &#123;string&#125; text  每条记录 x 属性的值<br>   * @param  &#123;object&#125; item  映射后的每条数据记录，是一个对象，可以从里面获取你想要的数据信息<br>   * @param  &#123;number&#125; index 每条记录的索引<br>   * @return &#123;string&#125;       返回 html 字符串<br>   */<br>  htmlTemplate: (text, item, index) => &#123;&#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>label 除了可以格式化文本的显示，也支持使用 html 自定义显示的样式。只需要定义 htmlTemplate 格式化文本的回调函数即可，如下例所示：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDE4MjQ5MTItOWQ0M2U3NDktYzY4ZC00N2JkLTlkMzktZThmNGE0MDVkOGYxLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>完整代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; name: &#x27;示例 A&#x27;, value: 38.8 &#125;,<br>  &#123; name: &#x27;示例 B&#x27;, value: 9.15 &#125;,<br>  &#123; name: &#x27;示例 C&#x27;, value: 26.35 &#125;,<br>  &#123; name: &#x27;示例 D &#x27;,  value: 22.6 &#125;,<br>  &#123; name: &#x27;示例 E&#x27;, value: 3.1 &#125;<br>];<br>const dv = new DataSet.DataView();<br>dv.source(data).transform(&#123;<br>  type: &#x27;percent&#x27;,<br>  field: &#x27;value&#x27;,<br>  dimension: &#x27;name&#x27;,<br>  as: &#x27;percent&#x27;<br>&#125;);<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c2&#x27;,<br>  width: 800,<br>  height: 400<br>&#125;);<br>chart.source(dv);<br>// 重要：绘制饼图时，必须声明 theta 坐标系<br>chart.coord(&#x27;theta&#x27;, &#123;<br>  radius: 0.8 // 设置饼图的大小<br>&#125;);<br>chart.tooltip(&#123;<br>  showTitle: false<br>&#125;);<br>chart.intervalStack()<br>  .position(&#x27;percent&#x27;)<br>  .color(&#x27;name&#x27;)<br>  .tooltip(&#x27;name*percent&#x27;, (name, percent) => &#123;<br>    return &#123;<br>      name: name,<br>      value: (percent * 100).toFixed(2) + &#x27;%&#x27;<br>    &#125;;<br>  &#125;)<br>  .label(&#x27;name&#x27;, &#123;<br>    labelLine: false, // 不显示文本的连接线<br>    offset: 30, // 文本距离图形的距离<br>    htmlTemplate: (text, item, index) => &#123;<br>      const point = item.point; // 每个弧度对应的点<br>      let percent = point[&#x27;percent&#x27;];<br>      percent = (percent * 100).toFixed(2) + &#x27;%&#x27;;<br>      return &#x27;<span class="title" style="display: inline-block;width: 50px;">&#x27; + text + &#x27;</span><br><span style="color:&#x27; + point.color + &#x27;">&#x27; + percent + &#x27;</span>&#x27;; // 自定义 html 模板<br>    &#125;<br>  &#125;);<br>chart.render();<br></code></pre></td></tr></table></figure>

<h1 id="图表事件"><a href="#图表事件" class="headerlink" title="图表事件"></a>图表事件</h1><p>chart 对象提供了各种事件支持，以响应用户的操作，方便用户扩展交互。开发者可以监听这些事件，然后通过回调函数做相应的处理，比如跳转到一个地址，或者弹出对话框，或者做数据下钻等等。</p>
<p>G2 中的事件用法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.on(&#x27;eventType&#x27;, fn); // 绑定事件<br>chart.off(&#x27;eventType&#x27;, fn); // 移除事件<br></code></pre></td></tr></table></figure>

<p>其中 eventType 对应事件名称，均使用小写。</p>
<p>对于事件的移除，<code>chart.off(&#39;eventType&#39;, fn)</code> 其中如果 fn 不指定，表示删除所有 eventType 事件，如果 eventType 和 fn 都不指定，则表示删除 chart 上所有的事件。</p>
<p>在 G2 中，我们将事件分为如下事件：</p>
<ol>
<li>画布基础事件，如 mousedown click dblclick 等；</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.on(&#x27;mousedown&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;mousemove&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;mouseleave&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;mouseup&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;click&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;dblclick&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;touchstart&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;touchmove&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;touchend&#x27;, ev => &#123;&#125;);<br></code></pre></td></tr></table></figure>

<ol>
<li>绘图区域事件，如 plotmove plotclick 等；</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.on(&#x27;plotenter&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;plotmove&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;plotleave&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;plotclick&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;plotdblclick&#x27;, ev => &#123;&#125;);<br></code></pre></td></tr></table></figure>

<ol>
<li>tooltip 事件；</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.on(&#x27;tooltip:show&#x27;, ev => &#123;&#125;); // tooltip 展示<br>chart.on(&#x27;tooltip:hide&#x27;, ev => &#123;&#125;); // tooltip 隐藏<br>chart.on(&#x27;tooltip:change&#x27;, ev => &#123;&#125;); // tooltip 内容发生变化的时候<br></code></pre></td></tr></table></figure>

<ol>
<li>图形元素事件，即组成图表的各种图形元素；我们以 『图形元素名』+ 『基础事件名』 的方式来组合图形元素上的事件，帮助用户进行更精准的事件监听，同时也给交互提供了更大的可能性。</li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDIwMTYzMTQtNDgyODI1OTItYmJiNi00YzU0LWEwOWUtYTQ3MWVjOTFhMTFiLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">chart.on(&#x27;point:click&#x27;, ev => &#123;&#125;);<br>chart.on(&#x27;axis-label:click&#x27;, ev => &#123;&#125;);<br>img,[object Object],<br></code></pre></td></tr></table></figure>

<p>下图展示了图表各个组件的名称：<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9ndy5hbGlwYXlvYmplY3RzLmNvbS96b3Mvcm1zcG9ydGFsL0lYUlpKVktXWUVkYWZZQXpic1hPLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>详细的使用详见 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.yuque.com/antv/g2-docs/api-chart#deduxh">api</a>。</p>
<h2 id="如何使用-2"><a href="#如何使用-2" class="headerlink" title="如何使用"></a>如何使用</h2><h3 id="示例-1：饼图点击跳转"><a href="#示例-1：饼图点击跳转" class="headerlink" title="示例 1：饼图点击跳转"></a>示例 1：饼图点击跳转</h3><p>先来看一个简单的点击饼图后跳转至相应页面的例子。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDIwNTQwMDYtZjhlODhiOGEtOTkxZi00MTlkLWFlZjgtY2M3MTc5ZTQ5NjA2LnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>通过监听 <code>interval:click</code> 事件，然后根据 <code>ev</code> 参数中的 data 字段的 <code>_origin</code> 属性值获取被点击区域的原始数据，以获取对应浏览器的名称。</p>
<p>完整代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; name: &#x27;IE&#x27;, value: 56.33 &#125;,<br>  &#123; name: &#x27;Chrome&#x27;, value: 24.03 &#125;,<br>  &#123; name: &#x27;Firefox&#x27;, value: 10.38 &#125;,<br>  &#123; name: &#x27;Safari&#x27;,  value: 4.77 &#125;,<br>  &#123; name: &#x27;Opera&#x27;, value: 0.91 &#125;,<br>  &#123; name: &#x27;Unknown&#x27;, value: 0.2 &#125;<br>];<br>const DataView = DataSet.DataView;<br>const dv = new DataView();<br>dv.source(data).transform(&#123;<br>  type: &#x27;percent&#x27;,<br>  field: &#x27;value&#x27;,<br>  dimension: &#x27;name&#x27;,<br>  as: &#x27;percent&#x27;<br>&#125;);<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c1&#x27;,<br>  forceFit: true,<br>  height: 400<br>&#125;);<br>chart.source(dv);<br>// 重要：绘制饼图时，必须声明 theta 坐标系<br>chart.coord(&#x27;theta&#x27;, &#123;<br>  radius: 0.8 // 设置饼图的大小<br>&#125;);<br>chart.tooltip(&#123;<br>  showTitle: false<br>&#125;);<br>chart.intervalStack()<br>  .position(&#x27;percent&#x27;)<br>  .color(&#x27;name&#x27;)<br>  .tooltip(&#x27;name*percent&#x27;, (name, percent) => &#123;<br>    return &#123;<br>      name,<br>      value: (percent * 100).toFixed(2) + &#x27;%&#x27;<br>    &#125;;<br>  &#125;)<br>  .style(&#123;<br>    cursor: &#x27;pointer&#x27;<br>  &#125;)<br>  .label(&#x27;name&#x27;);<br><br>chart.render();<br><br>chart.on(&#x27;interval:click&#x27;, ev => &#123;<br>  const data = ev.data;<br>  if (data) &#123;<br>    const name = data._origin[&#x27;name&#x27;];<br>    window.open(&#x27;http://www.baidu.com/s?wd=&#x27; + name);<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li><p>通过 interval:click 监听饼图的点击事件</p>
</li>
<li><p>通过 style 方法中设置 cursor: ‘pointer’ 改变鼠标形状</p>
</li>
</ul>
<h3 id="示例-2：动态改变-tooltip-显示信息"><a href="#示例-2：动态改变-tooltip-显示信息" class="headerlink" title="示例 2：动态改变 tooltip 显示信息"></a>示例 2：动态改变 tooltip 显示信息</h3><p>通过监听 <code>tooltip:change</code> 事件，可以做到动态得改变 tooltip 的显示信息，以完成 tooltip 的高度个性化定制。</p>
<p><code>tooltip:change</code> 事件的参数格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">&#123;<br>  items: array, // tooltip 上显示的记录信息<br>  tooltip: object, // 当前 tooltip 对象<br>  x: number, // 鼠标点击的 x 坐标点<br>  y: number // 鼠标点击的 y 坐标点<br>&#125;<br></code></pre></td></tr></table></figure>

<p>通过 <code>ev.items[0]</code> 获取 tooltip 上的第一条记录数据，重复复制该记录的 <code>value</code> 属性。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDIwOTAxMDQtZWM2YzVkMWEtYjljZi00MDEyLWIxZTktNzIwYTNmMDNlNzQxLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<p>完整代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">const data = [<br>  &#123; name: &#x27;示例 A&#x27;, value: 38.8 &#125;,<br>  &#123; name: &#x27;示例 B&#x27;, value: 9.15 &#125;,<br>  &#123; name: &#x27;示例 C&#x27;, value: 26.35 &#125;,<br>  &#123; name: &#x27;示例 D &#x27;,  value: 22.6 &#125;,<br>  &#123; name: &#x27;示例 E&#x27;, value: 3.1 &#125;<br>];<br>const dv = new DataSet.DataView();<br>dv.source(data).transform(&#123;<br>  type: &#x27;percent&#x27;,<br>  field: &#x27;value&#x27;,<br>  dimension: &#x27;name&#x27;,<br>  as: &#x27;percent&#x27;<br>&#125;);<br>const chart = new G2.Chart(&#123;<br>  container: &#x27;c2&#x27;,<br>  width: 800,<br>  height: 400<br>&#125;);<br>chart.source(dv);<br>// 重要：绘制饼图时，必须声明 theta 坐标系<br>chart.coord(&#x27;theta&#x27;, &#123;<br>  radius: 0.8 // 设置饼图的大小<br>&#125;);<br>chart.tooltip(&#123;<br>  showTitle: false<br>&#125;);<br>chart.intervalStack()<br>  .position(&#x27;percent&#x27;)<br>  .color(&#x27;name&#x27;);<br>chart.render();<br><br>chart.on(&#x27;tooltip:change&#x27;, ev => &#123;<br>  const item = ev.items[0]; // 获取tooltip要显示的内容<br>  item.value = &#x27;格式化-&#x27; + (item.value * 100).toFixed(2) + &#x27;%&#x27;;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h1 id="图表交互"><a href="#图表交互" class="headerlink" title="图表交互"></a>图表交互</h1><p>G2 默认内置的交互包括：</p>
<ol>
<li><p>active 激活；</p>
</li>
<li><p>select 选中。</p>
</li>
</ol>
<h2 id="激活"><a href="#激活" class="headerlink" title="激活"></a>激活</h2><p>开启以及关闭 shape 对于鼠标 hover 时的响应效果，G2 默认为各个 shape 内置了 active 效果。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">geom.active(false); // 关闭默认响应<br>geom.active(true); // 开启默认响应<br></code></pre></td></tr></table></figure>

<h2 id="选中"><a href="#选中" class="headerlink" title="选中"></a>选中</h2><p>各个几何标记 geom 选中的模式包含如下三种：</p>
<ol>
<li><p>不可选中；</p>
</li>
<li><p>单选；</p>
</li>
<li><p>多选；</p>
</li>
<li><p>选中是否可取消选中。</p>
</li>
</ol>
<p>选中模式的设置方式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">geom.select(false); // 关闭<br>geom.select(true); // 打开<br>geom.select([true,] &#123;<br>  mode: &#x27;single&#x27; || &#x27;multiple&#x27;, // 选中模式，单选、多选<br>  style: &#123;&#125;, // 选中后 shape 的样式<br>  cancelable: true | false, // 选中之后是否允许取消选中，默认允许取消选中<br>  animate: true | false // 选中是否执行动画，默认执行动画<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>默认情况下，G2 中只有饼图支持选中交互，其他 geom 的选中模式默认情况下都是关闭的。</p>
<p>下面通过一个实例来演示选中 <code>select(enable, cfg)</code> 方法的使用。</p>
<h3 id="示例：地图省市下钻"><a href="#示例：地图省市下钻" class="headerlink" title="示例：地图省市下钻"></a>示例：地图省市下钻</h3><p>本例中的地图 GeoJSON 数据请访问该地址获取：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext"><script src="https://a.alipayobjects.com/g/datavis/china-geojson/1.0.0/index.js"></script><br></code></pre></td></tr></table></figure>

<p>或者 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/antvis/china-geojson">github</a>。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAxOC9wbmcvMTAwOTk2LzE1Mzk4NDIzMDM4NjAtNDI3NjdmYTAtYjg3OC00MWFjLWE1MTQtYjczMDNkOWIyNWFiLnBuZw?x-oss-process=image/format,png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre class=" language-hljs plaintext"><code class="language-hljs plaintext">let provinceChart;<br>  function processData(mapData) &#123;<br>    // 构造虚拟数据<br>    const userData = [];<br>    const features = mapData.features;<br>    for (let i = 0; i < features.length; i++) &#123;<br>      const name = features[i].properties.name;<br>      userData.push(&#123;<br>        name: name,<br>        value: Math.round(Math.random() * 1000),<br>      &#125;);<br>    &#125;<br>    const ds = new DataSet();<br>    const geoDataView = ds.createView().source(mapData, &#123;<br>      type: &#x27;GeoJSON&#x27;,<br>    &#125;); // geoJSON 经纬度数据<br><br>    // 用户数据<br>    const dvData = ds.createView().source(userData);<br>    dvData.transform(&#123;<br>      type: &#x27;geo.region&#x27;,<br>      field: &#x27;name&#x27;,<br>      geoDataView: geoDataView,<br>      as: [&#x27;longitude&#x27;, &#x27;latitude&#x27;],<br>    &#125;);<br><br>    return dvData;<br>  &#125;<br><br>  function renderProvinceChart(name) &#123;<br>    const provinceData = ChinaGeoJSON[name];<br>    provinceChart && provinceChart.destroy();<br>    provinceChart = null;<br>    if (!provinceData) &#123;<br>      return;<br>    &#125;<br>    const dv = processData(provinceData);<br><br>    // start: 计算地图的最佳宽高<br>    const longitudeRange = dv.range(&#x27;longitude&#x27;);<br>    const latitudeRange = dv.range(&#x27;latitude&#x27;);<br>    const ratio = (longitudeRange[1] - longitudeRange[0]) / (latitudeRange[1] - latitudeRange[0]);<br>    let width;<br>    let height;<br>    if (ratio > 1) &#123;<br>      width = 450;<br>      height = width / ratio;<br>    &#125; else &#123;<br>      width = 350 * ratio;<br>      height = 350;<br>    &#125;<br>    // end: 计算地图的最佳宽高<br><br>    provinceChart = new G2.Chart(&#123;<br>      container: &#x27;province&#x27;,<br>      width,<br>      height,<br>      padding: 0<br>    &#125;);<br>    provinceChart.source(dv);<br>    provinceChart.axis(false);<br>    provinceChart.tooltip(&#123;<br>      showTitle: false,<br>    &#125;);<br>    provinceChart<br>      .polygon()<br>      .position(&#x27;longitude*latitude&#x27;)<br>      .label(&#x27;name&#x27;, &#123;<br>        textStyle: &#123;<br>          fill: &#x27;#fff&#x27;,<br>          fontSize: 10,<br>          shadowBlur: 2,<br>          shadowColor: &#x27;rgba(0, 0, 0, .45)&#x27;<br>        &#125;,<br>      &#125;)<br>      .style(&#123;<br>        stroke: &#x27;#fff&#x27;,<br>        lineWidth: 1,<br>      &#125;)<br>      .color(&#x27;value&#x27;, &#x27;#BAE7FF-#1890FF-#0050B3&#x27;);<br>      provinceChart.render();<br>  &#125;<br><br>  const mapData = ChinaGeoJSON[&#x27;China&#x27;];<br>  const chinaDv = processData(mapData);<br>  const longitudeRange = chinaDv.range(&#x27;longitude&#x27;);<br>  const latitudeRange = chinaDv.range(&#x27;latitude&#x27;);<br>  const ratio = (longitudeRange[1] - longitudeRange[0]) / (latitudeRange[1] - latitudeRange[0]);<br><br>  const chart = new G2.Chart(&#123;<br>    container: &#x27;china&#x27;,<br>    width: 250,<br>    height: 250 / ratio,<br>    padding: 0,<br>    animate: false<br>  &#125;);<br><br>  chart.source(chinaDv);<br>  chart.tooltip(&#123;<br>    showTitle: false,<br>  &#125;);<br>  chart.axis(false);<br>  chart<br>    .polygon()<br>    .position(&#x27;longitude*latitude&#x27;)<br>    .tooltip(&#x27;name&#x27;)<br>    .style(&#123;<br>      stroke: &#x27;#bfbfbf&#x27;,<br>      lineWidth: 1,<br>      fill: &#x27;#e3e3e3&#x27;,<br>      globalAlpha: 0.85,<br>      cursor: &#x27;pointer&#x27;, // 设置鼠标手势<br>    &#125;)<br>    .select(&#123;<br>      // 设置是否允许选中以及选中样式<br>      mode: &#x27;single&#x27;, // 多选还是单选<br>      style: &#123;<br>        fill: &#x27;#1890ff&#x27;, // 选中的样式<br>      &#125;,<br>    &#125;);<br>  chart.render();<br><br>  const shapes = chart.getAllGeoms()[0].getShapes();<br>  for (let i = 0, len = shapes.length; i < len; i++) &#123;<br>    const shape = shapes[i];<br>    const origin = shape.get(&#x27;origin&#x27;)[&#x27;_origin&#x27;];<br>    const name = origin.name;<br>    if (name === &#x27;浙江&#x27;) &#123;<br>      renderProvinceChart(name);<br>      chart.getAllGeoms()[0].setShapeSelected(shape);<br>    &#125;<br>  &#125;<br><br>  chart.on(&#x27;plotclick&#x27;, function(ev) &#123;<br>    const shape = ev.shape;<br>    if (!shape || !shape.name) &#123;<br>      return false;<br>    &#125;<br>    if (shape.get(&#x27;selected&#x27;)) &#123;<br>      const item = shape.get(&#x27;origin&#x27;);<br>      const data = item[&#x27;_origin&#x27;];<br>      const name = data.name;<br>      renderProvinceChart(name);<br>    &#125; else &#123;<br>      provinceChart && provinceChart.clear();<br>    &#125;<br>  &#125;);<br></code></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://ziptop.top">白墨</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://ziptop.top/posts/54170/">https://ziptop.top/posts/54170/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ziptop.top" target="_blank">白墨</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91/">网站开发</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="post-meta__tags" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96%E6%8A%80%E6%9C%AF/">可视化技术</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">数据可视化</a></div><div class="post_share"><div class="social-share" data-image="/assert/img/background/img12.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/assert/img/pay/WeChat_pay.jpg" target="_blank"><img class="post-qr-code-img" src="/assert/img/pay/WeChat_pay.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/assert/img/pay/ali_pay.jpg" target="_blank"><img class="post-qr-code-img" src="/assert/img/pay/ali_pay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/35727/"><img class="prev-cover" src="/assert/img/background/img15.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">R 数据可视化 03 | 圈图</div></div></a></div><div class="next-post pull-right"><a href="/posts/19587/"><img class="next-cover" src="/assert/img/background/img20.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">生信自动化分析流程 nf-core 的离线运行（图文详解）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/35258/" title="一步一步安装及配置 Node.js 与 NPM"><img class="cover" src="/assert/img/background/img03.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-27</div><div class="title">一步一步安装及配置 Node.js 与 NPM</div></div></a></div><div><a href="/posts/37322/" title="如何绘制全球新冠病毒疫情动态分布图"><img class="cover" src="/assert/img/background/img18.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-09</div><div class="title">如何绘制全球新冠病毒疫情动态分布图</div></div></a></div><div><a href="/posts/12247/" title="最新最全 VSCODE 插件推荐（2022版）"><img class="cover" src="/assert/img/background/img07.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-20</div><div class="title">最新最全 VSCODE 插件推荐（2022版）</div></div></a></div><div><a href="/posts/1551/" title="D3入门篇 01 | 选择集及数据处理"><img class="cover" src="/assert/img/background/img10.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-05-31</div><div class="title">D3入门篇 01 | 选择集及数据处理</div></div></a></div><div><a href="/posts/17355/" title="Linux 安装 node，npm （详细图解）"><img class="cover" src="/assert/img/background/img18.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-16</div><div class="title">Linux 安装 node，npm （详细图解）</div></div></a></div><div><a href="/posts/22838/" title="axios 使用详解"><img class="cover" src="/assert/img/background/img04.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-16</div><div class="title">axios 使用详解</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info card-baimo"><div class="is-center"><div class="card-baimo-sayhi">你好，我是</div><div class="card-baimo-name">郑磊 <span class="card-baimo-subname">白墨</span></div><div class="card-baimo-description">这里有关于<b>生物信息</b>，<b>软件开发</b>相关的文章和看法，也有<b>科研动态</b>和<b>学术分享</b>。<br/> 相信你可以在这里找到对你有用的<b>知识</b>和<b>启发</b>。</div><div class="author-info__description"></div></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="http://baimoc.ziptop.top/blog/20201216/5ctbVrG5RAO3.png" rel="external nofollow noreferrer" target="_blank" title="微信"><i class="iconfont icon-weixin"></i></a><a class="social-icon" href="https://www.zhihu.com/people/baimoc" rel="external nofollow noreferrer" target="_blank" title="知乎"><i class="iconfont icon-zhihu"></i></a><a class="social-icon" href="https://zhenglei.blog.csdn.net/" rel="external nofollow noreferrer" target="_blank" title="CSDN"><i class="iconfont icon-csdn"></i></a><a class="social-icon" href="https://github.com/qqdb" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="mailto:baimoc@163.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="iconfont icon-youjianduanxin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#G2-%E5%9B%BE%E8%A1%A8%E7%BB%84%E6%88%90"><span class="toc-text">G2 图表组成</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4-AXES"><span class="toc-text">坐标轴 AXES</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E4%BE%8B-LEGEND"><span class="toc-text">图例 LEGEND</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0-GEOM"><span class="toc-text">几何标记 GEOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E7%A4%BA%E4%BF%A1%E6%81%AF-TOOLTIP"><span class="toc-text">提示信息 TOOLTIP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%85%E5%8A%A9%E6%A0%87%E8%AE%B0-GUIDE"><span class="toc-text">辅助标记 GUIDE</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%9B%BE%E8%A1%A8"><span class="toc-text">创建图表</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E5%AE%B9%E5%99%A8"><span class="toc-text">图表容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E6%A0%B7%E5%BC%8F"><span class="toc-text">图表样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE"><span class="toc-text">其他配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E5%AE%BD%E5%BA%A6%E8%87%AA%E9%80%82%E5%BA%94"><span class="toc-text">图表宽度自适应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E5%8A%A8%E7%94%BB"><span class="toc-text">图表动画</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A3%85%E8%BD%BD%E6%95%B0%E6%8D%AE"><span class="toc-text">装载数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A3%85%E8%BD%BD%E6%95%B0%E6%8D%AE"><span class="toc-text">如何装载数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="toc-text">支持的数据格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON-%E6%95%B0%E7%BB%84"><span class="toc-text">JSON 数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DataView-%E5%AF%B9%E8%B1%A1"><span class="toc-text">DataView 对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="toc-text">更新数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE-1"><span class="toc-text">更新数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E7%90%86%E5%9B%BE%E5%BD%A2%E8%AF%AD%E6%B3%95"><span class="toc-text">清理图形语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-DataView-%E6%9B%B4%E6%96%B0"><span class="toc-text">使用 DataView  更新</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DataSet"><span class="toc-text">DataSet</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AF%E8%AF%AD%E8%A1%A8"><span class="toc-text">术语表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-text">安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E5%85%A5"><span class="toc-text">浏览器引入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-npm-%E5%AE%89%E8%A3%85"><span class="toc-text">通过 npm 安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D"><span class="toc-text">功能介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-text">使用示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8-DataView"><span class="toc-text">单独使用 DataView</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E9%87%8F"><span class="toc-text">状态量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E8%81%94%E5%8A%A8%E7%A4%BA%E4%BE%8B"><span class="toc-text">图表联动示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Scale-%E5%BA%A6%E9%87%8F"><span class="toc-text">Scale 度量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%A6%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">度量的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%A6%E9%87%8F%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-text">度量的功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%A6%E9%87%8F%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">度量的类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#linear"><span class="toc-text">linear</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log"><span class="toc-text">log</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#log-%E5%BA%A6%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">log 度量的使用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pow"><span class="toc-text">pow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#time"><span class="toc-text">time</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cat"><span class="toc-text">cat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#timeCat"><span class="toc-text">timeCat</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%97%E5%AE%9A%E4%B9%89"><span class="toc-text">什么是列定义</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%93%8D%E4%BD%9C"><span class="toc-text">如何操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#chart-source-data-defs"><span class="toc-text">chart.source(data, defs)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chart-scale"><span class="toc-text">chart.scale()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Demo-%E6%BC%94%E7%A4%BA"><span class="toc-text">Demo 演示</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Geom-%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0"><span class="toc-text">Geom 几何标记</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0"><span class="toc-text">什么是几何标记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%A3%B0%E6%98%8E%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0"><span class="toc-text">如何声明几何标记</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">几何标记类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0%E5%92%8C%E5%9B%BE%E8%A1%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">几何标记和图表类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#geom-%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-text">geom 对象方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0%E5%92%8C%E5%9B%BE%E5%BD%A2%E5%BD%A2%E7%8A%B6"><span class="toc-text">几何标记和图形形状</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Attr-%E5%9B%BE%E5%BD%A2%E5%B1%9E%E6%80%A7"><span class="toc-text">Attr 图形属性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%BD%A2%E5%B1%9E%E6%80%A7"><span class="toc-text">图形属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%BD%A2%E5%B1%9E%E6%80%A7%E5%A3%B0%E6%98%8E%E8%AF%AD%E6%B3%95"><span class="toc-text">图形属性声明语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#position-%E4%BD%8D%E7%BD%AE%E5%B1%9E%E6%80%A7"><span class="toc-text">position 位置属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#color"><span class="toc-text">color</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E6%95%B0%E6%8D%AE%E7%9A%84%E9%A2%9C%E8%89%B2%E6%98%A0%E5%B0%84"><span class="toc-text">分类数据的颜色映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E7%BB%AD%E6%95%B0%E6%8D%AE%E7%9A%84%E9%A2%9C%E8%89%B2%E6%98%A0%E5%B0%84"><span class="toc-text">连续数据的颜色映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%9C%E8%89%B2%E4%BD%BF%E7%94%A8%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-text">颜色使用回调函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shape"><span class="toc-text">shape</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#geom-%E5%92%8C-shape"><span class="toc-text">geom 和 shape</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#demo-%E6%BC%94%E7%A4%BA"><span class="toc-text">demo 演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-text">使用回调函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#size"><span class="toc-text">size</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">回调函数的使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#opacity"><span class="toc-text">opacity</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E5%9B%BE%E5%BD%A2%E5%B1%9E%E6%80%A7%E7%9A%84%E6%98%A0%E5%B0%84"><span class="toc-text">更多图形属性的映射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Geom-%E6%94%AF%E6%8C%81%E7%9A%84%E5%9B%BE%E5%BD%A2%E5%B1%9E%E6%80%A7"><span class="toc-text">Geom 支持的图形属性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Coord-%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-text">Coord 坐标系</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E7%B3%BB%E4%BB%8B%E7%BB%8D"><span class="toc-text">坐标系介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-text">如何设置坐标系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E7%B3%BB%E7%B1%BB%E5%9E%8B%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="toc-text">坐标系类型及配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E7%B3%BB%E9%85%8D%E7%BD%AE"><span class="toc-text">坐标系配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E7%B3%BB%E5%8F%98%E6%8D%A2"><span class="toc-text">坐标系变换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%AE%9E%E4%BE%8B"><span class="toc-text">相关实例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Axis-%E5%9D%90%E6%A0%87%E8%BD%B4"><span class="toc-text">Axis 坐标轴</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4%E9%85%8D%E7%BD%AE"><span class="toc-text">坐标轴配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text">坐标轴的组成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4%E6%A0%87%E9%A2%98-title"><span class="toc-text">坐标轴标题 title</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4%E7%BA%BF-line"><span class="toc-text">坐标轴线 line</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4%E6%96%87%E6%9C%AC-label"><span class="toc-text">坐标轴文本 label</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4%E5%88%BB%E5%BA%A6%E7%BA%BF-tickLine"><span class="toc-text">坐标轴刻度线 tickLine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4%E5%AD%90%E5%88%BB%E5%BA%A6%E7%BA%BF-subTickLine"><span class="toc-text">坐标轴子刻度线 subTickLine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E6%A0%BC-grid"><span class="toc-text">网格 grid</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE-1"><span class="toc-text">其他配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%9D%90%E6%A0%87%E8%BD%B4%E6%98%BE%E7%A4%BA%E8%8C%83%E5%9B%B4"><span class="toc-text">设置坐标轴显示范围</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%9D%90%E6%A0%87%E8%BD%B4%E5%88%BB%E5%BA%A6%E7%BA%BF%E4%B8%AA%E6%95%B0"><span class="toc-text">设置坐标轴刻度线个数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%9D%90%E6%A0%87%E8%BD%B4%E5%88%BB%E5%BA%A6%E7%BA%BF%E9%97%B4%E8%B7%9D"><span class="toc-text">设置坐标轴刻度线间距</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E7%B3%BB%E4%B8%A4%E7%AB%AF%E4%BF%9D%E7%95%99%E4%B8%80%E5%AE%9A%E7%9A%84%E7%A9%BA%E7%99%BD"><span class="toc-text">坐标系两端保留一定的空白</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%B4%E5%9C%A8%E5%85%B6%E4%BB%96%E5%9D%90%E6%A0%87%E7%B3%BB%E4%B8%8B%E7%9A%84%E6%98%BE%E7%A4%BA"><span class="toc-text">坐标轴在其他坐标系下的显示</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Legend-%E5%9B%BE%E4%BE%8B"><span class="toc-text">Legend 图例</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E4%BE%8B"><span class="toc-text">图例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE%E5%9B%BE%E4%BE%8B"><span class="toc-text">如何配置图例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E4%BE%8B%E6%95%B4%E4%BD%93%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="toc-text">图例整体样式设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%84%E4%B8%AA%E5%9B%BE%E4%BE%8B%E9%A1%B9%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="toc-text">各个图例项样式设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E4%BE%8B%E7%9A%84%E9%80%89%E6%8B%A9%E6%A8%A1%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="toc-text">图例的选择模式设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-html-%E6%B8%B2%E6%9F%93%E5%9B%BE%E4%BE%8B"><span class="toc-text">使用 html 渲染图例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-text">常见问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Tooltip-%E6%8F%90%E7%A4%BA%E4%BF%A1%E6%81%AF"><span class="toc-text">Tooltip 提示信息</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tooltip-%E9%85%8D%E7%BD%AE%E8%AF%AD%E6%B3%95"><span class="toc-text">tooltip 配置语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="toc-text">配置示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A-tooltip-%E7%9A%84%E6%98%BE%E7%A4%BA%E4%BF%A1%E6%81%AF"><span class="toc-text">指定 tooltip 的显示信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96-tooltip-%E7%9A%84%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9"><span class="toc-text">格式化 tooltip 的显示内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-geom-tooltip-%E5%9B%9E%E8%B0%83"><span class="toc-text">使用 geom.tooltip() 回调</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%91%E5%90%AC-tooltip-change-%E4%BA%8B%E4%BB%B6"><span class="toc-text">监听 tooltip:change 事件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-html-%E6%A8%A1%E6%9D%BF"><span class="toc-text">自定义 html 模板</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE-2"><span class="toc-text">其他配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E8%BE%85%E5%8A%A9%E7%BA%BF%EF%BC%88%E8%BE%85%E5%8A%A9%E6%A1%86%EF%BC%89"><span class="toc-text">显示辅助线（辅助框）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%B9%E5%8F%98-tooltip-%E8%A7%A6%E5%8F%91%E6%96%B9%E5%BC%8F"><span class="toc-text">改变 tooltip 触发方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Guide-%E8%BE%85%E5%8A%A9%E5%85%83%E7%B4%A0"><span class="toc-text">Guide 辅助元素</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#guide-%E7%B1%BB%E5%9E%8B"><span class="toc-text">guide 类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8"><span class="toc-text">如何使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#line-%E8%BE%85%E5%8A%A9%E7%BA%BF"><span class="toc-text">line 辅助线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#image-%E8%BE%85%E5%8A%A9%E5%9B%BE%E7%89%87"><span class="toc-text">image 辅助图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#text-%E8%BE%85%E5%8A%A9%E6%96%87%E6%9C%AC"><span class="toc-text">text 辅助文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#region-%E8%BE%85%E5%8A%A9%E6%A1%86"><span class="toc-text">region 辅助框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%85%E5%8A%A9-html"><span class="toc-text">辅助 html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%85%E5%8A%A9-regionFilter"><span class="toc-text">辅助 regionFilter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#arc-%E8%BE%85%E5%8A%A9%E5%BC%A7%E7%BA%BF"><span class="toc-text">arc 辅助弧线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dataMarker-%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E7%82%B9"><span class="toc-text">dataMarker 特殊数据标注点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dataRegion-%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E5%8C%BA%E9%97%B4%E6%A0%87%E6%B3%A8"><span class="toc-text">dataRegion 特殊数据区间标注</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E6%A0%87%E8%AE%B0"><span class="toc-text">动态辅助标记</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Facet-%E5%88%86%E9%9D%A2"><span class="toc-text">Facet 分面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E5%88%86%E9%9D%A2"><span class="toc-text">如何设置分面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%9D%A2%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">分面的类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#rect-%E7%9F%A9%E5%BD%A2%E5%88%86%E9%9D%A2"><span class="toc-text">rect 矩形分面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list-%E6%B0%B4%E5%B9%B3%E5%88%97%E8%A1%A8%E5%88%86%E9%9D%A2"><span class="toc-text">list 水平列表分面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#circle-%E5%9C%86%E5%BD%A2%E5%88%86%E9%9D%A2"><span class="toc-text">circle 圆形分面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tree-%E6%A0%91%E5%BD%A2%E5%88%86%E9%9D%A2"><span class="toc-text">tree 树形分面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mirror-%E9%95%9C%E5%83%8F%E5%88%86%E9%9D%A2"><span class="toc-text">mirror 镜像分面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#matrix-%E7%9F%A9%E9%98%B5%E5%88%86%E9%9D%A2"><span class="toc-text">matrix 矩阵分面</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Theme-%E5%9B%BE%E8%A1%A8%E7%9A%AE%E8%82%A4"><span class="toc-text">Theme 图表皮肤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E4%B8%BB%E9%A2%98"><span class="toc-text">图表主题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="toc-text">图表样式设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E4%B8%BB%E9%A2%98"><span class="toc-text">新增主题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%9B%BE%E8%A1%A8%E4%B8%BB%E9%A2%98%E5%88%87%E6%8D%A2"><span class="toc-text">全局图表主题切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E6%9B%B4%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F"><span class="toc-text">变更全局样式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#demo-%E6%BC%94%E7%A4%BA-1"><span class="toc-text">demo 演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chart-%E7%BA%A7%E5%88%AB%E4%B8%BB%E9%A2%98%E5%88%87%E6%8D%A2"><span class="toc-text">Chart 级别主题切换</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Label-%E5%9B%BE%E5%BD%A2%E6%96%87%E6%9C%AC"><span class="toc-text">Label 图形文本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-1"><span class="toc-text">如何使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%96%87%E6%9C%AC"><span class="toc-text">格式化文本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-html-%E6%96%87%E6%9C%AC"><span class="toc-text">自定义 html 文本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E4%BA%8B%E4%BB%B6"><span class="toc-text">图表事件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-2"><span class="toc-text">如何使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-1%EF%BC%9A%E9%A5%BC%E5%9B%BE%E7%82%B9%E5%87%BB%E8%B7%B3%E8%BD%AC"><span class="toc-text">示例 1：饼图点击跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-2%EF%BC%9A%E5%8A%A8%E6%80%81%E6%94%B9%E5%8F%98-tooltip-%E6%98%BE%E7%A4%BA%E4%BF%A1%E6%81%AF"><span class="toc-text">示例 2：动态改变 tooltip 显示信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E4%BA%A4%E4%BA%92"><span class="toc-text">图表交互</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BF%80%E6%B4%BB"><span class="toc-text">激活</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E4%B8%AD"><span class="toc-text">选中</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%9C%B0%E5%9B%BE%E7%9C%81%E5%B8%82%E4%B8%8B%E9%92%BB"><span class="toc-text">示例：地图省市下钻</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/41842/" title="图解机器学习之回归模型性能评估指标"><img src="/assert/img/background/img12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图解机器学习之回归模型性能评估指标"/></a><div class="content"><a class="title" href="/posts/41842/" title="图解机器学习之回归模型性能评估指标">图解机器学习之回归模型性能评估指标</a><time datetime="2022-06-03T03:04:30.000Z" title="发表于 2022-06-03 11:04:30">2022-06-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/17813/" title="序列比对应用场景"><img src="/assert/img/background/img05.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="序列比对应用场景"/></a><div class="content"><a class="title" href="/posts/17813/" title="序列比对应用场景">序列比对应用场景</a><time datetime="2022-05-16T10:47:18.000Z" title="发表于 2022-05-16 18:47:18">2022-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/22838/" title="axios 使用详解"><img src="/assert/img/background/img04.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="axios 使用详解"/></a><div class="content"><a class="title" href="/posts/22838/" title="axios 使用详解">axios 使用详解</a><time datetime="2022-05-16T08:20:58.000Z" title="发表于 2022-05-16 16:20:58">2022-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/57043/" title="数据库涉及大量数据查询时的注意事项"><img src="/assert/img/background/img19.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库涉及大量数据查询时的注意事项"/></a><div class="content"><a class="title" href="/posts/57043/" title="数据库涉及大量数据查询时的注意事项">数据库涉及大量数据查询时的注意事项</a><time datetime="2022-05-16T03:44:30.000Z" title="发表于 2022-05-16 11:44:30">2022-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/63432/" title="图解机器学习：分类模型性能评估指标"><img src="/assert/img/background/img18.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图解机器学习：分类模型性能评估指标"/></a><div class="content"><a class="title" href="/posts/63432/" title="图解机器学习：分类模型性能评估指标">图解机器学习：分类模型性能评估指标</a><time datetime="2022-05-05T04:48:34.000Z" title="发表于 2022-05-05 12:48:34">2022-05-05</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">Copyright 2020 - 2023 By 白墨 | 蒙ICP备16001931号</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="nav-music"><div id="nav-music-hoverTips" onclick="baimo.musicToggle()">播放音乐</div><meting-js id="7827269582" server="netease" type="playlist" mutex="true" preload="none" theme="var(--baimo-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text" style="margin-botton: 15px"/></div></div><div id="local-search-results"><div id="tag-lists"><a class="tag-list" href="/tags/自学/">自学</a><a class="tag-list" href="tags/统计学/">统计学</a><a class="tag-list" href="/tags/机器学习/">机器学习</a><a class="tag-list" href="/tags/测序技术/">测序技术</a><a class="tag-list" href="/tags/生信流程/">生信流程</a></div></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>function loadWaline () {
  function insertCSS () {
    const link = document.createElement("link")
    link.rel = "stylesheet"
    link.href = "https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css"
    document.head.appendChild(link)
  }

  function initWaline () {
    const waline = Waline.init(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://waline.ziptop.top',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: false,
    }, null))
  }

  if (typeof Waline === 'function') initWaline()
  else {
    insertCSS()
    getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js').then(initWaline)
  }
}

if ('Waline' === 'Waline' || !true) {
  if (true) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><script data-pjax src="/assert/js/categoryBar.js"></script><script data-pjax src="/assert/js/nav-menu.js"></script><script async src="/assert/js/APlayer.min.js"></script><script async src="/assert/js/Meting2.min.js"></script><script async src="/assert/js/baimo.js"></script><script async src="/assert/js/baimofunction.js"></script><script async src="/assert/js/info.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-D20ET8Z6PT', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="../../../../js/busuanzi.pure.mini.js"></script></div></body></html>